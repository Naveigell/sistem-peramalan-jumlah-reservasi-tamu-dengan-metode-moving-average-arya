$((function(){"use strict";$(".preloader").fadeOut(),$(".left-sidebar").hover((function(){$(".navbar-header").addClass("expand-logo")}),(function(){$(".navbar-header").removeClass("expand-logo")})),$(".nav-toggler").on("click",(function(){$("#main-wrapper").toggleClass("show-sidebar"),$(".nav-toggler i").toggleClass("ti-menu")})),$(".nav-lock").on("click",(function(){$("body").toggleClass("lock-nav"),$(".nav-lock i").toggleClass("mdi-toggle-switch-off"),$("body, .page-wrapper").trigger("resize")})),$(".search-box a, .search-box .app-search .srh-btn").on("click",(function(){$(".app-search").toggle(200),$(".app-search input").focus()})),$((function(){$(".service-panel-toggle").on("click",(function(){$(".customizer").toggleClass("show-service-panel")})),$(".page-wrapper").on("click",(function(){$(".customizer").removeClass("show-service-panel")}))})),$(".floating-labels .form-control").on("focus blur",(function(t){$(this).parents(".form-group").toggleClass("focused","focus"===t.type||this.value.length>0)})).trigger("blur"),$((function(){$('[data-toggle="tooltip"]').tooltip()})),$((function(){$('[data-toggle="popover"]').popover()})),$("body, .page-wrapper").trigger("resize"),$(".page-wrapper").show(),$(".list-task li label").click((function(){$(this).toggleClass("task-done")}));var t=function(){(window.innerWidth>0?window.innerWidth:this.screen.width)<1170?$("#main-wrapper").attr("data-sidebartype","mini-sidebar"):$("#main-wrapper").attr("data-sidebartype","full")};$(window).ready(t),$(window).on("resize",t),$(".sidebartoggler").on("click",(function(){$("#main-wrapper").toggleClass("mini-sidebar"),$("#main-wrapper").hasClass("mini-sidebar")?($(".sidebartoggler").prop("checked",!0),$("#main-wrapper").attr("data-sidebartype","mini-sidebar")):($(".sidebartoggler").prop("checked",!1),$("#main-wrapper").attr("data-sidebartype","full"))}))})),$((function(){"use strict";var t=window.location+"",e=t.replace(window.location.protocol+"//"+window.location.host+"/",""),n=$("ul#sidebarnav a").filter((function(){return this.href===t||this.href===e||t.indexOf(this.href)>=0}));n.parentsUntil(".sidebar-nav").each((function(t){$(this).is("li")&&0!==$(this).children("a").length?($(this).children("a").addClass("active"),0===$(this).parent("ul#sidebarnav").length?$(this).addClass("active"):$(this).addClass("selected")):$(this).is("ul")||0!==$(this).children("a").length?$(this).is("ul")&&$(this).addClass("in"):$(this).addClass("selected")})),n.addClass("active"),$("#sidebarnav a").on("click",(function(t){$(this).hasClass("active")?$(this).hasClass("active")&&($(this).removeClass("active"),$(this).parents("ul:first").removeClass("active"),$(this).next("ul").removeClass("in")):($("ul",$(this).parents("ul:first")).removeClass("in"),$("a",$(this).parents("ul:first")).removeClass("active"),$(this).next("ul").addClass("in"),$(this).addClass("active"))})),$("#sidebarnav >li >a.has-arrow").on("click",(function(t){t.preventDefault()}))})),function(t){"use strict";function e(t){return function(t){return null!==t&&t===t.window}(t)?t:9===t.nodeType&&t.defaultView}function n(t){var n,i,o={top:0,left:0},a=t&&t.ownerDocument;return n=a.documentElement,void 0!==t.getBoundingClientRect&&(o=t.getBoundingClientRect()),i=e(a),{top:o.top+i.pageYOffset-n.clientTop,left:o.left+i.pageXOffset-n.clientLeft}}function i(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e+=n+":"+t[n]+";");return e}function o(e){var n=function(t){if(!1===l.allowEvent(t))return null;for(var e=null,n=t.target||t.srcElement;null!==n.parentElement;){if(!(n instanceof SVGElement||-1===n.className.indexOf("waves-effect"))){e=n;break}if(n.classList.contains("waves-effect")){e=n;break}n=n.parentElement}return e}(e);null!==n&&(s.show(e,n),"ontouchstart"in t&&(n.addEventListener("touchend",s.hide,!1),n.addEventListener("touchcancel",s.hide,!1)),n.addEventListener("mouseup",s.hide,!1),n.addEventListener("mouseleave",s.hide,!1))}var a=a||{},r=document.querySelectorAll.bind(document),s={duration:750,show:function(t,e){if(2===t.button)return!1;var o=e||this,a=document.createElement("div");a.className="waves-ripple",o.appendChild(a);var r=n(o),l=t.pageY-r.top,c=t.pageX-r.left,d="scale("+o.clientWidth/100*10+")";"touches"in t&&(l=t.touches[0].pageY-r.top,c=t.touches[0].pageX-r.left),a.setAttribute("data-hold",Date.now()),a.setAttribute("data-scale",d),a.setAttribute("data-x",c),a.setAttribute("data-y",l);var h={top:l+"px",left:c+"px"};a.className=a.className+" waves-notransition",a.setAttribute("style",i(h)),a.className=a.className.replace("waves-notransition",""),h["-webkit-transform"]=d,h["-moz-transform"]=d,h["-ms-transform"]=d,h["-o-transform"]=d,h.transform=d,h.opacity="1",h["-webkit-transition-duration"]=s.duration+"ms",h["-moz-transition-duration"]=s.duration+"ms",h["-o-transition-duration"]=s.duration+"ms",h["transition-duration"]=s.duration+"ms",h["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",h["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",h["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",h["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",a.setAttribute("style",i(h))},hide:function(t){l.touchup(t);var e=this,n=(e.clientWidth,null),o=e.getElementsByClassName("waves-ripple");if(!(o.length>0))return!1;var a=(n=o[o.length-1]).getAttribute("data-x"),r=n.getAttribute("data-y"),c=n.getAttribute("data-scale"),d=350-(Date.now()-Number(n.getAttribute("data-hold")));0>d&&(d=0),setTimeout((function(){var t={top:r+"px",left:a+"px",opacity:"0","-webkit-transition-duration":s.duration+"ms","-moz-transition-duration":s.duration+"ms","-o-transition-duration":s.duration+"ms","transition-duration":s.duration+"ms","-webkit-transform":c,"-moz-transform":c,"-ms-transform":c,"-o-transform":c,transform:c};n.setAttribute("style",i(t)),setTimeout((function(){try{e.removeChild(n)}catch(t){return!1}}),s.duration)}),d)},wrapInput:function(t){for(var e=0;e<t.length;e++){var n=t[e];if("input"===n.tagName.toLowerCase()){var i=n.parentNode;if("i"===i.tagName.toLowerCase()&&-1!==i.className.indexOf("waves-effect"))continue;var o=document.createElement("i");o.className=n.className+" waves-input-wrapper";var a=n.getAttribute("style");a||(a=""),o.setAttribute("style",a),n.className="waves-button-input",n.removeAttribute("style"),i.replaceChild(o,n),o.appendChild(n)}}}},l={touches:0,allowEvent:function(t){var e=!0;return"touchstart"===t.type?l.touches+=1:"touchend"===t.type||"touchcancel"===t.type?setTimeout((function(){l.touches>0&&(l.touches-=1)}),500):"mousedown"===t.type&&l.touches>0&&(e=!1),e},touchup:function(t){l.allowEvent(t)}};a.displayEffect=function(e){"duration"in(e=e||{})&&(s.duration=e.duration),s.wrapInput(r(".waves-effect")),"ontouchstart"in t&&document.body.addEventListener("touchstart",o,!1),document.body.addEventListener("mousedown",o,!1)},a.attach=function(e){"input"===e.tagName.toLowerCase()&&(s.wrapInput([e]),e=e.parentElement),"ontouchstart"in t&&e.addEventListener("touchstart",o,!1),e.addEventListener("mousedown",o,!1)},t.Waves=a,document.addEventListener("DOMContentLoaded",(function(){a.displayEffect()}),!1)}(window),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(jQuery)}((function(t,e){function n(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var t=new Date;return n(t.getFullYear(),t.getMonth(),t.getDate())}function o(t,e){return t.getUTCFullYear()===e.getUTCFullYear()&&t.getUTCMonth()===e.getUTCMonth()&&t.getUTCDate()===e.getUTCDate()}function a(n,i){return function(){return i!==e&&t.fn.datepicker.deprecated(i),this[n].apply(this,arguments)}}var r,s=(r={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),n=0,i=this.length;n<i;n++)if(0<=this[n].valueOf()-e&&this[n].valueOf()-e<864e5)return n;return-1},remove:function(t){this.splice(t,1)},replace:function(e){e&&(t.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e))},clear:function(){this.length=0},copy:function(){var t=new s;return t.replace(this),t}},function(){var e=[];return e.push.apply(e,arguments),t.extend(e,r),e}),l=function(e,n){t.data(e,"datepicker",this),this._events=[],this._secondaryEvents=[],this._process_options(n),this.dates=new s,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=t(e),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .input-group-append, .input-group-prepend, .btn"),this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is("div"),this.picker=t(v.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",(function(t,e){return Number(e)+1})),this._process_options({startDate:this._o.startDate,endDate:this._o.endDate,daysOfWeekDisabled:this.o.daysOfWeekDisabled,daysOfWeekHighlighted:this.o.daysOfWeekHighlighted,datesDisabled:this.o.datesDisabled}),this._allow_update=!1,this.setViewMode(this.o.startView),this._allow_update=!0,this.fillDow(),this.fillMonths(),this.update(),this.isInline&&this.show()};l.prototype={constructor:l,_resolveViewName:function(e){return t.each(v.viewModes,(function(n,i){if(e===n||-1!==t.inArray(e,i.names))return e=n,!1})),e},_resolveDaysOfWeek:function(e){return t.isArray(e)||(e=e.split(/[,\s]*/)),t.map(e,Number)},_check_template:function(n){try{return n!==e&&""!==n&&((n.match(/[<>]/g)||[]).length<=0||t(n).length>0)}catch(t){return!1}},_process_options:function(e){this._o=t.extend({},this._o,e);var o=this.o=t.extend({},this._o),a=o.language;g[a]||(a=a.split("-")[0],g[a]||(a=f.language)),o.language=a,o.startView=this._resolveViewName(o.startView),o.minViewMode=this._resolveViewName(o.minViewMode),o.maxViewMode=this._resolveViewName(o.maxViewMode),o.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,o.startView)),!0!==o.multidate&&(o.multidate=Number(o.multidate)||!1,!1!==o.multidate&&(o.multidate=Math.max(0,o.multidate))),o.multidateSeparator=String(o.multidateSeparator),o.weekStart%=7,o.weekEnd=(o.weekStart+6)%7;var r=v.parseFormat(o.format);o.startDate!==-1/0&&(o.startDate?o.startDate instanceof Date?o.startDate=this._local_to_utc(this._zero_time(o.startDate)):o.startDate=v.parseDate(o.startDate,r,o.language,o.assumeNearbyYear):o.startDate=-1/0),o.endDate!==1/0&&(o.endDate?o.endDate instanceof Date?o.endDate=this._local_to_utc(this._zero_time(o.endDate)):o.endDate=v.parseDate(o.endDate,r,o.language,o.assumeNearbyYear):o.endDate=1/0),o.daysOfWeekDisabled=this._resolveDaysOfWeek(o.daysOfWeekDisabled||[]),o.daysOfWeekHighlighted=this._resolveDaysOfWeek(o.daysOfWeekHighlighted||[]),o.datesDisabled=o.datesDisabled||[],t.isArray(o.datesDisabled)||(o.datesDisabled=o.datesDisabled.split(",")),o.datesDisabled=t.map(o.datesDisabled,(function(t){return v.parseDate(t,r,o.language,o.assumeNearbyYear)}));var s=String(o.orientation).toLowerCase().split(/\s+/g),l=o.orientation.toLowerCase();if(s=t.grep(s,(function(t){return/^auto|left|right|top|bottom$/.test(t)})),o.orientation={x:"auto",y:"auto"},l&&"auto"!==l)if(1===s.length)switch(s[0]){case"top":case"bottom":o.orientation.y=s[0];break;case"left":case"right":o.orientation.x=s[0]}else l=t.grep(s,(function(t){return/^left|right$/.test(t)})),o.orientation.x=l[0]||"auto",l=t.grep(s,(function(t){return/^top|bottom$/.test(t)})),o.orientation.y=l[0]||"auto";else;if(o.defaultViewDate instanceof Date||"string"==typeof o.defaultViewDate)o.defaultViewDate=v.parseDate(o.defaultViewDate,r,o.language,o.assumeNearbyYear);else if(o.defaultViewDate){var c=o.defaultViewDate.year||(new Date).getFullYear(),d=o.defaultViewDate.month||0,h=o.defaultViewDate.day||1;o.defaultViewDate=n(c,d,h)}else o.defaultViewDate=i()},_applyEvents:function(t){for(var n,i,o,a=0;a<t.length;a++)n=t[a][0],2===t[a].length?(i=e,o=t[a][1]):3===t[a].length&&(i=t[a][1],o=t[a][2]),n.on(o,i)},_unapplyEvents:function(t){for(var n,i,o,a=0;a<t.length;a++)n=t[a][0],2===t[a].length?(o=e,i=t[a][1]):3===t[a].length&&(o=t[a][1],i=t[a][2]),n.off(i,o)},_buildEvents:function(){var e={keyup:t.proxy((function(e){-1===t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])&&this.update()}),this),keydown:t.proxy(this.keydown,this),paste:t.proxy(this.paste,this)};!0===this.o.showOnFocus&&(e.focus=t.proxy(this.show,this)),this.isInput?this._events=[[this.element,e]]:this.component&&this.inputField.length?this._events=[[this.inputField,e],[this.component,{click:t.proxy(this.show,this)}]]:this._events=[[this.element,{click:t.proxy(this.show,this),keydown:t.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:t.proxy((function(t){this._focused_from=t.target}),this)}],[this.element,{blur:t.proxy((function(t){this._focused_from=t.target}),this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":t.proxy((function(t){this.update(t.date)}),this)}]),this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[this.picker,".prev, .next",{click:t.proxy(this.navArrowsClick,this)}],[this.picker,".day:not(.disabled)",{click:t.proxy(this.dayCellClick,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{"mousedown touchstart":t.proxy((function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.isInline||this.hide()}),this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,n){var i=n||this.dates.get(-1),o=this._utc_to_local(i);this.element.trigger({type:e,date:o,viewMode:this.viewMode,dates:t.map(this.dates,this._utc_to_local),format:t.proxy((function(t,e){0===arguments.length?(t=this.dates.length-1,e=this.o.format):"string"==typeof t&&(e=t,t=this.dates.length-1),e=e||this.o.format;var n=this.dates.get(t);return v.formatDate(n,e,this.o.language)}),this)})},show:function(){if(!(this.inputField.is(":disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&t(this.element).blur(),this},hide:function(){return this.isInline||!this.picker.is(":visible")||(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.setViewMode(this.o.startView),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide")),this},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(e){var n;if(e.originalEvent.clipboardData&&e.originalEvent.clipboardData.types&&-1!==t.inArray("text/plain",e.originalEvent.clipboardData.types))n=e.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;n=window.clipboardData.getData("Text")}this.setDate(n),this.update(),e.preventDefault()},_utc_to_local:function(t){if(!t)return t;var e=new Date(t.getTime()+6e4*t.getTimezoneOffset());return e.getTimezoneOffset()!==t.getTimezoneOffset()&&(e=new Date(t.getTime()+6e4*e.getTimezoneOffset())),e},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&n(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())},getDates:function(){return t.map(this.dates,this._utc_to_local)},getUTCDates:function(){return t.map(this.dates,(function(t){return new Date(t)}))},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var t=this.dates.get(-1);return t!==e?new Date(t):null},clearDates:function(){this.inputField.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,e),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;return this.setDates.apply(this,t.map(e,this._utc_to_local)),this},setDate:a("setDates"),setUTCDate:a("setUTCDates"),remove:a("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead"),setValue:function(){var t=this.getFormattedDate();return this.inputField.val(t),this},getFormattedDate:function(n){n===e&&(n=this.o.format);var i=this.o.language;return t.map(this.dates,(function(t){return v.formatDate(t,n,i)})).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(t){return this._process_options({startDate:t}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(t){return this._process_options({endDate:t}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(t){return this._process_options({daysOfWeekDisabled:t}),this.update(),this},setDaysOfWeekHighlighted:function(t){return this._process_options({daysOfWeekHighlighted:t}),this.update(),this},setDatesDisabled:function(t){return this._process_options({datesDisabled:t}),this.update(),this},place:function(){if(this.isInline)return this;var e=this.picker.outerWidth(),n=this.picker.outerHeight(),i=t(this.o.container),o=i.width(),a="body"===this.o.container?t(document).scrollTop():i.scrollTop(),r=i.offset(),s=[0];this.element.parents().each((function(){var e=t(this).css("z-index");"auto"!==e&&0!==Number(e)&&s.push(Number(e))}));var l=Math.max.apply(Math,s)+this.o.zIndexOffset,c=this.component?this.component.parent().offset():this.element.offset(),d=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),h=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),u=c.left-r.left,p=c.top-r.top;"body"!==this.o.container&&(p+=a),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(u-=e-h)):c.left<0?(this.picker.addClass("datepicker-orient-left"),u-=c.left-10):u+e>o?(this.picker.addClass("datepicker-orient-right"),u+=h-e):this.o.rtl?this.picker.addClass("datepicker-orient-right"):this.picker.addClass("datepicker-orient-left");var f=this.o.orientation.y;if("auto"===f&&(f=-a+p-n<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+f),"top"===f?p-=n+parseInt(this.picker.css("padding-top")):p+=d,this.o.rtl){var m=o-(u+h);this.picker.css({top:p,right:m,zIndex:l})}else this.picker.css({top:p,left:u,zIndex:l});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var e=this.dates.copy(),n=[],i=!1;return arguments.length?(t.each(arguments,t.proxy((function(t,e){e instanceof Date&&(e=this._local_to_utc(e)),n.push(e)}),this)),i=!0):(n=(n=this.isInput?this.element.val():this.element.data("date")||this.inputField.val())&&this.o.multidate?n.split(this.o.multidateSeparator):[n],delete this.element.data().date),n=t.map(n,t.proxy((function(t){return v.parseDate(t,this.o.format,this.o.language,this.o.assumeNearbyYear)}),this)),n=t.grep(n,t.proxy((function(t){return!this.dateWithinRange(t)||!t}),this),!0),this.dates.replace(n),this.o.updateViewDate&&(this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate),i?(this.setValue(),this.element.change()):this.dates.length&&String(e)!==String(this.dates)&&i&&(this._trigger("changeDate"),this.element.change()),!this.dates.length&&e.length&&(this._trigger("clearDate"),this.element.change()),this.fill(),this},fillDow:function(){if(this.o.showWeekDays){var e=this.o.weekStart,n="<tr>";for(this.o.calendarWeeks&&(n+='<th class="cw">&#160;</th>');e<this.o.weekStart+7;)n+='<th class="dow',-1!==t.inArray(e,this.o.daysOfWeekDisabled)&&(n+=" disabled"),n+='">'+g[this.o.language].daysMin[e++%7]+"</th>";n+="</tr>",this.picker.find(".datepicker-days thead").append(n)}},fillMonths:function(){for(var t=this._utc_to_local(this.viewDate),e="",n=0;n<12;n++)e+='<span class="month'+(t&&t.getMonth()===n?" focused":"")+'">'+g[this.o.language].monthsShort[n]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(e){e&&e.length?this.range=t.map(e,(function(t){return t.valueOf()})):delete this.range,this.fill()},getClassNames:function(e){var n=[],a=this.viewDate.getUTCFullYear(),r=this.viewDate.getUTCMonth(),s=i();return e.getUTCFullYear()<a||e.getUTCFullYear()===a&&e.getUTCMonth()<r?n.push("old"):(e.getUTCFullYear()>a||e.getUTCFullYear()===a&&e.getUTCMonth()>r)&&n.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&o(e,s)&&n.push("today"),-1!==this.dates.contains(e)&&n.push("active"),this.dateWithinRange(e)||n.push("disabled"),this.dateIsDisabled(e)&&n.push("disabled","disabled-date"),-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekHighlighted)&&n.push("highlighted"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&n.push("range"),-1!==t.inArray(e.valueOf(),this.range)&&n.push("selected"),e.valueOf()===this.range[0]&&n.push("range-start"),e.valueOf()===this.range[this.range.length-1]&&n.push("range-end")),n},_fill_yearsView:function(n,i,o,a,r,s,l){for(var c,d,h,u="",p=o/10,f=this.picker.find(n),m=Math.floor(a/o)*o,g=m+9*p,v=Math.floor(this.viewDate.getFullYear()/p)*p,b=t.map(this.dates,(function(t){return Math.floor(t.getUTCFullYear()/p)*p})),y=m-p;y<=g+p;y+=p)c=[i],d=null,y===m-p?c.push("old"):y===g+p&&c.push("new"),-1!==t.inArray(y,b)&&c.push("active"),(y<r||y>s)&&c.push("disabled"),y===v&&c.push("focused"),l!==t.noop&&((h=l(new Date(y,0,1)))===e?h={}:"boolean"==typeof h?h={enabled:h}:"string"==typeof h&&(h={classes:h}),!1===h.enabled&&c.push("disabled"),h.classes&&(c=c.concat(h.classes.split(/\s+/))),h.tooltip&&(d=h.tooltip)),u+='<span class="'+c.join(" ")+'"'+(d?' title="'+d+'"':"")+">"+y+"</span>";f.find(".datepicker-switch").text(m+"-"+g),f.find("td").html(u)},fill:function(){var o,a,r=new Date(this.viewDate),s=r.getUTCFullYear(),l=r.getUTCMonth(),c=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,d=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,h=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,u=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,p=g[this.o.language].today||g.en.today||"",f=g[this.o.language].clear||g.en.clear||"",m=g[this.o.language].titleFormat||g.en.titleFormat,b=i(),y=(!0===this.o.todayBtn||"linked"===this.o.todayBtn)&&b>=this.o.startDate&&b<=this.o.endDate&&!this.weekOfDateIsDisabled(b);if(!isNaN(s)&&!isNaN(l)){this.picker.find(".datepicker-days .datepicker-switch").text(v.formatDate(r,m,this.o.language)),this.picker.find("tfoot .today").text(p).css("display",y?"table-cell":"none"),this.picker.find("tfoot .clear").text(f).css("display",!0===this.o.clearBtn?"table-cell":"none"),this.picker.find("thead .datepicker-title").text(this.o.title).css("display","string"==typeof this.o.title&&""!==this.o.title?"table-cell":"none"),this.updateNavArrows(),this.fillMonths();var w=n(s,l,0),D=w.getUTCDate();w.setUTCDate(D-(w.getUTCDay()-this.o.weekStart+7)%7);var C=new Date(w);w.getUTCFullYear()<100&&C.setUTCFullYear(w.getUTCFullYear()),C.setUTCDate(C.getUTCDate()+42),C=C.valueOf();for(var x,k,S=[];w.valueOf()<C;){if((x=w.getUTCDay())===this.o.weekStart&&(S.push("<tr>"),this.o.calendarWeeks)){var _=new Date(+w+(this.o.weekStart-x-7)%7*864e5),T=new Date(Number(_)+(11-_.getUTCDay())%7*864e5),A=new Date(Number(A=n(T.getUTCFullYear(),0,1))+(11-A.getUTCDay())%7*864e5),I=(T-A)/864e5/7+1;S.push('<td class="cw">'+I+"</td>")}(k=this.getClassNames(w)).push("day");var $=w.getUTCDate();this.o.beforeShowDay!==t.noop&&((a=this.o.beforeShowDay(this._utc_to_local(w)))===e?a={}:"boolean"==typeof a?a={enabled:a}:"string"==typeof a&&(a={classes:a}),!1===a.enabled&&k.push("disabled"),a.classes&&(k=k.concat(a.classes.split(/\s+/))),a.tooltip&&(o=a.tooltip),a.content&&($=a.content)),k=t.isFunction(t.uniqueSort)?t.uniqueSort(k):t.unique(k),S.push('<td class="'+k.join(" ")+'"'+(o?' title="'+o+'"':"")+' data-date="'+w.getTime().toString()+'">'+$+"</td>"),o=null,x===this.o.weekEnd&&S.push("</tr>"),w.setUTCDate(w.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(S.join(""));var E=g[this.o.language].monthsTitle||g.en.monthsTitle||"Months",P=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?E:s).end().find("tbody span").removeClass("active");if(t.each(this.dates,(function(t,e){e.getUTCFullYear()===s&&P.eq(e.getUTCMonth()).addClass("active")})),(s<c||s>h)&&P.addClass("disabled"),s===c&&P.slice(0,d).addClass("disabled"),s===h&&P.slice(u+1).addClass("disabled"),this.o.beforeShowMonth!==t.noop){var L=this;t.each(P,(function(n,i){var o=new Date(s,n,1),a=L.o.beforeShowMonth(o);a===e?a={}:"boolean"==typeof a?a={enabled:a}:"string"==typeof a&&(a={classes:a}),!1!==a.enabled||t(i).hasClass("disabled")||t(i).addClass("disabled"),a.classes&&t(i).addClass(a.classes),a.tooltip&&t(i).prop("title",a.tooltip)}))}this._fill_yearsView(".datepicker-years","year",10,s,c,h,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,s,c,h,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,s,c,h,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var t,e,n=new Date(this.viewDate),i=n.getUTCFullYear(),o=n.getUTCMonth(),a=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,r=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,s=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,l=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,c=1;switch(this.viewMode){case 4:c*=10;case 3:c*=10;case 2:c*=10;case 1:t=Math.floor(i/c)*c<=a,e=Math.floor(i/c)*c+c>s;break;case 0:t=i<=a&&o<=r,e=i>=s&&o>=l}this.picker.find(".prev").toggleClass("disabled",t),this.picker.find(".next").toggleClass("disabled",e)}},click:function(e){var o,a,r;e.preventDefault(),e.stopPropagation(),(o=t(e.target)).hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1),o.hasClass("today")&&!o.hasClass("day")&&(this.setViewMode(0),this._setDate(i(),"linked"===this.o.todayBtn?null:"view")),o.hasClass("clear")&&this.clearDates(),o.hasClass("disabled")||(o.hasClass("month")||o.hasClass("year")||o.hasClass("decade")||o.hasClass("century"))&&(this.viewDate.setUTCDate(1),1,1===this.viewMode?(r=o.parent().find("span").index(o),a=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(r)):(r=0,a=Number(o.text()),this.viewDate.setUTCFullYear(a)),this._trigger(v.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate(n(a,r,1)):(this.setViewMode(this.viewMode-1),this.fill())),this.picker.is(":visible")&&this._focused_from&&this._focused_from.focus(),delete this._focused_from},dayCellClick:function(e){var n=t(e.currentTarget).data("date"),i=new Date(n);this.o.updateViewDate&&(i.getUTCFullYear()!==this.viewDate.getUTCFullYear()&&this._trigger("changeYear",this.viewDate),i.getUTCMonth()!==this.viewDate.getUTCMonth()&&this._trigger("changeMonth",this.viewDate)),this._setDate(i)},navArrowsClick:function(e){var n=t(e.currentTarget).hasClass("prev")?-1:1;0!==this.viewMode&&(n*=12*v.viewModes[this.viewMode].navStep),this.viewDate=this.moveMonth(this.viewDate,n),this._trigger(v.viewModes[this.viewMode].e,this.viewDate),this.fill()},_toggle_multidate:function(t){var e=this.dates.contains(t);if(t||this.dates.clear(),-1!==e?(!0===this.o.multidate||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(e):!1===this.o.multidate?(this.dates.clear(),this.dates.push(t)):this.dates.push(t),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){e&&"date"!==e||this._toggle_multidate(t&&new Date(t)),(!e&&this.o.updateViewDate||"view"===e)&&(this.viewDate=t&&new Date(t)),this.fill(),this.setValue(),e&&"view"===e||this._trigger("changeDate"),this.inputField.trigger("change"),!this.o.autoclose||e&&"date"!==e||this.hide()},moveDay:function(t,e){var n=new Date(t);return n.setUTCDate(t.getUTCDate()+e),n},moveWeek:function(t,e){return this.moveDay(t,7*e)},moveMonth:function(t,e){if(!(n=t)||isNaN(n.getTime()))return this.o.defaultViewDate;var n;if(!e)return t;var i,o,a=new Date(t.valueOf()),r=a.getUTCDate(),s=a.getUTCMonth(),l=Math.abs(e);if(e=e>0?1:-1,1===l)o=-1===e?function(){return a.getUTCMonth()===s}:function(){return a.getUTCMonth()!==i},i=s+e,a.setUTCMonth(i),i=(i+12)%12;else{for(var c=0;c<l;c++)a=this.moveMonth(a,e);i=a.getUTCMonth(),a.setUTCDate(r),o=function(){return i!==a.getUTCMonth()}}for(;o();)a.setUTCDate(--r),a.setUTCMonth(i);return a},moveYear:function(t,e){return this.moveMonth(t,12*e)},moveAvailableDate:function(t,e,n){do{if(t=this[n](t,e),!this.dateWithinRange(t))return!1;n="moveDay"}while(this.dateIsDisabled(t));return t},weekOfDateIsDisabled:function(e){return-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(e){return this.weekOfDateIsDisabled(e)||t.grep(this.o.datesDisabled,(function(t){return o(e,t)})).length>0},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":visible")){var e,n,i=!1,o=this.focusDate||this.viewDate;switch(t.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),t.preventDefault(),t.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;e=37===t.keyCode||38===t.keyCode?-1:1,0===this.viewMode?t.ctrlKey?(n=this.moveAvailableDate(o,e,"moveYear"))&&this._trigger("changeYear",this.viewDate):t.shiftKey?(n=this.moveAvailableDate(o,e,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===t.keyCode||39===t.keyCode?n=this.moveAvailableDate(o,e,"moveDay"):this.weekOfDateIsDisabled(o)||(n=this.moveAvailableDate(o,e,"moveWeek")):1===this.viewMode?(38!==t.keyCode&&40!==t.keyCode||(e*=4),n=this.moveAvailableDate(o,e,"moveMonth")):2===this.viewMode&&(38!==t.keyCode&&40!==t.keyCode||(e*=4),n=this.moveAvailableDate(o,e,"moveYear")),n&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),t.preventDefault());break;case 13:if(!this.o.forceParse)break;o=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(o),i=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(t.preventDefault(),t.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}i&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField.trigger("change"))}else 40!==t.keyCode&&27!==t.keyCode||(this.show(),t.stopPropagation())},setViewMode:function(t){this.viewMode=t,this.picker.children("div").hide().filter(".datepicker-"+v.viewModes[this.viewMode].clsName).show(),this.updateNavArrows(),this._trigger("changeViewMode",new Date(this.viewDate))}};var c=function(e,n){t.data(e,"datepicker",this),this.element=t(e),this.inputs=t.map(n.inputs,(function(t){return t.jquery?t[0]:t})),delete n.inputs,this.keepEmptyValues=n.keepEmptyValues,delete n.keepEmptyValues,p.call(t(this.inputs),n).on("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,(function(e){return t.data(e,"datepicker")})),this.updateDates()};function d(e,n){var i=t(e).data(),o={},a=new RegExp("^"+n.toLowerCase()+"([A-Z])");function r(t,e){return e.toLowerCase()}for(var s in n=new RegExp("^"+n.toLowerCase()),i)n.test(s)&&(o[s.replace(a,r)]=i[s]);return o}function h(e){var n={};if(g[e]||(e=e.split("-")[0],g[e])){var i=g[e];return t.each(m,(function(t,e){e in i&&(n[e]=i[e])})),n}}c.prototype={updateDates:function(){this.dates=t.map(this.pickers,(function(t){return t.getUTCDate()})),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,(function(t){return t.valueOf()}));t.each(this.pickers,(function(t,n){n.setRange(e)}))},clearDates:function(){t.each(this.pickers,(function(t,e){e.clearDates()}))},dateUpdated:function(n){if(!this.updating){this.updating=!0;var i=t.data(n.target,"datepicker");if(i!==e){var o=i.getUTCDate(),a=this.keepEmptyValues,r=t.inArray(n.target,this.inputs),s=r-1,l=r+1,c=this.inputs.length;if(-1!==r){if(t.each(this.pickers,(function(t,e){e.getUTCDate()||e!==i&&a||e.setUTCDate(o)})),o<this.dates[s])for(;s>=0&&o<this.dates[s];)this.pickers[s--].setUTCDate(o);else if(o>this.dates[l])for(;l<c&&o>this.dates[l];)this.pickers[l++].setUTCDate(o);this.updateDates(),delete this.updating}}}},destroy:function(){t.map(this.pickers,(function(t){t.destroy()})),t(this.inputs).off("changeDate",this.dateUpdated),delete this.element.data().datepicker},remove:a("destroy","Method `remove` is deprecated and will be removed in version 2.0. Use `destroy` instead")};var u=t.fn.datepicker,p=function(n){var i,o=Array.apply(null,arguments);if(o.shift(),this.each((function(){var e=t(this),a=e.data("datepicker"),r="object"==typeof n&&n;if(!a){var s=d(this,"date"),u=h(t.extend({},f,s,r).language),p=t.extend({},f,u,s,r);e.hasClass("input-daterange")||p.inputs?(t.extend(p,{inputs:p.inputs||e.find("input").toArray()}),a=new c(this,p)):a=new l(this,p),e.data("datepicker",a)}"string"==typeof n&&"function"==typeof a[n]&&(i=a[n].apply(a,o))})),i===e||i instanceof l||i instanceof c)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+n+" function)");return i};t.fn.datepicker=p;var f=t.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:t.noop,beforeShowMonth:t.noop,beforeShowYear:t.noop,beforeShowDecade:t.noop,beforeShowCentury:t.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,updateViewDate:!0,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&#x00AB;",rightArrow:"&#x00BB;"},showWeekDays:!0},m=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=l;var g=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},v={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1e3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(t){if("function"==typeof t.toValue&&"function"==typeof t.toDisplay)return t;var e=t.replace(this.validParts,"\0").split("\0"),n=t.match(this.validParts);if(!e||!e.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:e,parts:n}},parseDate:function(n,o,a,r){if(!n)return e;if(n instanceof Date)return n;if("string"==typeof o&&(o=v.parseFormat(o)),o.toValue)return o.toValue(n,o,a);var s,c,d,h,u,p={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},f={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(n in f&&(n=f[n]),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(n)){for(s=n.match(/([\-+]\d+)([dmwy])/gi),n=new Date,h=0;h<s.length;h++)c=s[h].match(/([\-+]\d+)([dmwy])/i),d=Number(c[1]),u=p[c[2].toLowerCase()],n=l.prototype[u](n,d);return l.prototype._zero_utc_time(n)}s=n&&n.match(this.nonpunctuation)||[];var m,b,y={},w=["yyyy","yy","M","MM","m","mm","d","dd"],D={yyyy:function(t,e){return t.setUTCFullYear(r?(!0===(i=r)&&(i=10),(n=e)<100&&(n+=2e3)>(new Date).getFullYear()+i&&(n-=100),n):e);var n,i},m:function(t,e){if(isNaN(t))return t;for(e-=1;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};D.yy=D.yyyy,D.M=D.MM=D.mm=D.m,D.dd=D.d,n=i();var C=o.parts.slice();function x(){var t=this.slice(0,s[h].length),e=s[h].slice(0,t.length);return t.toLowerCase()===e.toLowerCase()}if(s.length!==C.length&&(C=t(C).filter((function(e,n){return-1!==t.inArray(n,w)})).toArray()),s.length===C.length){var k,S,_;for(h=0,k=C.length;h<k;h++){if(m=parseInt(s[h],10),c=C[h],isNaN(m))switch(c){case"MM":b=t(g[a].months).filter(x),m=t.inArray(b[0],g[a].months)+1;break;case"M":b=t(g[a].monthsShort).filter(x),m=t.inArray(b[0],g[a].monthsShort)+1}y[c]=m}for(h=0;h<w.length;h++)(_=w[h])in y&&!isNaN(y[_])&&(S=new Date(n),D[_](S,y[_]),isNaN(S)||(n=S))}return n},formatDate:function(e,n,i){if(!e)return"";if("string"==typeof n&&(n=v.parseFormat(n)),n.toDisplay)return n.toDisplay(e,n,i);var o={d:e.getUTCDate(),D:g[i].daysShort[e.getUTCDay()],DD:g[i].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:g[i].monthsShort[e.getUTCMonth()],MM:g[i].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};o.dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m,e=[];for(var a=t.extend([],n.separators),r=0,s=n.parts.length;r<=s;r++)a.length&&e.push(a.shift()),e.push(o[n.parts[r]]);return e.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">'+f.templates.leftArrow+'</th><th colspan="5" class="datepicker-switch"></th><th class="next">'+f.templates.rightArrow+"</th></tr></thead>",contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};v.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+v.headTemplate+"<tbody></tbody>"+v.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=v,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=u,this},t.fn.datepicker.version="1.9.0",t.fn.datepicker.deprecated=function(t){var e=window.console;e&&e.warn&&e.warn("DEPRECATED: "+t)},t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',(function(e){var n=t(this);n.data("datepicker")||(e.preventDefault(),p.call(n,"show"))})),t((function(){p.call(t('[data-provide="datepicker-inline"]'))}))})),function(t){"function"==typeof define&&define.amd?define(["jquery"],(function(e){return t(e,window,document)})):"object"==typeof exports?module.exports=function(e,n){return e||(e=window),n||(n="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(n,e,e.document)}:t(jQuery,window,document)}((function(t,e,n,i){function o(e){var n,i,a={};t.each(e,(function(t){(n=t.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(n[1]+" ")&&(i=t.replace(n[0],n[2].toLowerCase()),a[i]=t,"o"===n[1]&&o(e[t]))})),e._hungarianMap=a}function a(e,n,r){var s;e._hungarianMap||o(e),t.each(n,(function(o){(s=e._hungarianMap[o])===i||!r&&n[s]!==i||("o"===s.charAt(0)?(n[s]||(n[s]={}),t.extend(!0,n[s],n[o]),a(e[s],n[s],r)):n[s]=n[o])}))}function r(t){var e=qt.defaults.oLanguage,n=e.sDecimal;if(n&&Bt(n),t){var i=t.sZeroRecords;!t.sEmptyTable&&i&&"No data available in table"===e.sEmptyTable&&Et(t,t,"sZeroRecords","sEmptyTable"),!t.sLoadingRecords&&i&&"Loading..."===e.sLoadingRecords&&Et(t,t,"sZeroRecords","sLoadingRecords"),t.sInfoThousands&&(t.sThousands=t.sInfoThousands),(t=t.sDecimal)&&n!==t&&Bt(t)}}function s(t){if(ce(t,"ordering","bSort"),ce(t,"orderMulti","bSortMulti"),ce(t,"orderClasses","bSortClasses"),ce(t,"orderCellsTop","bSortCellsTop"),ce(t,"order","aaSorting"),ce(t,"orderFixed","aaSortingFixed"),ce(t,"paging","bPaginate"),ce(t,"pagingType","sPaginationType"),ce(t,"pageLength","iDisplayLength"),ce(t,"searching","bFilter"),"boolean"==typeof t.sScrollX&&(t.sScrollX=t.sScrollX?"100%":""),"boolean"==typeof t.scrollX&&(t.scrollX=t.scrollX?"100%":""),t=t.aoSearchCols)for(var e=0,n=t.length;e<n;e++)t[e]&&a(qt.models.oSearch,t[e])}function l(e){ce(e,"orderable","bSortable"),ce(e,"orderData","aDataSort"),ce(e,"orderSequence","asSorting"),ce(e,"orderDataType","sortDataType");var n=e.aDataSort;"number"==typeof n&&!t.isArray(n)&&(e.aDataSort=[n])}function c(n){if(!qt.__browser){var i={};qt.__browser=i;var o=t("<div/>").css({position:"fixed",top:0,left:-1*t(e).scrollLeft(),height:1,width:1,overflow:"hidden"}).append(t("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(t("<div/>").css({width:"100%",height:10}))).appendTo("body"),a=o.children(),r=a.children();i.barWidth=a[0].offsetWidth-a[0].clientWidth,i.bScrollOversize=100===r[0].offsetWidth&&100!==a[0].clientWidth,i.bScrollbarLeft=1!==Math.round(r.offset().left),i.bBounding=!!o[0].getBoundingClientRect().width,o.remove()}t.extend(n.oBrowser,qt.__browser),n.oScroll.iBarWidth=qt.__browser.barWidth}function d(t,e,n,o,a,r){var s,l=!1;for(n!==i&&(s=n,l=!0);o!==a;)t.hasOwnProperty(o)&&(s=l?e(s,t[o],o,t):t[o],l=!0,o+=r);return s}function h(e,i){var o=qt.defaults.column,a=e.aoColumns.length;o=t.extend({},qt.models.oColumn,o,{nTh:i||n.createElement("th"),sTitle:o.sTitle?o.sTitle:i?i.innerHTML:"",aDataSort:o.aDataSort?o.aDataSort:[a],mData:o.mData?o.mData:a,idx:a});e.aoColumns.push(o),(o=e.aoPreSearchCols)[a]=t.extend({},qt.models.oSearch,o[a]),u(e,a,t(i).data())}function u(e,n,o){n=e.aoColumns[n];var r=e.oClasses,s=t(n.nTh);if(!n.sWidthOrig){n.sWidthOrig=s.attr("width")||null;var c=(s.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);c&&(n.sWidthOrig=c[1])}o!==i&&null!==o&&(l(o),a(qt.defaults.column,o),o.mDataProp!==i&&!o.mData&&(o.mData=o.mDataProp),o.sType&&(n._sManualType=o.sType),o.className&&!o.sClass&&(o.sClass=o.className),o.sClass&&s.addClass(o.sClass),t.extend(n,o),Et(n,o,"sWidth","sWidthOrig"),o.iDataSort!==i&&(n.aDataSort=[o.iDataSort]),Et(n,o,"aDataSort"));var d=n.mData,h=S(d),u=n.mRender?S(n.mRender):null;o=function(t){return"string"==typeof t&&-1!==t.indexOf("@")};n._bAttrSrc=t.isPlainObject(d)&&(o(d.sort)||o(d.type)||o(d.filter)),n._setter=null,n.fnGetData=function(t,e,n){var o=h(t,e,i,n);return u&&e?u(o,e,t,n):o},n.fnSetData=function(t,e,n){return _(d)(t,e,n)},"number"!=typeof d&&(e._rowReadObject=!0),e.oFeatures.bSort||(n.bSortable=!1,s.addClass(r.sSortableNone)),e=-1!==t.inArray("asc",n.asSorting),o=-1!==t.inArray("desc",n.asSorting),n.bSortable&&(e||o)?e&&!o?(n.sSortingClass=r.sSortableAsc,n.sSortingClassJUI=r.sSortJUIAscAllowed):!e&&o?(n.sSortingClass=r.sSortableDesc,n.sSortingClassJUI=r.sSortJUIDescAllowed):(n.sSortingClass=r.sSortable,n.sSortingClassJUI=r.sSortJUI):(n.sSortingClass=r.sSortableNone,n.sSortingClassJUI="")}function p(t){if(!1!==t.oFeatures.bAutoWidth){var e=t.aoColumns;mt(t);for(var n=0,i=e.length;n<i;n++)e[n].nTh.style.width=e[n].sWidth}(""!==(e=t.oScroll).sY||""!==e.sX)&&pt(t),Nt(t,null,"column-sizing",[t])}function f(t,e){var n=v(t,"bVisible");return"number"==typeof n[e]?n[e]:null}function m(e,n){var i=v(e,"bVisible");return-1!==(i=t.inArray(n,i))?i:null}function g(e){var n=0;return t.each(e.aoColumns,(function(e,i){i.bVisible&&"none"!==t(i.nTh).css("display")&&n++})),n}function v(e,n){var i=[];return t.map(e.aoColumns,(function(t,e){t[n]&&i.push(e)})),i}function b(t){var e,n,o,a,r,s,l,c,d,h=t.aoColumns,u=t.aoData,p=qt.ext.type.detect;for(e=0,n=h.length;e<n;e++)if(d=[],!(l=h[e]).sType&&l._sManualType)l.sType=l._sManualType;else if(!l.sType){for(o=0,a=p.length;o<a;o++){for(r=0,s=u.length;r<s&&(d[r]===i&&(d[r]=C(t,r,e,"type")),(c=p[o](d[r],t))||o===p.length-1)&&"html"!==c;r++);if(c){l.sType=c;break}}l.sType||(l.sType="string")}}function y(e,n,o,a){var r,s,l,c,d,u,p=e.aoColumns;if(n)for(r=n.length-1;0<=r;r--){var f=(u=n[r]).targets!==i?u.targets:u.aTargets;for(t.isArray(f)||(f=[f]),s=0,l=f.length;s<l;s++)if("number"==typeof f[s]&&0<=f[s]){for(;p.length<=f[s];)h(e);a(f[s],u)}else if("number"==typeof f[s]&&0>f[s])a(p.length+f[s],u);else if("string"==typeof f[s])for(c=0,d=p.length;c<d;c++)("_all"==f[s]||t(p[c].nTh).hasClass(f[s]))&&a(c,u)}if(o)for(r=0,e=o.length;r<e;r++)a(r,o[r])}function w(e,n,o,a){var r=e.aoData.length,s=t.extend(!0,{},qt.models.oRow,{src:o?"dom":"data",idx:r});s._aData=n,e.aoData.push(s);for(var l=e.aoColumns,c=0,d=l.length;c<d;c++)l[c].sType=null;return e.aiDisplayMaster.push(r),(n=e.rowIdFn(n))!==i&&(e.aIds[n]=s),(o||!e.oFeatures.bDeferRender)&&P(e,r,o,a),r}function D(e,n){var i;return n instanceof t||(n=t(n)),n.map((function(t,n){return i=E(e,n),w(e,i.data,n,i.cells)}))}function C(t,e,n,o){var a=t.iDraw,r=t.aoColumns[n],s=t.aoData[e]._aData,l=r.sDefaultContent,c=r.fnGetData(s,o,{settings:t,row:e,col:n});if(c===i)return t.iDrawError!=a&&null===l&&($t(t,0,"Requested unknown parameter "+("function"==typeof r.mData?"{function}":"'"+r.mData+"'")+" for row "+e+", column "+n,4),t.iDrawError=a),l;if(c!==s&&null!==c||null===l||o===i){if("function"==typeof c)return c.call(s)}else c=l;return null===c&&"display"==o?"":c}function x(t,e,n,i){t.aoColumns[n].fnSetData(t.aoData[e]._aData,i,{settings:t,row:e,col:n})}function k(e){return t.map(e.match(/(\\.|[^\.])+/g)||[""],(function(t){return t.replace(/\\\./g,".")}))}function S(e){if(t.isPlainObject(e)){var n={};return t.each(e,(function(t,e){e&&(n[t]=S(e))})),function(t,e,o,a){var r=n[e]||n._;return r!==i?r(t,e,o,a):t}}if(null===e)return function(t){return t};if("function"==typeof e)return function(t,n,i,o){return e(t,n,i,o)};if("string"==typeof e&&(-1!==e.indexOf(".")||-1!==e.indexOf("[")||-1!==e.indexOf("("))){var o=function(e,n,a){var r,s;if(""!==a)for(var l=0,c=(s=k(a)).length;l<c;l++){if(a=s[l].match(de),r=s[l].match(he),a){if(s[l]=s[l].replace(de,""),""!==s[l]&&(e=e[s[l]]),r=[],s.splice(0,l+1),s=s.join("."),t.isArray(e))for(l=0,c=e.length;l<c;l++)r.push(o(e[l],n,s));e=""===(e=a[0].substring(1,a[0].length-1))?r:r.join(e);break}if(r)s[l]=s[l].replace(he,""),e=e[s[l]]();else{if(null===e||e[s[l]]===i)return i;e=e[s[l]]}}return e};return function(t,n){return o(t,n,e)}}return function(t){return t[e]}}function _(e){if(t.isPlainObject(e))return _(e._);if(null===e)return function(){};if("function"==typeof e)return function(t,n,i){e(t,"set",n,i)};if("string"==typeof e&&(-1!==e.indexOf(".")||-1!==e.indexOf("[")||-1!==e.indexOf("("))){var n=function(e,o,a){var r;r=(a=k(a))[a.length-1];for(var s,l,c=0,d=a.length-1;c<d;c++){if(s=a[c].match(de),l=a[c].match(he),s){if(a[c]=a[c].replace(de,""),e[a[c]]=[],(r=a.slice()).splice(0,c+1),s=r.join("."),t.isArray(o))for(l=0,d=o.length;l<d;l++)n(r={},o[l],s),e[a[c]].push(r);else e[a[c]]=o;return}l&&(a[c]=a[c].replace(he,""),e=e[a[c]](o)),null!==e[a[c]]&&e[a[c]]!==i||(e[a[c]]={}),e=e[a[c]]}r.match(he)?e[r.replace(he,"")](o):e[r.replace(de,"")]=o};return function(t,i){return n(t,i,e)}}return function(t,n){t[e]=n}}function T(t){return oe(t.aoData,"_aData")}function A(t){t.aoData.length=0,t.aiDisplayMaster.length=0,t.aiDisplay.length=0,t.aIds={}}function I(t,e,n){for(var o=-1,a=0,r=t.length;a<r;a++)t[a]==e?o=a:t[a]>e&&t[a]--;-1!=o&&n===i&&t.splice(o,1)}function $(t,e,n,o){var a,r=t.aoData[e],s=function(n,i){for(;n.childNodes.length;)n.removeChild(n.firstChild);n.innerHTML=C(t,e,i,"display")};if("dom"!==n&&(n&&"auto"!==n||"dom"!==r.src)){var l=r.anCells;if(l)if(o!==i)s(l[o],o);else for(n=0,a=l.length;n<a;n++)s(l[n],n)}else r._aData=E(t,r,o,o===i?i:r._aData).data;if(r._aSortData=null,r._aFilterData=null,s=t.aoColumns,o!==i)s[o].sType=null;else{for(n=0,a=s.length;n<a;n++)s[n].sType=null;L(t,r)}}function E(e,n,o,a){var r,s,l,c=[],d=n.firstChild,h=0,u=e.aoColumns,p=e._rowReadObject,f=(a=a!==i?a:p?{}:[],function(t,e){if("string"==typeof t){var n=t.indexOf("@");-1!==n&&(n=t.substring(n+1),_(t)(a,e.getAttribute(n)))}}),m=function(e){o!==i&&o!==h||(s=u[h],l=t.trim(e.innerHTML),s&&s._bAttrSrc?(_(s.mData._)(a,l),f(s.mData.sort,e),f(s.mData.type,e),f(s.mData.filter,e)):p?(s._setter||(s._setter=_(s.mData)),s._setter(a,l)):a[h]=l),h++};if(d)for(;d;)"TD"!=(r=d.nodeName.toUpperCase())&&"TH"!=r||(m(d),c.push(d)),d=d.nextSibling;else for(d=0,r=(c=n.anCells).length;d<r;d++)m(c[d]);return(n=n.firstChild?n:n.nTr)&&(n=n.getAttribute("id"))&&_(e.rowId)(a,n),{data:a,cells:c}}function P(e,i,o,a){var r,s,l,c,d,h=e.aoData[i],u=h._aData,p=[];if(null===h.nTr){for(r=o||n.createElement("tr"),h.nTr=r,h.anCells=p,r._DT_RowIndex=i,L(e,h),c=0,d=e.aoColumns.length;c<d;c++)l=e.aoColumns[c],(s=o?a[c]:n.createElement(l.sCellType))._DT_CellIndex={row:i,column:c},p.push(s),o&&!l.mRender&&l.mData===c||t.isPlainObject(l.mData)&&l.mData._===c+".display"||(s.innerHTML=C(e,i,c,"display")),l.sClass&&(s.className+=" "+l.sClass),l.bVisible&&!o?r.appendChild(s):!l.bVisible&&o&&s.parentNode.removeChild(s),l.fnCreatedCell&&l.fnCreatedCell.call(e.oInstance,s,C(e,i,c),u,i,c);Nt(e,"aoRowCreatedCallback",null,[r,u,i,p])}h.nTr.setAttribute("role","row")}function L(e,n){var i=n.nTr,o=n._aData;if(i){var a=e.rowIdFn(o);a&&(i.id=a),o.DT_RowClass&&(a=o.DT_RowClass.split(" "),n.__rowc=n.__rowc?le(n.__rowc.concat(a)):a,t(i).removeClass(n.__rowc.join(" ")).addClass(o.DT_RowClass)),o.DT_RowAttr&&t(i).attr(o.DT_RowAttr),o.DT_RowData&&t(i).data(o.DT_RowData)}}function M(e){var n,i,o,a,r,s=e.nTHead,l=e.nTFoot,c=0===t("th, td",s).length,d=e.oClasses,h=e.aoColumns;for(c&&(a=t("<tr/>").appendTo(s)),n=0,i=h.length;n<i;n++)r=h[n],o=t(r.nTh).addClass(r.sClass),c&&o.appendTo(a),e.oFeatures.bSort&&(o.addClass(r.sSortingClass),!1!==r.bSortable&&(o.attr("tabindex",e.iTabIndex).attr("aria-controls",e.sTableId),kt(e,r.nTh,n))),r.sTitle!=o[0].innerHTML&&o.html(r.sTitle),Ft(e,"header")(e,o,r,d);if(c&&H(e.aoHeader,s),t(s).find(">tr").attr("role","row"),t(s).find(">tr>th, >tr>td").addClass(d.sHeaderTH),t(l).find(">tr>th, >tr>td").addClass(d.sFooterTH),null!==l)for(n=0,i=(e=e.aoFooter[0]).length;n<i;n++)(r=h[n]).nTf=e[n].cell,r.sClass&&t(r.nTf).addClass(r.sClass)}function N(e,n,o){var a,r,s,l,c=[],d=[],h=e.aoColumns.length;if(n){for(o===i&&(o=!1),a=0,r=n.length;a<r;a++){for(c[a]=n[a].slice(),c[a].nTr=n[a].nTr,s=h-1;0<=s;s--)!e.aoColumns[s].bVisible&&!o&&c[a].splice(s,1);d.push([])}for(a=0,r=c.length;a<r;a++){if(e=c[a].nTr)for(;s=e.firstChild;)e.removeChild(s);for(s=0,n=c[a].length;s<n;s++)if(l=h=1,d[a][s]===i){for(e.appendChild(c[a][s].cell),d[a][s]=1;c[a+h]!==i&&c[a][s].cell==c[a+h][s].cell;)d[a+h][s]=1,h++;for(;c[a][s+l]!==i&&c[a][s].cell==c[a][s+l].cell;){for(o=0;o<h;o++)d[a+o][s+l]=1;l++}t(c[a][s].cell).attr("rowspan",h).attr("colspan",l)}}}}function R(e){var n=Nt(e,"aoPreDrawCallback","preDraw",[e]);if(-1!==t.inArray(!1,n))ht(e,!1);else{n=[];var o=0,a=e.asStripeClasses,r=a.length,s=e.oLanguage,l=e.iInitDisplayStart,c="ssp"==Ot(e),d=e.aiDisplay;e.bDrawing=!0,l!==i&&-1!==l&&(e._iDisplayStart=c?l:l>=e.fnRecordsDisplay()?0:l,e.iInitDisplayStart=-1);l=e._iDisplayStart;var h=e.fnDisplayEnd();if(e.bDeferLoading)e.bDeferLoading=!1,e.iDraw++,ht(e,!1);else if(c){if(!e.bDestroying&&!j(e))return}else e.iDraw++;if(0!==d.length)for(s=c?e.aoData.length:h,c=c?0:l;c<s;c++){var u=d[c],p=e.aoData[u];null===p.nTr&&P(e,u);var f=p.nTr;if(0!==r){var m=a[o%r];p._sRowStripe!=m&&(t(f).removeClass(p._sRowStripe).addClass(m),p._sRowStripe=m)}Nt(e,"aoRowCallback",null,[f,p._aData,o,c,u]),n.push(f),o++}else o=s.sZeroRecords,1==e.iDraw&&"ajax"==Ot(e)?o=s.sLoadingRecords:s.sEmptyTable&&0===e.fnRecordsTotal()&&(o=s.sEmptyTable),n[0]=t("<tr/>",{class:r?a[0]:""}).append(t("<td />",{valign:"top",colSpan:g(e),class:e.oClasses.sRowEmpty}).html(o))[0];Nt(e,"aoHeaderCallback","header",[t(e.nTHead).children("tr")[0],T(e),l,h,d]),Nt(e,"aoFooterCallback","footer",[t(e.nTFoot).children("tr")[0],T(e),l,h,d]),(a=t(e.nTBody)).children().detach(),a.append(t(n)),Nt(e,"aoDrawCallback","draw",[e]),e.bSorted=!1,e.bFiltered=!1,e.bDrawing=!1}}function F(t,e){var n=t.oFeatures,i=n.bFilter;n.bSort&&Dt(t),i?V(t,t.oPreviousSearch):t.aiDisplay=t.aiDisplayMaster.slice(),!0!==e&&(t._iDisplayStart=0),t._drawHold=e,R(t),t._drawHold=!1}function O(e){var n=e.oClasses,i=t(e.nTable),o=(i=t("<div/>").insertBefore(i),e.oFeatures),a=t("<div/>",{id:e.sTableId+"_wrapper",class:n.sWrapper+(e.nTFoot?"":" "+n.sNoFooter)});e.nHolding=i[0],e.nTableWrapper=a[0],e.nTableReinsertBefore=e.nTable.nextSibling;for(var r,s,l,c,d,h,u=e.sDom.split(""),p=0;p<u.length;p++){if(r=null,"<"==(s=u[p])){if(l=t("<div/>")[0],"'"==(c=u[p+1])||'"'==c){for(d="",h=2;u[p+h]!=c;)d+=u[p+h],h++;"H"==d?d=n.sJUIHeader:"F"==d&&(d=n.sJUIFooter),-1!=d.indexOf(".")?(c=d.split("."),l.id=c[0].substr(1,c[0].length-1),l.className=c[1]):"#"==d.charAt(0)?l.id=d.substr(1,d.length-1):l.className=d,p+=h}a.append(l),a=t(l)}else if(">"==s)a=a.parent();else if("l"==s&&o.bPaginate&&o.bLengthChange)r=st(e);else if("f"==s&&o.bFilter)r=q(e);else if("r"==s&&o.bProcessing)r=dt(e);else if("t"==s)r=ut(e);else if("i"==s&&o.bInfo)r=et(e);else if("p"==s&&o.bPaginate)r=lt(e);else if(0!==qt.ext.feature.length)for(h=0,c=(l=qt.ext.feature).length;h<c;h++)if(s==l[h].cFeature){r=l[h].fnInit(e);break}r&&((l=e.aanFeatures)[s]||(l[s]=[]),l[s].push(r),a.append(r))}i.replaceWith(a),e.nHolding=null}function H(e,n){var i,o,a,r,s,l,c,d,h,u,p=t(n).children("tr");for(e.splice(0,e.length),a=0,l=p.length;a<l;a++)e.push([]);for(a=0,l=p.length;a<l;a++)for(o=(i=p[a]).firstChild;o;){if("TD"==o.nodeName.toUpperCase()||"TH"==o.nodeName.toUpperCase()){for(d=(d=1*o.getAttribute("colspan"))&&0!==d&&1!==d?d:1,h=(h=1*o.getAttribute("rowspan"))&&0!==h&&1!==h?h:1,r=0,s=e[a];s[r];)r++;for(c=r,u=1===d,s=0;s<d;s++)for(r=0;r<h;r++)e[a+r][c+s]={cell:o,unique:u},e[a+r].nTr=i}o=o.nextSibling}}function B(t,e,n){var i=[];n||(n=t.aoHeader,e&&H(n=[],e));e=0;for(var o=n.length;e<o;e++)for(var a=0,r=n[e].length;a<r;a++)!n[e][a].unique||i[a]&&t.bSortCellsTop||(i[a]=n[e][a].cell);return i}function U(e,n,i){if(Nt(e,"aoServerParams","serverParams",[n]),n&&t.isArray(n)){var o={},a=/(.*?)\[\]$/;t.each(n,(function(t,e){var n=e.name.match(a);n?(n=n[0],o[n]||(o[n]=[]),o[n].push(e.value)):o[e.name]=e.value})),n=o}var r,s=e.ajax,l=e.oInstance,c=function(t){Nt(e,null,"xhr",[e,t,e.jqXHR]),i(t)};if(t.isPlainObject(s)&&s.data){var d="function"==typeof(r=s.data)?r(n,e):r;n="function"==typeof r&&d?d:t.extend(!0,n,d);delete s.data}d={data:n,success:function(t){var n=t.error||t.sError;n&&$t(e,0,n),e.json=t,c(t)},dataType:"json",cache:!1,type:e.sServerMethod,error:function(n,i){var o=Nt(e,null,"xhr",[e,null,e.jqXHR]);-1===t.inArray(!0,o)&&("parsererror"==i?$t(e,0,"Invalid JSON response",1):4===n.readyState&&$t(e,0,"Ajax error",7)),ht(e,!1)}},e.oAjaxData=n,Nt(e,null,"preXhr",[e,n]),e.fnServerData?e.fnServerData.call(l,e.sAjaxSource,t.map(n,(function(t,e){return{name:e,value:t}})),c,e):e.sAjaxSource||"string"==typeof s?e.jqXHR=t.ajax(t.extend(d,{url:s||e.sAjaxSource})):"function"==typeof s?e.jqXHR=s.call(l,n,c,e):(e.jqXHR=t.ajax(t.extend(d,s)),s.data=r)}function j(t){return!t.bAjaxDataGet||(t.iDraw++,ht(t,!0),U(t,z(t),(function(e){W(t,e)})),!1)}function z(e){var n,i,o,a,r=e.aoColumns,s=r.length,l=e.oFeatures,c=e.oPreviousSearch,d=e.aoPreSearchCols,h=[],u=wt(e);n=e._iDisplayStart,i=!1!==l.bPaginate?e._iDisplayLength:-1;var p=function(t,e){h.push({name:t,value:e})};p("sEcho",e.iDraw),p("iColumns",s),p("sColumns",oe(r,"sName").join(",")),p("iDisplayStart",n),p("iDisplayLength",i);var f={draw:e.iDraw,columns:[],order:[],start:n,length:i,search:{value:c.sSearch,regex:c.bRegex}};for(n=0;n<s;n++)o=r[n],a=d[n],i="function"==typeof o.mData?"function":o.mData,f.columns.push({data:i,name:o.sName,searchable:o.bSearchable,orderable:o.bSortable,search:{value:a.sSearch,regex:a.bRegex}}),p("mDataProp_"+n,i),l.bFilter&&(p("sSearch_"+n,a.sSearch),p("bRegex_"+n,a.bRegex),p("bSearchable_"+n,o.bSearchable)),l.bSort&&p("bSortable_"+n,o.bSortable);return l.bFilter&&(p("sSearch",c.sSearch),p("bRegex",c.bRegex)),l.bSort&&(t.each(u,(function(t,e){f.order.push({column:e.col,dir:e.dir}),p("iSortCol_"+t,e.col),p("sSortDir_"+t,e.dir)})),p("iSortingCols",u.length)),null===(r=qt.ext.legacy.ajax)?e.sAjaxSource?h:f:r?h:f}function W(t,e){var n=Y(t,e),o=e.sEcho!==i?e.sEcho:e.draw,a=e.iTotalRecords!==i?e.iTotalRecords:e.recordsTotal,r=e.iTotalDisplayRecords!==i?e.iTotalDisplayRecords:e.recordsFiltered;if(o){if(1*o<t.iDraw)return;t.iDraw=1*o}for(A(t),t._iRecordsTotal=parseInt(a,10),t._iRecordsDisplay=parseInt(r,10),o=0,a=n.length;o<a;o++)w(t,n[o]);t.aiDisplay=t.aiDisplayMaster.slice(),t.bAjaxDataGet=!1,R(t),t._bInitComplete||at(t,e),t.bAjaxDataGet=!0,ht(t,!1)}function Y(e,n){var o=t.isPlainObject(e.ajax)&&e.ajax.dataSrc!==i?e.ajax.dataSrc:e.sAjaxDataProp;return"data"===o?n.aaData||n[o]:""!==o?S(o)(n):n}function q(e){var i=e.oClasses,o=e.sTableId,a=e.oLanguage,r=e.oPreviousSearch,s=e.aanFeatures,l='<input type="search" class="'+i.sFilterInput+'"/>',c=(c=a.sSearch).match(/_INPUT_/)?c.replace("_INPUT_",l):c+l,d=(i=t("<div/>",{id:s.f?null:o+"_filter",class:i.sFilter}).append(t("<label/>").append(c)),s=function(){var t=this.value?this.value:"";t!=r.sSearch&&(V(e,{sSearch:t,bRegex:r.bRegex,bSmart:r.bSmart,bCaseInsensitive:r.bCaseInsensitive}),e._iDisplayStart=0,R(e))},l=null!==e.searchDelay?e.searchDelay:"ssp"===Ot(e)?400:0,t("input",i).val(r.sSearch).attr("placeholder",a.sSearchPlaceholder).on("keyup.DT search.DT input.DT paste.DT cut.DT",l?ge(s,l):s).on("keypress.DT",(function(t){if(13==t.keyCode)return!1})).attr("aria-controls",o));return t(e.nTable).on("search.dt.DT",(function(t,i){if(e===i)try{d[0]!==n.activeElement&&d.val(r.sSearch)}catch(t){}})),i[0]}function V(t,e,n){var o=t.oPreviousSearch,a=t.aoPreSearchCols,r=function(t){o.sSearch=t.sSearch,o.bRegex=t.bRegex,o.bSmart=t.bSmart,o.bCaseInsensitive=t.bCaseInsensitive};if(b(t),"ssp"!=Ot(t)){for(J(t,e.sSearch,n,e.bEscapeRegex!==i?!e.bEscapeRegex:e.bRegex,e.bSmart,e.bCaseInsensitive),r(e),e=0;e<a.length;e++)K(t,a[e].sSearch,e,a[e].bEscapeRegex!==i?!a[e].bEscapeRegex:a[e].bRegex,a[e].bSmart,a[e].bCaseInsensitive);G(t)}else r(e);t.bFiltered=!0,Nt(t,null,"search",[t])}function G(e){for(var n,i,o=qt.ext.search,a=e.aiDisplay,r=0,s=o.length;r<s;r++){for(var l=[],c=0,d=a.length;c<d;c++)i=a[c],n=e.aoData[i],o[r](e,n._aFilterData,i,n._aData,c)&&l.push(i);a.length=0,t.merge(a,l)}}function K(t,e,n,i,o,a){if(""!==e){var r=[],s=t.aiDisplay;for(i=X(e,i,o,a),o=0;o<s.length;o++)e=t.aoData[s[o]]._aFilterData[n],i.test(e)&&r.push(s[o]);t.aiDisplay=r}}function J(t,e,n,i,o,a){i=X(e,i,o,a),a=t.oPreviousSearch.sSearch;var r,s=t.aiDisplayMaster;o=[];if(0!==qt.ext.search.length&&(n=!0),r=Z(t),0>=e.length)t.aiDisplay=s.slice();else{for((r||n||a.length>e.length||0!==e.indexOf(a)||t.bSorted)&&(t.aiDisplay=s.slice()),e=t.aiDisplay,n=0;n<e.length;n++)i.test(t.aoData[e[n]]._sFilterRow)&&o.push(e[n]);t.aiDisplay=o}}function X(e,n,i,o){return e=n?e:ue(e),i&&(e="^(?=.*?"+t.map(e.match(/"[^"]+"|[^ ]+/g)||[""],(function(t){if('"'===t.charAt(0)){var e=t.match(/^"(.*)"$/);t=e?e[1]:t}return t.replace('"',"")})).join(")(?=.*?")+").*$"),RegExp(e,o?"i":"")}function Z(t){var e,n,i,o,a,r,s,l,c=t.aoColumns,d=qt.ext.type.search;for(e=!1,n=0,o=t.aoData.length;n<o;n++)if(!(l=t.aoData[n])._aFilterData){for(r=[],i=0,a=c.length;i<a;i++)(e=c[i]).bSearchable?(s=C(t,n,i,"filter"),d[e.sType]&&(s=d[e.sType](s)),null===s&&(s=""),"string"!=typeof s&&s.toString&&(s=s.toString())):s="",s.indexOf&&-1!==s.indexOf("&")&&(pe.innerHTML=s,s=fe?pe.textContent:pe.innerText),s.replace&&(s=s.replace(/[\r\n]/g,"")),r.push(s);l._aFilterData=r,l._sFilterRow=r.join("  "),e=!0}return e}function Q(t){return{search:t.sSearch,smart:t.bSmart,regex:t.bRegex,caseInsensitive:t.bCaseInsensitive}}function tt(t){return{sSearch:t.search,bSmart:t.smart,bRegex:t.regex,bCaseInsensitive:t.caseInsensitive}}function et(e){var n=e.sTableId,i=e.aanFeatures.i,o=t("<div/>",{class:e.oClasses.sInfo,id:i?null:n+"_info"});return i||(e.aoDrawCallback.push({fn:nt,sName:"information"}),o.attr("role","status").attr("aria-live","polite"),t(e.nTable).attr("aria-describedby",n+"_info")),o[0]}function nt(e){var n=e.aanFeatures.i;if(0!==n.length){var i=e.oLanguage,o=e._iDisplayStart+1,a=e.fnDisplayEnd(),r=e.fnRecordsTotal(),s=e.fnRecordsDisplay(),l=s?i.sInfo:i.sInfoEmpty;s!==r&&(l+=" "+i.sInfoFiltered),l=it(e,l+=i.sInfoPostFix),null!==(i=i.fnInfoCallback)&&(l=i.call(e.oInstance,e,o,a,r,s,l)),t(n).html(l)}}function it(t,e){var n=t.fnFormatNumber,i=t._iDisplayStart+1,o=t._iDisplayLength,a=t.fnRecordsDisplay(),r=-1===o;return e.replace(/_START_/g,n.call(t,i)).replace(/_END_/g,n.call(t,t.fnDisplayEnd())).replace(/_MAX_/g,n.call(t,t.fnRecordsTotal())).replace(/_TOTAL_/g,n.call(t,a)).replace(/_PAGE_/g,n.call(t,r?1:Math.ceil(i/o))).replace(/_PAGES_/g,n.call(t,r?1:Math.ceil(a/o)))}function ot(t){var e,n,i,o=t.iInitDisplayStart,a=t.aoColumns;n=t.oFeatures;var r=t.bDeferLoading;if(t.bInitialised){for(O(t),M(t),N(t,t.aoHeader),N(t,t.aoFooter),ht(t,!0),n.bAutoWidth&&mt(t),e=0,n=a.length;e<n;e++)(i=a[e]).sWidth&&(i.nTh.style.width=yt(i.sWidth));Nt(t,null,"preInit",[t]),F(t),("ssp"!=(a=Ot(t))||r)&&("ajax"==a?U(t,[],(function(n){var i=Y(t,n);for(e=0;e<i.length;e++)w(t,i[e]);t.iInitDisplayStart=o,F(t),ht(t,!1),at(t,n)})):(ht(t,!1),at(t)))}else setTimeout((function(){ot(t)}),200)}function at(t,e){t._bInitComplete=!0,(e||t.oInit.aaData)&&p(t),Nt(t,null,"plugin-init",[t,e]),Nt(t,"aoInitComplete","init",[t,e])}function rt(t,e){var n=parseInt(e,10);t._iDisplayLength=n,Rt(t),Nt(t,null,"length",[t,n])}function st(e){for(var n=e.oClasses,i=e.sTableId,o=e.aLengthMenu,a=(r=t.isArray(o[0]))?o[0]:o,r=(o=r?o[1]:o,t("<select/>",{name:i+"_length","aria-controls":i,class:n.sLengthSelect})),s=0,l=a.length;s<l;s++)r[0][s]=new Option("number"==typeof o[s]?e.fnFormatNumber(o[s]):o[s],a[s]);var c=t("<div><label/></div>").addClass(n.sLength);return e.aanFeatures.l||(c[0].id=i+"_length"),c.children().append(e.oLanguage.sLengthMenu.replace("_MENU_",r[0].outerHTML)),t("select",c).val(e._iDisplayLength).on("change.DT",(function(){rt(e,t(this).val()),R(e)})),t(e.nTable).on("length.dt.DT",(function(n,i,o){e===i&&t("select",c).val(o)})),c[0]}function lt(e){var n=e.sPaginationType,i=qt.ext.pager[n],o="function"==typeof i,a=function(t){R(t)},r=(n=t("<div/>").addClass(e.oClasses.sPaging+n)[0],e.aanFeatures);return o||i.fnInit(e,n,a),r.p||(n.id=e.sTableId+"_paginate",e.aoDrawCallback.push({fn:function(t){if(o){var e,n=t._iDisplayStart,s=t._iDisplayLength,l=t.fnRecordsDisplay(),c=(n=(c=-1===s)?0:Math.ceil(n/s),s=c?1:Math.ceil(l/s),l=i(n,s),0);for(e=r.p.length;c<e;c++)Ft(t,"pageButton")(t,r.p[c],c,l,n,s)}else i.fnUpdate(t,a)},sName:"pagination"})),n}function ct(t,e,n){var i=t._iDisplayStart,o=t._iDisplayLength,a=t.fnRecordsDisplay();return 0===a||-1===o?i=0:"number"==typeof e?(i=e*o)>a&&(i=0):"first"==e?i=0:"previous"==e?0>(i=0<=o?i-o:0)&&(i=0):"next"==e?i+o<a&&(i+=o):"last"==e?i=Math.floor((a-1)/o)*o:$t(t,0,"Unknown paging action: "+e,5),e=t._iDisplayStart!==i,t._iDisplayStart=i,e&&(Nt(t,null,"page",[t]),n&&R(t)),e}function dt(e){return t("<div/>",{id:e.aanFeatures.r?null:e.sTableId+"_processing",class:e.oClasses.sProcessing}).html(e.oLanguage.sProcessing).insertBefore(e.nTable)[0]}function ht(e,n){e.oFeatures.bProcessing&&t(e.aanFeatures.r).css("display",n?"block":"none"),Nt(e,null,"processing",[e,n])}function ut(e){(h=t(e.nTable)).attr("role","grid");var n=e.oScroll;if(""===n.sX&&""===n.sY)return e.nTable;var i=n.sX,o=n.sY,a=e.oClasses,r=h.children("caption"),s=r.length?r[0]._captionSide:null,l=t(h[0].cloneNode(!1)),c=t(h[0].cloneNode(!1)),d=h.children("tfoot");d.length||(d=null),l=t("<div/>",{class:a.sScrollWrapper}).append(t("<div/>",{class:a.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:i?i?yt(i):null:"100%"}).append(t("<div/>",{class:a.sScrollHeadInner}).css({"box-sizing":"content-box",width:n.sXInner||"100%"}).append(l.removeAttr("id").css("margin-left",0).append("top"===s?r:null).append(h.children("thead"))))).append(t("<div/>",{class:a.sScrollBody}).css({position:"relative",overflow:"auto",width:i?yt(i):null}).append(h)),d&&l.append(t("<div/>",{class:a.sScrollFoot}).css({overflow:"hidden",border:0,width:i?i?yt(i):null:"100%"}).append(t("<div/>",{class:a.sScrollFootInner}).append(c.removeAttr("id").css("margin-left",0).append("bottom"===s?r:null).append(h.children("tfoot")))));var h,u=(h=l.children())[0],p=(a=h[1],d?h[2]:null);return i&&t(a).on("scroll.DT",(function(){var t=this.scrollLeft;u.scrollLeft=t,d&&(p.scrollLeft=t)})),t(a).css(o&&n.bCollapse?"max-height":"height",o),e.nScrollHead=u,e.nScrollBody=a,e.nScrollFoot=p,e.aoDrawCallback.push({fn:pt,sName:"scrolling"}),l[0]}function pt(e){var n,o,a,r,s,l=(h=e.oScroll).sX,c=h.sXInner,d=h.sY,h=h.iBarWidth,u=t(e.nScrollHead),m=u[0].style,g=(b=u.children("div"))[0].style,v=b.children("table"),b=e.nScrollBody,y=t(b),w=b.style,D=t(e.nScrollFoot).children("div"),C=D.children("table"),x=t(e.nTHead),k=t(e.nTable),S=k[0],_=S.style,T=e.nTFoot?t(e.nTFoot):null,A=e.oBrowser,I=A.bScrollOversize,$=oe(e.aoColumns,"nTh"),E=[],P=[],L=[],M=[],N=function(t){(t=t.style).paddingTop="0",t.paddingBottom="0",t.borderTopWidth="0",t.borderBottomWidth="0",t.height=0};o=b.scrollHeight>b.clientHeight,e.scrollBarVis!==o&&e.scrollBarVis!==i?(e.scrollBarVis=o,p(e)):(e.scrollBarVis=o,k.children("thead, tfoot").remove(),T&&(a=T.clone().prependTo(k),n=T.find("tr"),a=a.find("tr")),r=x.clone().prependTo(k),x=x.find("tr"),o=r.find("tr"),r.find("th, td").removeAttr("tabindex"),l||(w.width="100%",u[0].style.width="100%"),t.each(B(e,r),(function(t,n){s=f(e,t),n.style.width=e.aoColumns[s].sWidth})),T&&ft((function(t){t.style.width=""}),a),u=k.outerWidth(),""===l?(_.width="100%",I&&(k.find("tbody").height()>b.offsetHeight||"scroll"==y.css("overflow-y"))&&(_.width=yt(k.outerWidth()-h)),u=k.outerWidth()):""!==c&&(_.width=yt(c),u=k.outerWidth()),ft(N,o),ft((function(e){L.push(e.innerHTML),E.push(yt(t(e).css("width")))}),o),ft((function(e,n){-1!==t.inArray(e,$)&&(e.style.width=E[n])}),x),t(o).height(0),T&&(ft(N,a),ft((function(e){M.push(e.innerHTML),P.push(yt(t(e).css("width")))}),a),ft((function(t,e){t.style.width=P[e]}),n),t(a).height(0)),ft((function(t,e){t.innerHTML='<div class="dataTables_sizing">'+L[e]+"</div>",t.childNodes[0].style.height="0",t.childNodes[0].style.overflow="hidden",t.style.width=E[e]}),o),T&&ft((function(t,e){t.innerHTML='<div class="dataTables_sizing">'+M[e]+"</div>",t.childNodes[0].style.height="0",t.childNodes[0].style.overflow="hidden",t.style.width=P[e]}),a),k.outerWidth()<u?(n=b.scrollHeight>b.offsetHeight||"scroll"==y.css("overflow-y")?u+h:u,I&&(b.scrollHeight>b.offsetHeight||"scroll"==y.css("overflow-y"))&&(_.width=yt(n-h)),(""===l||""!==c)&&$t(e,1,"Possible column misalignment",6)):n="100%",w.width=yt(n),m.width=yt(n),T&&(e.nScrollFoot.style.width=yt(n)),!d&&I&&(w.height=yt(S.offsetHeight+h)),l=k.outerWidth(),v[0].style.width=yt(l),g.width=yt(l),c=k.height()>b.clientHeight||"scroll"==y.css("overflow-y"),g[d="padding"+(A.bScrollbarLeft?"Left":"Right")]=c?h+"px":"0px",T&&(C[0].style.width=yt(l),D[0].style.width=yt(l),D[0].style[d]=c?h+"px":"0px"),k.children("colgroup").insertBefore(k.children("thead")),y.scroll(),!e.bSorted&&!e.bFiltered||e._drawHold||(b.scrollTop=0))}function ft(t,e,n){for(var i,o,a=0,r=0,s=e.length;r<s;){for(i=e[r].firstChild,o=n?n[r].firstChild:null;i;)1===i.nodeType&&(n?t(i,o,a):t(i,a),a++),i=i.nextSibling,o=n?o.nextSibling:null;r++}}function mt(n){var i,o,a=n.nTable,r=n.aoColumns,s=(D=n.oScroll).sY,l=D.sX,c=D.sXInner,d=r.length,h=v(n,"bVisible"),u=t("th",n.nTHead),m=a.getAttribute("width"),b=a.parentNode,y=!1,w=n.oBrowser,D=w.bScrollOversize;for((i=a.style.width)&&-1!==i.indexOf("%")&&(m=i),i=0;i<h.length;i++)null!==(o=r[h[i]]).sWidth&&(o.sWidth=gt(o.sWidthOrig,b),y=!0);if(D||!y&&!l&&!s&&d==g(n)&&d==u.length)for(i=0;i<d;i++)null!==(h=f(n,i))&&(r[h].sWidth=yt(u.eq(i).width()));else{(d=t(a).clone().css("visibility","hidden").removeAttr("id")).find("tbody tr").remove();var C=t("<tr/>").appendTo(d.find("tbody"));for(d.find("thead, tfoot").remove(),d.append(t(n.nTHead).clone()).append(t(n.nTFoot).clone()),d.find("tfoot th, tfoot td").css("width",""),u=B(n,d.find("thead")[0]),i=0;i<h.length;i++)o=r[h[i]],u[i].style.width=null!==o.sWidthOrig&&""!==o.sWidthOrig?yt(o.sWidthOrig):"",o.sWidthOrig&&l&&t(u[i]).append(t("<div/>").css({width:o.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(n.aoData.length)for(i=0;i<h.length;i++)o=r[y=h[i]],t(vt(n,y)).clone(!1).append(o.sContentPadding).appendTo(C);for(t("[name]",d).removeAttr("name"),o=t("<div/>").css(l||s?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(d).appendTo(b),l&&c?d.width(c):l?(d.css("width","auto"),d.removeAttr("width"),d.width()<b.clientWidth&&m&&d.width(b.clientWidth)):s?d.width(b.clientWidth):m&&d.width(m),i=s=0;i<h.length;i++)c=(b=t(u[i])).outerWidth()-b.width(),s+=b=w.bBounding?Math.ceil(u[i].getBoundingClientRect().width):b.outerWidth(),r[h[i]].sWidth=yt(b-c);a.style.width=yt(s),o.remove()}m&&(a.style.width=yt(m)),!m&&!l||n._reszEvt||(a=function(){t(e).on("resize.DT-"+n.sInstance,ge((function(){p(n)})))},D?setTimeout(a,1e3):a(),n._reszEvt=!0)}function gt(e,i){if(!e)return 0;var o=t("<div/>").css("width",yt(e)).appendTo(i||n.body),a=o[0].offsetWidth;return o.remove(),a}function vt(e,n){var i=bt(e,n);if(0>i)return null;var o=e.aoData[i];return o.nTr?o.anCells[n]:t("<td/>").html(C(e,i,n,"display"))[0]}function bt(t,e){for(var n,i=-1,o=-1,a=0,r=t.aoData.length;a<r;a++)(n=(n=(n=C(t,a,e,"display")+"").replace(me,"")).replace(/&nbsp;/g," ")).length>i&&(i=n.length,o=a);return o}function yt(t){return null===t?"0px":"number"==typeof t?0>t?"0px":t+"px":t.match(/\d$/)?t+"px":t}function wt(e){var n,o,a,r,s,l,c=[],d=e.aoColumns;n=e.aaSortingFixed,o=t.isPlainObject(n);var h=[];for(a=function(e){e.length&&!t.isArray(e[0])?h.push(e):t.merge(h,e)},t.isArray(n)&&a(n),o&&n.pre&&a(n.pre),a(e.aaSorting),o&&n.post&&a(n.post),e=0;e<h.length;e++)for(n=0,o=(a=d[l=h[e][0]].aDataSort).length;n<o;n++)s=d[r=a[n]].sType||"string",h[e]._idx===i&&(h[e]._idx=t.inArray(h[e][1],d[r].asSorting)),c.push({src:l,col:r,dir:h[e][1],index:h[e]._idx,type:s,formatter:qt.ext.type.order[s+"-pre"]});return c}function Dt(t){var e,n,i,o,a=[],r=qt.ext.type.order,s=t.aoData,l=0,c=t.aiDisplayMaster;for(b(t),e=0,n=(o=wt(t)).length;e<n;e++)(i=o[e]).formatter&&l++,_t(t,i.col);if("ssp"!=Ot(t)&&0!==o.length){for(e=0,n=c.length;e<n;e++)a[c[e]]=e;l===o.length?c.sort((function(t,e){var n,i,r,l,c=o.length,d=s[t]._aSortData,h=s[e]._aSortData;for(r=0;r<c;r++)if(0!==(n=(n=d[(l=o[r]).col])<(i=h[l.col])?-1:n>i?1:0))return"asc"===l.dir?n:-n;return(n=a[t])<(i=a[e])?-1:n>i?1:0})):c.sort((function(t,e){var n,i,l,c,d=o.length,h=s[t]._aSortData,u=s[e]._aSortData;for(l=0;l<d;l++)if(n=h[(c=o[l]).col],i=u[c.col],0!==(n=(c=r[c.type+"-"+c.dir]||r["string-"+c.dir])(n,i)))return n;return(n=a[t])<(i=a[e])?-1:n>i?1:0}))}t.bSorted=!0}function Ct(t){for(var e,n,i=t.aoColumns,o=wt(t),a=(t=t.oLanguage.oAria,0),r=i.length;a<r;a++){var s=(n=i[a]).asSorting;e=n.sTitle.replace(/<.*?>/g,"");var l=n.nTh;l.removeAttribute("aria-sort"),n.bSortable&&(0<o.length&&o[0].col==a?(l.setAttribute("aria-sort","asc"==o[0].dir?"ascending":"descending"),n=s[o[0].index+1]||s[0]):n=s[0],e+="asc"===n?t.sSortAscending:t.sSortDescending),l.setAttribute("aria-label",e)}}function xt(e,n,o,a){var r=e.aaSorting,s=e.aoColumns[n].asSorting,l=function(e,n){var o=e._idx;return o===i&&(o=t.inArray(e[1],s)),o+1<s.length?o+1:n?null:0};"number"==typeof r[0]&&(r=e.aaSorting=[r]),o&&e.oFeatures.bSortMulti?-1!==(o=t.inArray(n,oe(r,"0")))?(null===(n=l(r[o],!0))&&1===r.length&&(n=0),null===n?r.splice(o,1):(r[o][1]=s[n],r[o]._idx=n)):(r.push([n,s[0],0]),r[r.length-1]._idx=0):r.length&&r[0][0]==n?(n=l(r[0]),r.length=1,r[0][1]=s[n],r[0]._idx=n):(r.length=0,r.push([n,s[0]]),r[0]._idx=0),F(e),"function"==typeof a&&a(e)}function kt(t,e,n,i){var o=t.aoColumns[n];Lt(e,{},(function(e){!1!==o.bSortable&&(t.oFeatures.bProcessing?(ht(t,!0),setTimeout((function(){xt(t,n,e.shiftKey,i),"ssp"!==Ot(t)&&ht(t,!1)}),0)):xt(t,n,e.shiftKey,i))}))}function St(e){var n,i,o=e.aLastSort,a=e.oClasses.sSortColumn,r=wt(e),s=e.oFeatures;if(s.bSort&&s.bSortClasses){for(s=0,n=o.length;s<n;s++)i=o[s].src,t(oe(e.aoData,"anCells",i)).removeClass(a+(2>s?s+1:3));for(s=0,n=r.length;s<n;s++)i=r[s].src,t(oe(e.aoData,"anCells",i)).addClass(a+(2>s?s+1:3))}e.aLastSort=r}function _t(t,e){var n,i=t.aoColumns[e],o=qt.ext.order[i.sSortDataType];o&&(n=o.call(t.oInstance,t,e,m(t,e)));for(var a,r=qt.ext.type.order[i.sType+"-pre"],s=0,l=t.aoData.length;s<l;s++)(i=t.aoData[s])._aSortData||(i._aSortData=[]),(!i._aSortData[e]||o)&&(a=o?n[s]:C(t,s,e,"sort"),i._aSortData[e]=r?r(a):a)}function Tt(e){if(e.oFeatures.bStateSave&&!e.bDestroying){var n={time:+new Date,start:e._iDisplayStart,length:e._iDisplayLength,order:t.extend(!0,[],e.aaSorting),search:Q(e.oPreviousSearch),columns:t.map(e.aoColumns,(function(t,n){return{visible:t.bVisible,search:Q(e.aoPreSearchCols[n])}}))};Nt(e,"aoStateSaveParams","stateSaveParams",[e,n]),e.oSavedState=n,e.fnStateSaveCallback.call(e.oInstance,e,n)}}function At(e,n,o){var a,r,s=e.aoColumns;n=function(n){if(n&&n.time){var l=Nt(e,"aoStateLoadParams","stateLoadParams",[e,n]);if(-1===t.inArray(!1,l)&&!(0<(l=e.iStateDuration)&&n.time<+new Date-1e3*l||n.columns&&s.length!==n.columns.length)){if(e.oLoadedState=t.extend(!0,{},n),n.start!==i&&(e._iDisplayStart=n.start,e.iInitDisplayStart=n.start),n.length!==i&&(e._iDisplayLength=n.length),n.order!==i&&(e.aaSorting=[],t.each(n.order,(function(t,n){e.aaSorting.push(n[0]>=s.length?[0,n[1]]:n)}))),n.search!==i&&t.extend(e.oPreviousSearch,tt(n.search)),n.columns)for(a=0,r=n.columns.length;a<r;a++)(l=n.columns[a]).visible!==i&&(s[a].bVisible=l.visible),l.search!==i&&t.extend(e.aoPreSearchCols[a],tt(l.search));Nt(e,"aoStateLoaded","stateLoaded",[e,n])}}o()};if(e.oFeatures.bStateSave){var l=e.fnStateLoadCallback.call(e.oInstance,e,n);l!==i&&n(l)}else o()}function It(e){var n=qt.settings;return-1!==(e=t.inArray(e,oe(n,"nTable")))?n[e]:null}function $t(t,n,i,o){if(i="DataTables warning: "+(t?"table id="+t.sTableId+" - ":"")+i,o&&(i+=". For more information about this error, please see http://datatables.net/tn/"+o),n)e.console&&console.log&&console.log(i);else if(n=(n=qt.ext).sErrMode||n.errMode,t&&Nt(t,null,"error",[t,o,i]),"alert"==n)alert(i);else{if("throw"==n)throw Error(i);"function"==typeof n&&n(t,o,i)}}function Et(e,n,o,a){t.isArray(o)?t.each(o,(function(i,o){t.isArray(o)?Et(e,n,o[0],o[1]):Et(e,n,o)})):(a===i&&(a=o),n[o]!==i&&(e[a]=n[o]))}function Pt(e,n,i){var o,a;for(a in n)n.hasOwnProperty(a)&&(o=n[a],t.isPlainObject(o)?(t.isPlainObject(e[a])||(e[a]={}),t.extend(!0,e[a],o)):e[a]=i&&"data"!==a&&"aaData"!==a&&t.isArray(o)?o.slice():o);return e}function Lt(e,n,i){t(e).on("click.DT",n,(function(n){t(e).blur(),i(n)})).on("keypress.DT",n,(function(t){13===t.which&&(t.preventDefault(),i(t))})).on("selectstart.DT",(function(){return!1}))}function Mt(t,e,n,i){n&&t[e].push({fn:n,sName:i})}function Nt(e,n,i,o){var a=[];return n&&(a=t.map(e[n].slice().reverse(),(function(t){return t.fn.apply(e.oInstance,o)}))),null!==i&&(n=t.Event(i+".dt"),t(e.nTable).trigger(n,o),a.push(n.result)),a}function Rt(t){var e=t._iDisplayStart,n=t.fnDisplayEnd(),i=t._iDisplayLength;e>=n&&(e=n-i),e-=e%i,(-1===i||0>e)&&(e=0),t._iDisplayStart=e}function Ft(e,n){var i=e.renderer,o=qt.ext.renderer[n];return t.isPlainObject(i)&&i[n]?o[i[n]]||o._:"string"==typeof i&&o[i]||o._}function Ot(t){return t.oFeatures.bServerSide?"ssp":t.ajax||t.sAjaxSource?"ajax":"dom"}function Ht(t,e){var n=[],i=(n=Ae.numbers_length,Math.floor(n/2));return e<=n?n=re(0,e):t<=i?((n=re(0,n-2)).push("ellipsis"),n.push(e-1)):(t>=e-1-i?n=re(e-(n-2),e):((n=re(t-i+2,t+i-1)).push("ellipsis"),n.push(e-1)),n.splice(0,0,"ellipsis"),n.splice(0,0,0)),n.DT_el="span",n}function Bt(e){t.each({num:function(t){return Ie(t,e)},"num-fmt":function(t){return Ie(t,e,Zt)},"html-num":function(t){return Ie(t,e,Kt)},"html-num-fmt":function(t){return Ie(t,e,Kt,Zt)}},(function(t,n){jt.type.order[t+e+"-pre"]=n,t.match(/^html\-/)&&(jt.type.search[t+e]=jt.type.search.html)}))}function Ut(t){return function(){var e=[It(this[qt.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return qt.ext.internal[t].apply(this,e)}}var jt,zt,Wt,Yt,qt=function(e){this.$=function(t,e){return this.api(!0).$(t,e)},this._=function(t,e){return this.api(!0).rows(t,e).data()},this.api=function(t){return new zt(t?It(this[jt.iApiIndex]):this)},this.fnAddData=function(e,n){var o=this.api(!0),a=t.isArray(e)&&(t.isArray(e[0])||t.isPlainObject(e[0]))?o.rows.add(e):o.row.add(e);return(n===i||n)&&o.draw(),a.flatten().toArray()},this.fnAdjustColumnSizing=function(t){var e=this.api(!0).columns.adjust(),n=e.settings()[0],o=n.oScroll;t===i||t?e.draw(!1):(""!==o.sX||""!==o.sY)&&pt(n)},this.fnClearTable=function(t){var e=this.api(!0).clear();(t===i||t)&&e.draw()},this.fnClose=function(t){this.api(!0).row(t).child.hide()},this.fnDeleteRow=function(t,e,n){var o=this.api(!0),a=(t=o.rows(t)).settings()[0],r=a.aoData[t[0][0]];return t.remove(),e&&e.call(this,a,r),(n===i||n)&&o.draw(),r},this.fnDestroy=function(t){this.api(!0).destroy(t)},this.fnDraw=function(t){this.api(!0).draw(t)},this.fnFilter=function(t,e,n,o,a,r){a=this.api(!0),null===e||e===i?a.search(t,n,o,r):a.column(e).search(t,n,o,r),a.draw()},this.fnGetData=function(t,e){var n=this.api(!0);if(t!==i){var o=t.nodeName?t.nodeName.toLowerCase():"";return e!==i||"td"==o||"th"==o?n.cell(t,e).data():n.row(t).data()||null}return n.data().toArray()},this.fnGetNodes=function(t){var e=this.api(!0);return t!==i?e.row(t).node():e.rows().nodes().flatten().toArray()},this.fnGetPosition=function(t){var e=this.api(!0),n=t.nodeName.toUpperCase();return"TR"==n?e.row(t).index():"TD"==n||"TH"==n?[(t=e.cell(t).index()).row,t.columnVisible,t.column]:null},this.fnIsOpen=function(t){return this.api(!0).row(t).child.isShown()},this.fnOpen=function(t,e,n){return this.api(!0).row(t).child(e,n).show().child()[0]},this.fnPageChange=function(t,e){var n=this.api(!0).page(t);(e===i||e)&&n.draw(!1)},this.fnSetColumnVis=function(t,e,n){t=this.api(!0).column(t).visible(e),(n===i||n)&&t.columns.adjust().draw()},this.fnSettings=function(){return It(this[jt.iApiIndex])},this.fnSort=function(t){this.api(!0).order(t).draw()},this.fnSortListener=function(t,e,n){this.api(!0).order.listener(t,e,n)},this.fnUpdate=function(t,e,n,o,a){var r=this.api(!0);return n===i||null===n?r.row(e).data(t):r.cell(e,n).data(t),(a===i||a)&&r.columns.adjust(),(o===i||o)&&r.draw(),0},this.fnVersionCheck=jt.fnVersionCheck;var n=this,o=e===i,d=this.length;for(var p in o&&(e={}),this.oApi=this.internal=jt.internal,qt.ext.internal)p&&(this[p]=Ut(p));return this.each((function(){var p,f={},m=1<d?Pt(f,e,!0):e,g=0,v=(f=this.getAttribute("id"),!1),b=qt.defaults,C=t(this);if("table"!=this.nodeName.toLowerCase())$t(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{s(b),l(b.column),a(b,b,!0),a(b.column,b.column,!0),a(b,t.extend(m,C.data()));var x=qt.settings;g=0;for(p=x.length;g<p;g++){var k=x[g];if(k.nTable==this||k.nTHead&&k.nTHead.parentNode==this||k.nTFoot&&k.nTFoot.parentNode==this){var _=m.bRetrieve!==i?m.bRetrieve:b.bRetrieve;if(o||_)return k.oInstance;if(m.bDestroy!==i?m.bDestroy:b.bDestroy){k.oInstance.fnDestroy();break}return void $t(k,0,"Cannot reinitialise DataTable",3)}if(k.sTableId==this.id){x.splice(g,1);break}}null!==f&&""!==f||(this.id=f="DataTables_Table_"+qt.ext._unique++);var T=t.extend(!0,{},qt.models.oSettings,{sDestroyWidth:C[0].style.width,sInstance:f,sTableId:f});T.nTable=this,T.oApi=n.internal,T.oInit=m,x.push(T),T.oInstance=1===n.length?n:C.dataTable(),s(m),r(m.oLanguage),m.aLengthMenu&&!m.iDisplayLength&&(m.iDisplayLength=t.isArray(m.aLengthMenu[0])?m.aLengthMenu[0][0]:m.aLengthMenu[0]),m=Pt(t.extend(!0,{},b),m),Et(T.oFeatures,m,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" ")),Et(T,m,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"]]),Et(T.oScroll,m,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),Et(T.oLanguage,m,"fnInfoCallback"),Mt(T,"aoDrawCallback",m.fnDrawCallback,"user"),Mt(T,"aoServerParams",m.fnServerParams,"user"),Mt(T,"aoStateSaveParams",m.fnStateSaveParams,"user"),Mt(T,"aoStateLoadParams",m.fnStateLoadParams,"user"),Mt(T,"aoStateLoaded",m.fnStateLoaded,"user"),Mt(T,"aoRowCallback",m.fnRowCallback,"user"),Mt(T,"aoRowCreatedCallback",m.fnCreatedRow,"user"),Mt(T,"aoHeaderCallback",m.fnHeaderCallback,"user"),Mt(T,"aoFooterCallback",m.fnFooterCallback,"user"),Mt(T,"aoInitComplete",m.fnInitComplete,"user"),Mt(T,"aoPreDrawCallback",m.fnPreDrawCallback,"user"),T.rowIdFn=S(m.rowId),c(T);var A=T.oClasses;t.extend(A,qt.ext.classes,m.oClasses),C.addClass(A.sTable),T.iInitDisplayStart===i&&(T.iInitDisplayStart=m.iDisplayStart,T._iDisplayStart=m.iDisplayStart),null!==m.iDeferLoading&&(T.bDeferLoading=!0,f=t.isArray(m.iDeferLoading),T._iRecordsDisplay=f?m.iDeferLoading[0]:m.iDeferLoading,T._iRecordsTotal=f?m.iDeferLoading[1]:m.iDeferLoading);var I=T.oLanguage;t.extend(!0,I,m.oLanguage),I.sUrl&&(t.ajax({dataType:"json",url:I.sUrl,success:function(e){r(e),a(b.oLanguage,e),t.extend(!0,I,e),ot(T)},error:function(){ot(T)}}),v=!0),null===m.asStripeClasses&&(T.asStripeClasses=[A.sStripeOdd,A.sStripeEven]);f=T.asStripeClasses;var $=C.children("tbody").find("tr").eq(0);if(-1!==t.inArray(!0,t.map(f,(function(t){return $.hasClass(t)})))&&(t("tbody tr",this).removeClass(f.join(" ")),T.asDestroyStripes=f.slice()),f=[],0!==(x=this.getElementsByTagName("thead")).length&&(H(T.aoHeader,x[0]),f=B(T)),null===m.aoColumns)for(x=[],g=0,p=f.length;g<p;g++)x.push(null);else x=m.aoColumns;for(g=0,p=x.length;g<p;g++)h(T,f?f[g]:null);if(y(T,m.aoColumnDefs,x,(function(t,e){u(T,t,e)})),$.length){var E=function(t,e){return null!==t.getAttribute("data-"+e)?e:null};t($[0]).children("th, td").each((function(t,e){var n=T.aoColumns[t];if(n.mData===t){var o=E(e,"sort")||E(e,"order"),a=E(e,"filter")||E(e,"search");null===o&&null===a||(n.mData={_:t+".display",sort:null!==o?t+".@data-"+o:i,type:null!==o?t+".@data-"+o:i,filter:null!==a?t+".@data-"+a:i},u(T,t))}}))}var P=T.oFeatures;f=function(){if(m.aaSorting===i){var e=T.aaSorting;for(g=0,p=e.length;g<p;g++)e[g][1]=T.aoColumns[g].asSorting[0]}St(T),P.bSort&&Mt(T,"aoDrawCallback",(function(){if(T.bSorted){var e=wt(T),n={};t.each(e,(function(t,e){n[e.src]=e.dir})),Nt(T,null,"order",[T,e,n]),Ct(T)}})),Mt(T,"aoDrawCallback",(function(){(T.bSorted||"ssp"===Ot(T)||P.bDeferRender)&&St(T)}),"sc");e=C.children("caption").each((function(){this._captionSide=t(this).css("caption-side")}));var n=C.children("thead");if(0===n.length&&(n=t("<thead/>").appendTo(C)),T.nTHead=n[0],0===(n=C.children("tbody")).length&&(n=t("<tbody/>").appendTo(C)),T.nTBody=n[0],0===(n=C.children("tfoot")).length&&e.length>0&&(""!==T.oScroll.sX||""!==T.oScroll.sY)&&(n=t("<tfoot/>").appendTo(C)),0===n.length||0===n.children().length?C.addClass(A.sNoFooter):n.length>0&&(T.nTFoot=n[0],H(T.aoFooter,T.nTFoot)),m.aaData)for(g=0;g<m.aaData.length;g++)w(T,m.aaData[g]);else(T.bDeferLoading||"dom"==Ot(T))&&D(T,t(T.nTBody).children("tr"));T.aiDisplay=T.aiDisplayMaster.slice(),T.bInitialised=!0,!1===v&&ot(T)};m.bStateSave?(P.bStateSave=!0,Mt(T,"aoDrawCallback",Tt,"state_save"),At(T,m,f)):f()}})),n=null,this},Vt={},Gt=/[\r\n]/g,Kt=/<.*?>/g,Jt=/^\d{2,4}[\.\/\-]\d{1,2}[\.\/\-]\d{1,2}([T ]{1}\d{1,2}[:\.]\d{2}([\.:]\d{2})?)?$/,Xt=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),Zt=/[',$%\u2009\u202F\u20BD\u20a9\u20BArfk]/gi,Qt=function(t){return!t||!0===t||"-"===t},te=function(t){var e=parseInt(t,10);return!isNaN(e)&&isFinite(t)?e:null},ee=function(t,e){return Vt[e]||(Vt[e]=RegExp(ue(e),"g")),"string"==typeof t&&"."!==e?t.replace(/\./g,"").replace(Vt[e],"."):t},ne=function(t,e,n){var i="string"==typeof t;return!!Qt(t)||(e&&i&&(t=ee(t,e)),n&&i&&(t=t.replace(Zt,"")),!isNaN(parseFloat(t))&&isFinite(t))},ie=function(t,e,n){return!!Qt(t)||((Qt(t)||"string"==typeof t)&&!!ne(t.replace(Kt,""),e,n)||null)},oe=function(t,e,n){var o=[],a=0,r=t.length;if(n!==i)for(;a<r;a++)t[a]&&t[a][e]&&o.push(t[a][e][n]);else for(;a<r;a++)t[a]&&o.push(t[a][e]);return o},ae=function(t,e,n,o){var a=[],r=0,s=e.length;if(o!==i)for(;r<s;r++)t[e[r]][n]&&a.push(t[e[r]][n][o]);else for(;r<s;r++)a.push(t[e[r]][n]);return a},re=function(t,e){var n,o=[];e===i?(e=0,n=t):(n=e,e=t);for(var a=e;a<n;a++)o.push(a);return o},se=function(t){for(var e=[],n=0,i=t.length;n<i;n++)t[n]&&e.push(t[n]);return e},le=function(t){var e;t:{if(!(2>t.length))for(var n=(e=t.slice().sort())[0],i=1,o=e.length;i<o;i++){if(e[i]===n){e=!1;break t}n=e[i]}e=!0}if(e)return t.slice();e=[];o=t.length;var a,r=0;i=0;t:for(;i<o;i++){for(n=t[i],a=0;a<r;a++)if(e[a]===n)continue t;e.push(n),r++}return e};qt.util={throttle:function(t,e){var n,o,a=e!==i?e:200;return function(){var e=this,r=+new Date,s=arguments;n&&r<n+a?(clearTimeout(o),o=setTimeout((function(){n=i,t.apply(e,s)}),a)):(n=r,t.apply(e,s))}},escapeRegex:function(t){return t.replace(Xt,"\\$1")}};var ce=function(t,e,n){t[e]!==i&&(t[n]=t[e])},de=/\[.*?\]$/,he=/\(\)$/,ue=qt.util.escapeRegex,pe=t("<div>")[0],fe=pe.textContent!==i,me=/<.*?>/g,ge=qt.util.throttle,ve=[],be=Array.prototype;zt=function(e,n){if(!(this instanceof zt))return new zt(e,n);var i=[],o=function(e){(e=function(e){var n,i,o=qt.settings,a=t.map(o,(function(t){return t.nTable}));return e?e.nTable&&e.oApi?[e]:e.nodeName&&"table"===e.nodeName.toLowerCase()?-1!==(n=t.inArray(e,a))?[o[n]]:null:e&&"function"==typeof e.settings?e.settings().toArray():("string"==typeof e?i=t(e):e instanceof t&&(i=e),i?i.map((function(){return-1!==(n=t.inArray(this,a))?o[n]:null})).toArray():void 0):[]}(e))&&(i=i.concat(e))};if(t.isArray(e))for(var a=0,r=e.length;a<r;a++)o(e[a]);else o(e);this.context=le(i),n&&t.merge(this,n),this.selector={rows:null,cols:null,opts:null},zt.extend(this,this,ve)},qt.Api=zt,t.extend(zt.prototype,{any:function(){return 0!==this.count()},concat:be.concat,context:[],count:function(){return this.flatten().length},each:function(t){for(var e=0,n=this.length;e<n;e++)t.call(this,this[e],e,this);return this},eq:function(t){var e=this.context;return e.length>t?new zt(e[t],this[t]):null},filter:function(t){var e=[];if(be.filter)e=be.filter.call(this,t,this);else for(var n=0,i=this.length;n<i;n++)t.call(this,this[n],n,this)&&e.push(this[n]);return new zt(this.context,e)},flatten:function(){var t=[];return new zt(this.context,t.concat.apply(t,this.toArray()))},join:be.join,indexOf:be.indexOf||function(t,e){for(var n=e||0,i=this.length;n<i;n++)if(this[n]===t)return n;return-1},iterator:function(t,e,n,o){var a,r,s,l,c,d,h,u=[],p=this.context,f=this.selector;for("string"==typeof t&&(o=n,n=e,e=t,t=!1),r=0,s=p.length;r<s;r++){var m=new zt(p[r]);if("table"===e)(a=n.call(m,p[r],r))!==i&&u.push(a);else if("columns"===e||"rows"===e)(a=n.call(m,p[r],this[r],r))!==i&&u.push(a);else if("column"===e||"column-rows"===e||"row"===e||"cell"===e)for(h=this[r],"column-rows"===e&&(d=xe(p[r],f.opts)),l=0,c=h.length;l<c;l++)a=h[l],(a="cell"===e?n.call(m,p[r],a.row,a.column,r,l):n.call(m,p[r],a,r,l,d))!==i&&u.push(a)}return u.length||o?((e=(t=new zt(p,t?u.concat.apply([],u):u)).selector).rows=f.rows,e.cols=f.cols,e.opts=f.opts,t):this},lastIndexOf:be.lastIndexOf||function(t,e){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(t){var e=[];if(be.map)e=be.map.call(this,t,this);else for(var n=0,i=this.length;n<i;n++)e.push(t.call(this,this[n],n));return new zt(this.context,e)},pluck:function(t){return this.map((function(e){return e[t]}))},pop:be.pop,push:be.push,reduce:be.reduce||function(t,e){return d(this,t,e,0,this.length,1)},reduceRight:be.reduceRight||function(t,e){return d(this,t,e,this.length-1,-1,-1)},reverse:be.reverse,selector:null,shift:be.shift,slice:function(){return new zt(this.context,this)},sort:be.sort,splice:be.splice,toArray:function(){return be.slice.call(this)},to$:function(){return t(this)},toJQuery:function(){return t(this)},unique:function(){return new zt(this.context,le(this))},unshift:be.unshift}),zt.extend=function(e,n,i){if(i.length&&n&&(n instanceof zt||n.__dt_wrapper)){var o,a,r,s=function(t,e,n){return function(){var i=e.apply(t,arguments);return zt.extend(i,i,n.methodExt),i}};for(o=0,a=i.length;o<a;o++)n[(r=i[o]).name]="function"==typeof r.val?s(e,r.val,r):t.isPlainObject(r.val)?{}:r.val,n[r.name].__dt_wrapper=!0,zt.extend(e,n[r.name],r.propExt)}},zt.register=Wt=function(e,n){if(t.isArray(e))for(var i=0,o=e.length;i<o;i++)zt.register(e[i],n);else{var a,r,s=e.split("."),l=ve;for(i=0,o=s.length;i<o;i++){var c;a=(r=-1!==s[i].indexOf("()"))?s[i].replace("()",""):s[i];t:{c=0;for(var d=l.length;c<d;c++)if(l[c].name===a){c=l[c];break t}c=null}c||(c={name:a,val:{},methodExt:[],propExt:[]},l.push(c)),i===o-1?c.val=n:l=r?c.methodExt:c.propExt}}},zt.registerPlural=Yt=function(e,n,o){zt.register(e,o),zt.register(n,(function(){var e=o.apply(this,arguments);return e===this?this:e instanceof zt?e.length?t.isArray(e[0])?new zt(e.context,e[0]):e[0]:i:e}))},Wt("tables()",(function(e){var n;if(e){n=zt;var i=this.context;if("number"==typeof e)e=[i[e]];else{var o=t.map(i,(function(t){return t.nTable}));e=t(o).filter(e).map((function(){var e=t.inArray(this,o);return i[e]})).toArray()}n=new n(e)}else n=this;return n})),Wt("table()",(function(t){var e=(t=this.tables(t)).context;return e.length?new zt(e[0]):t})),Yt("tables().nodes()","table().node()",(function(){return this.iterator("table",(function(t){return t.nTable}),1)})),Yt("tables().body()","table().body()",(function(){return this.iterator("table",(function(t){return t.nTBody}),1)})),Yt("tables().header()","table().header()",(function(){return this.iterator("table",(function(t){return t.nTHead}),1)})),Yt("tables().footer()","table().footer()",(function(){return this.iterator("table",(function(t){return t.nTFoot}),1)})),Yt("tables().containers()","table().container()",(function(){return this.iterator("table",(function(t){return t.nTableWrapper}),1)})),Wt("draw()",(function(t){return this.iterator("table",(function(e){"page"===t?R(e):("string"==typeof t&&(t="full-hold"!==t),F(e,!1===t))}))})),Wt("page()",(function(t){return t===i?this.page.info().page:this.iterator("table",(function(e){ct(e,t)}))})),Wt("page.info()",(function(){if(0===this.context.length)return i;var t=this.context[0],e=t._iDisplayStart,n=t.oFeatures.bPaginate?t._iDisplayLength:-1,o=t.fnRecordsDisplay(),a=-1===n;return{page:a?0:Math.floor(e/n),pages:a?1:Math.ceil(o/n),start:e,end:t.fnDisplayEnd(),length:n,recordsTotal:t.fnRecordsTotal(),recordsDisplay:o,serverSide:"ssp"===Ot(t)}})),Wt("page.len()",(function(t){return t===i?0!==this.context.length?this.context[0]._iDisplayLength:i:this.iterator("table",(function(e){rt(e,t)}))}));var ye=function(t,e,n){if(n){var i=new zt(t);i.one("draw",(function(){n(i.ajax.json())}))}if("ssp"==Ot(t))F(t,e);else{ht(t,!0);var o=t.jqXHR;o&&4!==o.readyState&&o.abort(),U(t,[],(function(n){A(t);for(var i=0,o=(n=Y(t,n)).length;i<o;i++)w(t,n[i]);F(t,e),ht(t,!1)}))}};Wt("ajax.json()",(function(){var t=this.context;if(0<t.length)return t[0].json})),Wt("ajax.params()",(function(){var t=this.context;if(0<t.length)return t[0].oAjaxData})),Wt("ajax.reload()",(function(t,e){return this.iterator("table",(function(n){ye(n,!1===e,t)}))})),Wt("ajax.url()",(function(e){var n=this.context;return e===i?0===n.length?i:(n=n[0]).ajax?t.isPlainObject(n.ajax)?n.ajax.url:n.ajax:n.sAjaxSource:this.iterator("table",(function(n){t.isPlainObject(n.ajax)?n.ajax.url=e:n.ajax=e}))})),Wt("ajax.url().load()",(function(t,e){return this.iterator("table",(function(n){ye(n,!1===e,t)}))}));var we=function(e,n,o,a,r){var s,l,c,d,h,u,p=[];for(c=typeof n,n&&"string"!==c&&"function"!==c&&n.length!==i||(n=[n]),c=0,d=n.length;c<d;c++)for(h=0,u=(l=n[c]&&n[c].split&&!n[c].match(/[\[\(:]/)?n[c].split(","):[n[c]]).length;h<u;h++)(s=o("string"==typeof l[h]?t.trim(l[h]):l[h]))&&s.length&&(p=p.concat(s));if((e=jt.selector[e]).length)for(c=0,d=e.length;c<d;c++)p=e[c](a,r,p);return le(p)},De=function(e){return e||(e={}),e.filter&&e.search===i&&(e.search=e.filter),t.extend({search:"none",order:"current",page:"all"},e)},Ce=function(t){for(var e=0,n=t.length;e<n;e++)if(0<t[e].length)return t[0]=t[e],t[0].length=1,t.length=1,t.context=[t.context[e]],t;return t.length=0,t},xe=function(e,n){var i,o,a,r=[],s=e.aiDisplay;a=e.aiDisplayMaster;var l=n.search;if(i=n.order,o=n.page,"ssp"==Ot(e))return"removed"===l?[]:re(0,a.length);if("current"==o)for(i=e._iDisplayStart,o=e.fnDisplayEnd();i<o;i++)r.push(s[i]);else if("current"==i||"applied"==i){if("none"==l)r=a.slice();else if("applied"==l)r=s.slice();else if("removed"==l){var c={};for(i=0,o=s.length;i<o;i++)c[s[i]]=null;r=t.map(a,(function(t){return c.hasOwnProperty(t)?null:t}))}}else if("index"==i||"original"==i)for(i=0,o=e.aoData.length;i<o;i++)"none"==l?r.push(i):(-1===(a=t.inArray(i,s))&&"removed"==l||0<=a&&"applied"==l)&&r.push(i);return r};Wt("rows()",(function(e,n){e===i?e="":t.isPlainObject(e)&&(n=e,e="");n=De(n);var o=this.iterator("table",(function(o){var a,r=n;return we("row",e,(function(e){var n=te(e),s=o.aoData;if(null!==n&&!r)return[n];if(a||(a=xe(o,r)),null!==n&&-1!==t.inArray(n,a))return[n];if(null===e||e===i||""===e)return a;if("function"==typeof e)return t.map(a,(function(t){var n=s[t];return e(t,n._aData,n.nTr)?t:null}));if(e.nodeName){n=e._DT_RowIndex;var l=e._DT_CellIndex;return n!==i?s[n]&&s[n].nTr===e?[n]:[]:l?s[l.row]&&s[l.row].nTr===e?[l.row]:[]:(n=t(e).closest("*[data-dt-row]")).length?[n.data("dt-row")]:[]}return"string"==typeof e&&"#"===e.charAt(0)&&(n=o.aIds[e.replace(/^#/,"")])!==i?[n.idx]:(n=se(ae(o.aoData,a,"nTr")),t(n).filter(e).map((function(){return this._DT_RowIndex})).toArray())}),o,r)}),1);return o.selector.rows=e,o.selector.opts=n,o})),Wt("rows().nodes()",(function(){return this.iterator("row",(function(t,e){return t.aoData[e].nTr||i}),1)})),Wt("rows().data()",(function(){return this.iterator(!0,"rows",(function(t,e){return ae(t.aoData,e,"_aData")}),1)})),Yt("rows().cache()","row().cache()",(function(t){return this.iterator("row",(function(e,n){var i=e.aoData[n];return"search"===t?i._aFilterData:i._aSortData}),1)})),Yt("rows().invalidate()","row().invalidate()",(function(t){return this.iterator("row",(function(e,n){$(e,n,t)}))})),Yt("rows().indexes()","row().index()",(function(){return this.iterator("row",(function(t,e){return e}),1)})),Yt("rows().ids()","row().id()",(function(t){for(var e=[],n=this.context,i=0,o=n.length;i<o;i++)for(var a=0,r=this[i].length;a<r;a++){var s=n[i].rowIdFn(n[i].aoData[this[i][a]]._aData);e.push((!0===t?"#":"")+s)}return new zt(n,e)})),Yt("rows().remove()","row().remove()",(function(){var t=this;return this.iterator("row",(function(e,n,o){var a,r,s,l,c,d=e.aoData,h=d[n];for(d.splice(n,1),a=0,r=d.length;a<r;a++)if(c=(s=d[a]).anCells,null!==s.nTr&&(s.nTr._DT_RowIndex=a),null!==c)for(s=0,l=c.length;s<l;s++)c[s]._DT_CellIndex.row=a;I(e.aiDisplayMaster,n),I(e.aiDisplay,n),I(t[o],n,!1),0<e._iRecordsDisplay&&e._iRecordsDisplay--,Rt(e),(n=e.rowIdFn(h._aData))!==i&&delete e.aIds[n]})),this.iterator("table",(function(t){for(var e=0,n=t.aoData.length;e<n;e++)t.aoData[e].idx=e})),this})),Wt("rows.add()",(function(e){var n=this.iterator("table",(function(t){var n,i,o,a=[];for(i=0,o=e.length;i<o;i++)(n=e[i]).nodeName&&"TR"===n.nodeName.toUpperCase()?a.push(D(t,n)[0]):a.push(w(t,n));return a}),1),i=this.rows(-1);return i.pop(),t.merge(i,n),i})),Wt("row()",(function(t,e){return Ce(this.rows(t,e))})),Wt("row().data()",(function(e){var n=this.context;if(e===i)return n.length&&this.length?n[0].aoData[this[0]]._aData:i;var o=n[0].aoData[this[0]];return o._aData=e,t.isArray(e)&&o.nTr.id&&_(n[0].rowId)(e,o.nTr.id),$(n[0],this[0],"data"),this})),Wt("row().node()",(function(){var t=this.context;return t.length&&this.length&&t[0].aoData[this[0]].nTr||null})),Wt("row.add()",(function(e){e instanceof t&&e.length&&(e=e[0]);var n=this.iterator("table",(function(t){return e.nodeName&&"TR"===e.nodeName.toUpperCase()?D(t,e)[0]:w(t,e)}));return this.row(n[0])}));var ke=function(t,e){var n=t.context;n.length&&(n=n[0].aoData[e!==i?e:t[0]])&&n._details&&(n._details.remove(),n._detailsShow=i,n._details=i)},Se=function(t,e){var n=t.context;if(n.length&&t.length){var i=n[0].aoData[t[0]];if(i._details){(i._detailsShow=e)?i._details.insertAfter(i.nTr):i._details.detach();var o=n[0],a=new zt(o),r=o.aoData;a.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details"),0<oe(r,"_details").length&&(a.on("draw.dt.DT_details",(function(t,e){o===e&&a.rows({page:"current"}).eq(0).each((function(t){(t=r[t])._detailsShow&&t._details.insertAfter(t.nTr)}))})),a.on("column-visibility.dt.DT_details",(function(t,e){if(o===e)for(var n,i=g(e),a=0,s=r.length;a<s;a++)(n=r[a])._details&&n._details.children("td[colspan]").attr("colspan",i)})),a.on("destroy.dt.DT_details",(function(t,e){if(o===e)for(var n=0,i=r.length;n<i;n++)r[n]._details&&ke(a,n)})))}}};Wt("row().child()",(function(e,n){var o=this.context;if(e===i)return o.length&&this.length?o[0].aoData[this[0]]._details:i;if(!0===e)this.child.show();else if(!1===e)ke(this);else if(o.length&&this.length){var a=o[0],r=(o=o[0].aoData[this[0]],[]),s=function(e,n){if(t.isArray(e)||e instanceof t)for(var i=0,o=e.length;i<o;i++)s(e[i],n);else e.nodeName&&"tr"===e.nodeName.toLowerCase()?r.push(e):(i=t("<tr><td/></tr>").addClass(n),t("td",i).addClass(n).html(e)[0].colSpan=g(a),r.push(i[0]))};s(e,n),o._details&&o._details.detach(),o._details=t(r),o._detailsShow&&o._details.insertAfter(o.nTr)}return this})),Wt(["row().child.show()","row().child().show()"],(function(){return Se(this,!0),this})),Wt(["row().child.hide()","row().child().hide()"],(function(){return Se(this,!1),this})),Wt(["row().child.remove()","row().child().remove()"],(function(){return ke(this),this})),Wt("row().child.isShown()",(function(){var t=this.context;return t.length&&this.length&&t[0].aoData[this[0]]._detailsShow||!1}));var _e=/^([^:]+):(name|visIdx|visible)$/,Te=function(t,e,n,i,o){n=[],i=0;for(var a=o.length;i<a;i++)n.push(C(t,o[i],e));return n};Wt("columns()",(function(e,n){e===i?e="":t.isPlainObject(e)&&(n=e,e="");n=De(n);var o=this.iterator("table",(function(i){var o=e,a=n,r=i.aoColumns,s=oe(r,"sName"),l=oe(r,"nTh");return we("column",o,(function(e){var n=te(e);if(""===e)return re(r.length);if(null!==n)return[n>=0?n:r.length+n];if("function"==typeof e){var o=xe(i,a);return t.map(r,(function(t,n){return e(n,Te(i,n,0,0,o),l[n])?n:null}))}var c="string"==typeof e?e.match(_e):"";if(c)switch(c[2]){case"visIdx":case"visible":if((n=parseInt(c[1],10))<0){var d=t.map(r,(function(t,e){return t.bVisible?e:null}));return[d[d.length+n]]}return[f(i,n)];case"name":return t.map(s,(function(t,e){return t===c[1]?e:null}));default:return[]}return e.nodeName&&e._DT_CellIndex?[e._DT_CellIndex.column]:(n=t(l).filter(e).map((function(){return t.inArray(this,l)})).toArray()).length||!e.nodeName?n:(n=t(e).closest("*[data-dt-column]")).length?[n.data("dt-column")]:[]}),i,a)}),1);return o.selector.cols=e,o.selector.opts=n,o})),Yt("columns().header()","column().header()",(function(){return this.iterator("column",(function(t,e){return t.aoColumns[e].nTh}),1)})),Yt("columns().footer()","column().footer()",(function(){return this.iterator("column",(function(t,e){return t.aoColumns[e].nTf}),1)})),Yt("columns().data()","column().data()",(function(){return this.iterator("column-rows",Te,1)})),Yt("columns().dataSrc()","column().dataSrc()",(function(){return this.iterator("column",(function(t,e){return t.aoColumns[e].mData}),1)})),Yt("columns().cache()","column().cache()",(function(t){return this.iterator("column-rows",(function(e,n,i,o,a){return ae(e.aoData,a,"search"===t?"_aFilterData":"_aSortData",n)}),1)})),Yt("columns().nodes()","column().nodes()",(function(){return this.iterator("column-rows",(function(t,e,n,i,o){return ae(t.aoData,o,"anCells",e)}),1)})),Yt("columns().visible()","column().visible()",(function(e,n){var o=this.iterator("column",(function(n,o){if(e===i)return n.aoColumns[o].bVisible;var a,r,s,l=n.aoColumns,c=l[o],d=n.aoData;if(e!==i&&c.bVisible!==e){if(e){var h=t.inArray(!0,oe(l,"bVisible"),o+1);for(a=0,r=d.length;a<r;a++)s=d[a].nTr,l=d[a].anCells,s&&s.insertBefore(l[o],l[h]||null)}else t(oe(n.aoData,"anCells",o)).detach();c.bVisible=e,N(n,n.aoHeader),N(n,n.aoFooter),n.aiDisplay.length||t(n.nTBody).find("td[colspan]").attr("colspan",g(n)),Tt(n)}}));return e!==i&&(this.iterator("column",(function(t,i){Nt(t,null,"column-visibility",[t,i,e,n])})),(n===i||n)&&this.columns.adjust()),o})),Yt("columns().indexes()","column().index()",(function(t){return this.iterator("column",(function(e,n){return"visible"===t?m(e,n):n}),1)})),Wt("columns.adjust()",(function(){return this.iterator("table",(function(t){p(t)}),1)})),Wt("column.index()",(function(t,e){if(0!==this.context.length){var n=this.context[0];if("fromVisible"===t||"toData"===t)return f(n,e);if("fromData"===t||"toVisible"===t)return m(n,e)}})),Wt("column()",(function(t,e){return Ce(this.columns(t,e))})),Wt("cells()",(function(e,n,o){if(t.isPlainObject(e)&&(e.row===i?(o=e,e=null):(o=n,n=null)),t.isPlainObject(n)&&(o=n,n=null),null===n||n===i)return this.iterator("table",(function(n){var a,r,s,l,c,d,h,u=e,p=De(o),f=n.aoData,m=xe(n,p),g=se(ae(f,m,"anCells")),v=t([].concat.apply([],g)),b=n.aoColumns.length;return we("cell",u,(function(e){var o="function"==typeof e;if(null===e||e===i||o){for(r=[],s=0,l=m.length;s<l;s++)for(a=m[s],c=0;c<b;c++)d={row:a,column:c},o?(h=f[a],e(d,C(n,a,c),h.anCells?h.anCells[c]:null)&&r.push(d)):r.push(d);return r}return t.isPlainObject(e)?e.column!==i&&e.row!==i&&-1!==t.inArray(e.row,m)?[e]:[]:(o=v.filter(e).map((function(t,e){return{row:e._DT_CellIndex.row,column:e._DT_CellIndex.column}})).toArray(),o.length||!e.nodeName?o:(h=t(e).closest("*[data-dt-row]")).length?[{row:h.data("dt-row"),column:h.data("dt-column")}]:[])}),n,p)}));var a,r,s,l,c,d=this.columns(n),h=this.rows(e);this.iterator("table",(function(t,e){for(a=[],r=0,s=h[e].length;r<s;r++)for(l=0,c=d[e].length;l<c;l++)a.push({row:h[e][r],column:d[e][l]})}),1);var u=this.cells(a,o);return t.extend(u.selector,{cols:n,rows:e,opts:o}),u})),Yt("cells().nodes()","cell().node()",(function(){return this.iterator("cell",(function(t,e,n){return(t=t.aoData[e])&&t.anCells?t.anCells[n]:i}),1)})),Wt("cells().data()",(function(){return this.iterator("cell",(function(t,e,n){return C(t,e,n)}),1)})),Yt("cells().cache()","cell().cache()",(function(t){return t="search"===t?"_aFilterData":"_aSortData",this.iterator("cell",(function(e,n,i){return e.aoData[n][t][i]}),1)})),Yt("cells().render()","cell().render()",(function(t){return this.iterator("cell",(function(e,n,i){return C(e,n,i,t)}),1)})),Yt("cells().indexes()","cell().index()",(function(){return this.iterator("cell",(function(t,e,n){return{row:e,column:n,columnVisible:m(t,n)}}),1)})),Yt("cells().invalidate()","cell().invalidate()",(function(t){return this.iterator("cell",(function(e,n,i){$(e,n,t,i)}))})),Wt("cell()",(function(t,e,n){return Ce(this.cells(t,e,n))})),Wt("cell().data()",(function(t){var e=this.context,n=this[0];return t===i?e.length&&n.length?C(e[0],n[0].row,n[0].column):i:(x(e[0],n[0].row,n[0].column,t),$(e[0],n[0].row,"data",n[0].column),this)})),Wt("order()",(function(e,n){var o=this.context;return e===i?0!==o.length?o[0].aaSorting:i:("number"==typeof e?e=[[e,n]]:e.length&&!t.isArray(e[0])&&(e=Array.prototype.slice.call(arguments)),this.iterator("table",(function(t){t.aaSorting=e.slice()})))})),Wt("order.listener()",(function(t,e,n){return this.iterator("table",(function(i){kt(i,t,e,n)}))})),Wt("order.fixed()",(function(e){if(!e){var n=(n=this.context).length?n[0].aaSortingFixed:i;return t.isArray(n)?{pre:n}:n}return this.iterator("table",(function(n){n.aaSortingFixed=t.extend(!0,{},e)}))})),Wt(["columns().order()","column().order()"],(function(e){var n=this;return this.iterator("table",(function(i,o){var a=[];t.each(n[o],(function(t,n){a.push([n,e])})),i.aaSorting=a}))})),Wt("search()",(function(e,n,o,a){var r=this.context;return e===i?0!==r.length?r[0].oPreviousSearch.sSearch:i:this.iterator("table",(function(i){i.oFeatures.bFilter&&V(i,t.extend({},i.oPreviousSearch,{sSearch:e+"",bRegex:null!==n&&n,bSmart:null===o||o,bCaseInsensitive:null===a||a}),1)}))})),Yt("columns().search()","column().search()",(function(e,n,o,a){return this.iterator("column",(function(r,s){var l=r.aoPreSearchCols;if(e===i)return l[s].sSearch;r.oFeatures.bFilter&&(t.extend(l[s],{sSearch:e+"",bRegex:null!==n&&n,bSmart:null===o||o,bCaseInsensitive:null===a||a}),V(r,r.oPreviousSearch,1))}))})),Wt("state()",(function(){return this.context.length?this.context[0].oSavedState:null})),Wt("state.clear()",(function(){return this.iterator("table",(function(t){t.fnStateSaveCallback.call(t.oInstance,t,{})}))})),Wt("state.loaded()",(function(){return this.context.length?this.context[0].oLoadedState:null})),Wt("state.save()",(function(){return this.iterator("table",(function(t){Tt(t)}))})),qt.versionCheck=qt.fnVersionCheck=function(t){for(var e,n,i=qt.version.split("."),o=0,a=(t=t.split(".")).length;o<a;o++)if((e=parseInt(i[o],10)||0)!==(n=parseInt(t[o],10)||0))return e>n;return!0},qt.isDataTable=qt.fnIsDataTable=function(e){var n=t(e).get(0),i=!1;return e instanceof qt.Api||(t.each(qt.settings,(function(e,o){var a=o.nScrollHead?t("table",o.nScrollHead)[0]:null,r=o.nScrollFoot?t("table",o.nScrollFoot)[0]:null;o.nTable!==n&&a!==n&&r!==n||(i=!0)})),i)},qt.tables=qt.fnTables=function(e){var n=!1;t.isPlainObject(e)&&(n=e.api,e=e.visible);var i=t.map(qt.settings,(function(n){if(!e||e&&t(n.nTable).is(":visible"))return n.nTable}));return n?new zt(i):i},qt.camelToHungarian=a,Wt("$()",(function(e,n){var i=this.rows(n).nodes();i=t(i);return t([].concat(i.filter(e).toArray(),i.find(e).toArray()))})),t.each(["on","one","off"],(function(e,n){Wt(n+"()",(function(){var e=Array.prototype.slice.call(arguments);e[0]=t.map(e[0].split(/\s/),(function(t){return t.match(/\.dt\b/)?t:t+".dt"})).join(" ");var i=t(this.tables().nodes());return i[n].apply(i,e),this}))})),Wt("clear()",(function(){return this.iterator("table",(function(t){A(t)}))})),Wt("settings()",(function(){return new zt(this.context,this.context)})),Wt("init()",(function(){var t=this.context;return t.length?t[0].oInit:null})),Wt("data()",(function(){return this.iterator("table",(function(t){return oe(t.aoData,"_aData")})).flatten()})),Wt("destroy()",(function(n){return n=n||!1,this.iterator("table",(function(i){var o,a=i.nTableWrapper.parentNode,r=i.oClasses,s=i.nTable,l=i.nTBody,c=i.nTHead,d=i.nTFoot,h=t(s),u=(l=t(l),t(i.nTableWrapper)),p=t.map(i.aoData,(function(t){return t.nTr}));i.bDestroying=!0,Nt(i,"aoDestroyCallback","destroy",[i]),n||new zt(i).columns().visible(!0),u.off(".DT").find(":not(tbody *)").off(".DT"),t(e).off(".DT-"+i.sInstance),s!=c.parentNode&&(h.children("thead").detach(),h.append(c)),d&&s!=d.parentNode&&(h.children("tfoot").detach(),h.append(d)),i.aaSorting=[],i.aaSortingFixed=[],St(i),t(p).removeClass(i.asStripeClasses.join(" ")),t("th, td",c).removeClass(r.sSortable+" "+r.sSortableAsc+" "+r.sSortableDesc+" "+r.sSortableNone),l.children().detach(),l.append(p),h[c=n?"remove":"detach"](),u[c](),!n&&a&&(a.insertBefore(s,i.nTableReinsertBefore),h.css("width",i.sDestroyWidth).removeClass(r.sTable),(o=i.asDestroyStripes.length)&&l.children().each((function(e){t(this).addClass(i.asDestroyStripes[e%o])}))),-1!==(a=t.inArray(i,qt.settings))&&qt.settings.splice(a,1)}))})),t.each(["column","row","cell"],(function(t,e){Wt(e+"s().every()",(function(t){var n=this.selector.opts,o=this;return this.iterator(e,(function(a,r,s,l,c){t.call(o[e](r,"cell"===e?s:n,"cell"===e?n:i),r,s,l,c)}))}))})),Wt("i18n()",(function(e,n,o){var a=this.context[0];return(e=S(e)(a.oLanguage))===i&&(e=n),o!==i&&t.isPlainObject(e)&&(e=e[o]!==i?e[o]:e._),e.replace("%d",o)})),qt.version="1.10.19",qt.settings=[],qt.models={},qt.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},qt.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1},qt.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},qt.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(t){try{return JSON.parse((-1===t.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+t.sInstance+"_"+location.pathname))}catch(t){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(t,e){try{(-1===t.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+t.sInstance+"_"+location.pathname,JSON.stringify(e))}catch(t){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:t.extend({},qt.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"},o(qt.defaults),qt.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},o(qt.defaults.column),qt.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:i,oAjaxData:i,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==Ot(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==Ot(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var t=this._iDisplayLength,e=this._iDisplayStart,n=e+t,i=this.aiDisplay.length,o=this.oFeatures,a=o.bPaginate;return o.bServerSide?!1===a||-1===t?e+i:Math.min(e+t,this._iRecordsDisplay):!a||n>i||-1===t?i:n},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null},qt.ext=jt={buttons:{},classes:{},builder:"-source-",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:qt.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:qt.version},t.extend(jt,{afnFiltering:jt.search,aTypes:jt.type.detect,ofnSearch:jt.type.search,oSort:jt.type.order,afnSortData:jt.order,aoFeatures:jt.feature,oApi:jt.internal,oStdClasses:jt.classes,oPagination:jt.pager}),t.extend(qt.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var Ae=qt.ext.pager;t.extend(Ae,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},numbers:function(t,e){return[Ht(t,e)]},simple_numbers:function(t,e){return["previous",Ht(t,e),"next"]},full_numbers:function(t,e){return["first","previous",Ht(t,e),"next","last"]},first_last_numbers:function(t,e){return["first",Ht(t,e),"last"]},_numbers:Ht,numbers_length:7}),t.extend(!0,qt.ext.renderer,{pageButton:{_:function(e,o,a,r,s,l){var c,d,h,u=e.oClasses,p=e.oLanguage.oPaginate,f=e.oLanguage.oAria.paginate||{},m=0,g=function(n,i){var o,r,h,v,b=function(t){ct(e,t.data.action,!0)};for(o=0,r=i.length;o<r;o++)if(v=i[o],t.isArray(v))h=t("<"+(v.DT_el||"div")+"/>").appendTo(n),g(h,v);else{switch(c=null,d="",v){case"ellipsis":n.append('<span class="ellipsis">&#x2026;</span>');break;case"first":c=p.sFirst,d=v+(s>0?"":" "+u.sPageButtonDisabled);break;case"previous":c=p.sPrevious,d=v+(s>0?"":" "+u.sPageButtonDisabled);break;case"next":c=p.sNext,d=v+(s<l-1?"":" "+u.sPageButtonDisabled);break;case"last":c=p.sLast,d=v+(s<l-1?"":" "+u.sPageButtonDisabled);break;default:c=v+1,d=s===v?u.sPageButtonActive:""}null!==c&&(Lt(h=t("<a>",{class:u.sPageButton+" "+d,"aria-controls":e.sTableId,"aria-label":f[v],"data-dt-idx":m,tabindex:e.iTabIndex,id:0===a&&"string"==typeof v?e.sTableId+"_"+v:null}).html(c).appendTo(n),{action:v},b),m++)}};try{h=t(o).find(n.activeElement).data("dt-idx")}catch(t){}g(t(o).empty(),r),h!==i&&t(o).find("[data-dt-idx="+h+"]").focus()}}}),t.extend(qt.ext.type.detect,[function(t,e){var n=e.oLanguage.sDecimal;return ne(t,n)?"num"+n:null},function(t){if(t&&!(t instanceof Date)&&!Jt.test(t))return null;var e=Date.parse(t);return null!==e&&!isNaN(e)||Qt(t)?"date":null},function(t,e){var n=e.oLanguage.sDecimal;return ne(t,n,!0)?"num-fmt"+n:null},function(t,e){var n=e.oLanguage.sDecimal;return ie(t,n)?"html-num"+n:null},function(t,e){var n=e.oLanguage.sDecimal;return ie(t,n,!0)?"html-num-fmt"+n:null},function(t){return Qt(t)||"string"==typeof t&&-1!==t.indexOf("<")?"html":null}]),t.extend(qt.ext.type.search,{html:function(t){return Qt(t)?t:"string"==typeof t?t.replace(Gt," ").replace(Kt,""):""},string:function(t){return Qt(t)?t:"string"==typeof t?t.replace(Gt," "):t}});var Ie=function(t,e,n,i){return 0===t||t&&"-"!==t?(e&&(t=ee(t,e)),t.replace&&(n&&(t=t.replace(n,"")),i&&(t=t.replace(i,""))),1*t):-1/0};t.extend(jt.type.order,{"date-pre":function(t){return t=Date.parse(t),isNaN(t)?-1/0:t},"html-pre":function(t){return Qt(t)?"":t.replace?t.replace(/<.*?>/g,"").toLowerCase():t+""},"string-pre":function(t){return Qt(t)?"":"string"==typeof t?t.toLowerCase():t.toString?t.toString():""},"string-asc":function(t,e){return t<e?-1:t>e?1:0},"string-desc":function(t,e){return t<e?1:t>e?-1:0}}),Bt(""),t.extend(!0,qt.ext.renderer,{header:{_:function(e,n,i,o){t(e.nTable).on("order.dt.DT",(function(t,a,r,s){e===a&&(t=i.idx,n.removeClass(i.sSortingClass+" "+o.sSortAsc+" "+o.sSortDesc).addClass("asc"==s[t]?o.sSortAsc:"desc"==s[t]?o.sSortDesc:i.sSortingClass))}))},jqueryui:function(e,n,i,o){t("<div/>").addClass(o.sSortJUIWrapper).append(n.contents()).append(t("<span/>").addClass(o.sSortIcon+" "+i.sSortingClassJUI)).appendTo(n),t(e.nTable).on("order.dt.DT",(function(t,a,r,s){e===a&&(t=i.idx,n.removeClass(o.sSortAsc+" "+o.sSortDesc).addClass("asc"==s[t]?o.sSortAsc:"desc"==s[t]?o.sSortDesc:i.sSortingClass),n.find("span."+o.sSortIcon).removeClass(o.sSortJUIAsc+" "+o.sSortJUIDesc+" "+o.sSortJUI+" "+o.sSortJUIAscAllowed+" "+o.sSortJUIDescAllowed).addClass("asc"==s[t]?o.sSortJUIAsc:"desc"==s[t]?o.sSortJUIDesc:i.sSortingClassJUI))}))}}});var $e=function(t){return"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):t};return qt.render={number:function(t,e,n,i,o){return{display:function(a){if("number"!=typeof a&&"string"!=typeof a)return a;var r=0>a?"-":"",s=parseFloat(a);return isNaN(s)?$e(a):(s=s.toFixed(n),a=Math.abs(s),s=parseInt(a,10),a=n?e+(a-s).toFixed(n).substring(2):"",r+(i||"")+s.toString().replace(/\B(?=(\d{3})+(?!\d))/g,t)+a+(o||""))}}},text:function(){return{display:$e,filter:$e}}},t.extend(qt.ext.internal,{_fnExternApiFunc:Ut,_fnBuildAjax:U,_fnAjaxUpdate:j,_fnAjaxParameters:z,_fnAjaxUpdateDraw:W,_fnAjaxDataSrc:Y,_fnAddColumn:h,_fnColumnOptions:u,_fnAdjustColumnSizing:p,_fnVisibleToColumnIndex:f,_fnColumnIndexToVisible:m,_fnVisbleColumns:g,_fnGetColumns:v,_fnColumnTypes:b,_fnApplyColumnDefs:y,_fnHungarianMap:o,_fnCamelToHungarian:a,_fnLanguageCompat:r,_fnBrowserDetect:c,_fnAddData:w,_fnAddTr:D,_fnNodeToDataIndex:function(t,e){return e._DT_RowIndex!==i?e._DT_RowIndex:null},_fnNodeToColumnIndex:function(e,n,i){return t.inArray(i,e.aoData[n].anCells)},_fnGetCellData:C,_fnSetCellData:x,_fnSplitObjNotation:k,_fnGetObjectDataFn:S,_fnSetObjectDataFn:_,_fnGetDataMaster:T,_fnClearTable:A,_fnDeleteIndex:I,_fnInvalidate:$,_fnGetRowElements:E,_fnCreateTr:P,_fnBuildHead:M,_fnDrawHead:N,_fnDraw:R,_fnReDraw:F,_fnAddOptionsHtml:O,_fnDetectHeader:H,_fnGetUniqueThs:B,_fnFeatureHtmlFilter:q,_fnFilterComplete:V,_fnFilterCustom:G,_fnFilterColumn:K,_fnFilter:J,_fnFilterCreateSearch:X,_fnEscapeRegex:ue,_fnFilterData:Z,_fnFeatureHtmlInfo:et,_fnUpdateInfo:nt,_fnInfoMacros:it,_fnInitialise:ot,_fnInitComplete:at,_fnLengthChange:rt,_fnFeatureHtmlLength:st,_fnFeatureHtmlPaginate:lt,_fnPageChange:ct,_fnFeatureHtmlProcessing:dt,_fnProcessingDisplay:ht,_fnFeatureHtmlTable:ut,_fnScrollDraw:pt,_fnApplyToChildren:ft,_fnCalculateColumnWidths:mt,_fnThrottle:ge,_fnConvertToWidth:gt,_fnGetWidestNode:vt,_fnGetMaxLenString:bt,_fnStringToCss:yt,_fnSortFlatten:wt,_fnSort:Dt,_fnSortAria:Ct,_fnSortListener:xt,_fnSortAttachListener:kt,_fnSortingClasses:St,_fnSortData:_t,_fnSaveState:Tt,_fnLoadState:At,_fnSettingsFromNode:It,_fnLog:$t,_fnMap:Et,_fnBindAction:Lt,_fnCallbackReg:Mt,_fnCallbackFire:Nt,_fnLengthOverflow:Rt,_fnRenderer:Ft,_fnDataSource:Ot,_fnRowAttributes:L,_fnExtend:Pt,_fnCalculateEnd:function(){}}),t.fn.dataTable=qt,qt.$=t,t.fn.dataTableSettings=qt.settings,t.fn.dataTableExt=qt.ext,t.fn.DataTable=function(e){return t(this).dataTable(e).api()},t.each(qt,(function(e,n){t.fn.DataTable[e]=n})),t.fn.dataTable})),function(t,e){if("function"==typeof define&&define.amd)define(["moment","jquery"],(function(t,n){return n.fn||(n.fn={}),"function"!=typeof t&&t.default&&(t=t.default),e(t,n)}));else if("object"==typeof module&&module.exports){var n="undefined"!=typeof window?window.jQuery:void 0;n||(n=require("jquery")).fn||(n.fn={});var i="undefined"!=typeof window&&void 0!==window.moment?window.moment:require("moment");module.exports=e(i,n)}else t.daterangepicker=e(t.moment,t.jQuery)}(this,(function(t,e){var n=function(n,i,o){if(this.parentEl="body",this.element=e(n),this.startDate=t().startOf("day"),this.endDate=t().endOf("day"),this.minDate=!1,this.maxDate=!1,this.maxSpan=!1,this.autoApply=!1,this.singleDatePicker=!1,this.showDropdowns=!1,this.minYear=t().subtract(100,"year").format("YYYY"),this.maxYear=t().add(100,"year").format("YYYY"),this.showWeekNumbers=!1,this.showISOWeekNumbers=!1,this.showCustomRangeLabel=!0,this.timePicker=!1,this.timePicker24Hour=!1,this.timePickerIncrement=1,this.timePickerSeconds=!1,this.linkedCalendars=!0,this.autoUpdateInput=!0,this.alwaysShowCalendars=!1,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses="btn btn-sm",this.applyButtonClasses="btn-primary",this.cancelButtonClasses="btn-default",this.locale={direction:"ltr",format:t.localeData().longDateFormat("L"),separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:t.weekdaysMin(),monthNames:t.monthsShort(),firstDay:t.localeData().firstDayOfWeek()},this.callback=function(){},this.isShowing=!1,this.leftCalendar={},this.rightCalendar={},"object"==typeof i&&null!==i||(i={}),"string"==typeof(i=e.extend(this.element.data(),i)).template||i.template instanceof e||(i.template='<div class="daterangepicker"><div class="ranges"></div><div class="drp-calendar left"><div class="calendar-table"></div><div class="calendar-time"></div></div><div class="drp-calendar right"><div class="calendar-table"></div><div class="calendar-time"></div></div><div class="drp-buttons"><span class="drp-selected"></span><button class="cancelBtn" type="button"></button><button class="applyBtn" disabled="disabled" type="button"></button> </div></div>'),this.parentEl=i.parentEl&&e(i.parentEl).length?e(i.parentEl):e(this.parentEl),this.container=e(i.template).appendTo(this.parentEl),"object"==typeof i.locale&&("string"==typeof i.locale.direction&&(this.locale.direction=i.locale.direction),"string"==typeof i.locale.format&&(this.locale.format=i.locale.format),"string"==typeof i.locale.separator&&(this.locale.separator=i.locale.separator),"object"==typeof i.locale.daysOfWeek&&(this.locale.daysOfWeek=i.locale.daysOfWeek.slice()),"object"==typeof i.locale.monthNames&&(this.locale.monthNames=i.locale.monthNames.slice()),"number"==typeof i.locale.firstDay&&(this.locale.firstDay=i.locale.firstDay),"string"==typeof i.locale.applyLabel&&(this.locale.applyLabel=i.locale.applyLabel),"string"==typeof i.locale.cancelLabel&&(this.locale.cancelLabel=i.locale.cancelLabel),"string"==typeof i.locale.weekLabel&&(this.locale.weekLabel=i.locale.weekLabel),"string"==typeof i.locale.customRangeLabel)){(p=document.createElement("textarea")).innerHTML=i.locale.customRangeLabel;var a=p.value;this.locale.customRangeLabel=a}if(this.container.addClass(this.locale.direction),"string"==typeof i.startDate&&(this.startDate=t(i.startDate,this.locale.format)),"string"==typeof i.endDate&&(this.endDate=t(i.endDate,this.locale.format)),"string"==typeof i.minDate&&(this.minDate=t(i.minDate,this.locale.format)),"string"==typeof i.maxDate&&(this.maxDate=t(i.maxDate,this.locale.format)),"object"==typeof i.startDate&&(this.startDate=t(i.startDate)),"object"==typeof i.endDate&&(this.endDate=t(i.endDate)),"object"==typeof i.minDate&&(this.minDate=t(i.minDate)),"object"==typeof i.maxDate&&(this.maxDate=t(i.maxDate)),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),"string"==typeof i.applyButtonClasses&&(this.applyButtonClasses=i.applyButtonClasses),"string"==typeof i.applyClass&&(this.applyButtonClasses=i.applyClass),"string"==typeof i.cancelButtonClasses&&(this.cancelButtonClasses=i.cancelButtonClasses),"string"==typeof i.cancelClass&&(this.cancelButtonClasses=i.cancelClass),"object"==typeof i.maxSpan&&(this.maxSpan=i.maxSpan),"object"==typeof i.dateLimit&&(this.maxSpan=i.dateLimit),"string"==typeof i.opens&&(this.opens=i.opens),"string"==typeof i.drops&&(this.drops=i.drops),"boolean"==typeof i.showWeekNumbers&&(this.showWeekNumbers=i.showWeekNumbers),"boolean"==typeof i.showISOWeekNumbers&&(this.showISOWeekNumbers=i.showISOWeekNumbers),"string"==typeof i.buttonClasses&&(this.buttonClasses=i.buttonClasses),"object"==typeof i.buttonClasses&&(this.buttonClasses=i.buttonClasses.join(" ")),"boolean"==typeof i.showDropdowns&&(this.showDropdowns=i.showDropdowns),"number"==typeof i.minYear&&(this.minYear=i.minYear),"number"==typeof i.maxYear&&(this.maxYear=i.maxYear),"boolean"==typeof i.showCustomRangeLabel&&(this.showCustomRangeLabel=i.showCustomRangeLabel),"boolean"==typeof i.singleDatePicker&&(this.singleDatePicker=i.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),"boolean"==typeof i.timePicker&&(this.timePicker=i.timePicker),"boolean"==typeof i.timePickerSeconds&&(this.timePickerSeconds=i.timePickerSeconds),"number"==typeof i.timePickerIncrement&&(this.timePickerIncrement=i.timePickerIncrement),"boolean"==typeof i.timePicker24Hour&&(this.timePicker24Hour=i.timePicker24Hour),"boolean"==typeof i.autoApply&&(this.autoApply=i.autoApply),"boolean"==typeof i.autoUpdateInput&&(this.autoUpdateInput=i.autoUpdateInput),"boolean"==typeof i.linkedCalendars&&(this.linkedCalendars=i.linkedCalendars),"function"==typeof i.isInvalidDate&&(this.isInvalidDate=i.isInvalidDate),"function"==typeof i.isCustomDate&&(this.isCustomDate=i.isCustomDate),"boolean"==typeof i.alwaysShowCalendars&&(this.alwaysShowCalendars=i.alwaysShowCalendars),0!=this.locale.firstDay)for(var r=this.locale.firstDay;r>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),r--;var s,l,c;if(void 0===i.startDate&&void 0===i.endDate&&e(this.element).is(":text")){var d=e(this.element).val(),h=d.split(this.locale.separator);s=l=null,2==h.length?(s=t(h[0],this.locale.format),l=t(h[1],this.locale.format)):this.singleDatePicker&&""!==d&&(s=t(d,this.locale.format),l=t(d,this.locale.format)),null!==s&&null!==l&&(this.setStartDate(s),this.setEndDate(l))}if("object"==typeof i.ranges){for(c in i.ranges){s="string"==typeof i.ranges[c][0]?t(i.ranges[c][0],this.locale.format):t(i.ranges[c][0]),l="string"==typeof i.ranges[c][1]?t(i.ranges[c][1],this.locale.format):t(i.ranges[c][1]),this.minDate&&s.isBefore(this.minDate)&&(s=this.minDate.clone());var u=this.maxDate;if(this.maxSpan&&u&&s.clone().add(this.maxSpan).isAfter(u)&&(u=s.clone().add(this.maxSpan)),u&&l.isAfter(u)&&(l=u.clone()),!(this.minDate&&l.isBefore(this.minDate,this.timepicker?"minute":"day")||u&&s.isAfter(u,this.timepicker?"minute":"day"))){var p;(p=document.createElement("textarea")).innerHTML=c;a=p.value;this.ranges[a]=[s,l]}}var f="<ul>";for(c in this.ranges)f+='<li data-range-key="'+c+'">'+c+"</li>";this.showCustomRangeLabel&&(f+='<li data-range-key="'+this.locale.customRangeLabel+'">'+this.locale.customRangeLabel+"</li>"),f+="</ul>",this.container.find(".ranges").prepend(f)}"function"==typeof o&&(this.callback=o),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide()),this.timePicker&&this.autoApply&&(this.autoApply=!1),this.autoApply&&this.container.addClass("auto-apply"),"object"==typeof i.ranges&&this.container.addClass("show-ranges"),this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".drp-calendar.left").addClass("single"),this.container.find(".drp-calendar.left").show(),this.container.find(".drp-calendar.right").hide(),this.timePicker||this.container.addClass("auto-apply")),(void 0===i.ranges&&!this.singleDatePicker||this.alwaysShowCalendars)&&this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses),this.applyButtonClasses.length&&this.container.find(".applyBtn").addClass(this.applyButtonClasses),this.cancelButtonClasses.length&&this.container.find(".cancelBtn").addClass(this.cancelButtonClasses),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".drp-calendar").on("click.daterangepicker",".prev",e.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",e.proxy(this.clickNext,this)).on("mousedown.daterangepicker","td.available",e.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",e.proxy(this.hoverDate,this)).on("change.daterangepicker","select.yearselect",e.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",e.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",e.proxy(this.timeChanged,this)),this.container.find(".ranges").on("click.daterangepicker","li",e.proxy(this.clickRange,this)),this.container.find(".drp-buttons").on("click.daterangepicker","button.applyBtn",e.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",e.proxy(this.clickCancel,this)),this.element.is("input")||this.element.is("button")?this.element.on({"click.daterangepicker":e.proxy(this.show,this),"focus.daterangepicker":e.proxy(this.show,this),"keyup.daterangepicker":e.proxy(this.elementChanged,this),"keydown.daterangepicker":e.proxy(this.keydown,this)}):(this.element.on("click.daterangepicker",e.proxy(this.toggle,this)),this.element.on("keydown.daterangepicker",e.proxy(this.toggle,this))),this.updateElement()};return n.prototype={constructor:n,setStartDate:function(e){"string"==typeof e&&(this.startDate=t(e,this.locale.format)),"object"==typeof e&&(this.startDate=t(e)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.floor(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.isShowing||this.updateElement(),this.updateMonthsInView()},setEndDate:function(e){"string"==typeof e&&(this.endDate=t(e,this.locale.format)),"object"==typeof e&&(this.endDate=t(e)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.endDate.isBefore(this.startDate)&&(this.endDate=this.startDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),this.maxSpan&&this.startDate.clone().add(this.maxSpan).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.maxSpan)),this.previousRightTime=this.endDate.clone(),this.container.find(".drp-selected").html(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.isShowing||this.updateElement(),this.updateMonthsInView()},isInvalidDate:function(){return!1},isCustomDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").prop("disabled",!1).removeClass("disabled"):this.container.find(".right .calendar-time select").prop("disabled",!0).addClass("disabled")),this.endDate&&this.container.find(".drp-selected").html(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.updateMonthsInView(),this.updateCalendars(),this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;this.leftCalendar.month=this.startDate.clone().date(2),this.linkedCalendars||this.endDate.month()==this.startDate.month()&&this.endDate.year()==this.startDate.year()?this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"):this.rightCalendar.month=this.endDate.clone().date(2)}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"));this.maxDate&&this.linkedCalendars&&!this.singleDatePicker&&this.rightCalendar.month>this.maxDate&&(this.rightCalendar.month=this.maxDate.clone().date(2),this.leftCalendar.month=this.maxDate.clone().date(2).subtract(1,"month"))},updateCalendars:function(){if(this.timePicker){var t,e,n,i;if(this.endDate){if(t=parseInt(this.container.find(".left .hourselect").val(),10),e=parseInt(this.container.find(".left .minuteselect").val(),10),isNaN(e)&&(e=parseInt(this.container.find(".left .minuteselect option:last").val(),10)),n=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,!this.timePicker24Hour)"PM"===(i=this.container.find(".left .ampmselect").val())&&t<12&&(t+=12),"AM"===i&&12===t&&(t=0)}else if(t=parseInt(this.container.find(".right .hourselect").val(),10),e=parseInt(this.container.find(".right .minuteselect").val(),10),isNaN(e)&&(e=parseInt(this.container.find(".right .minuteselect option:last").val(),10)),n=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,!this.timePicker24Hour)"PM"===(i=this.container.find(".right .ampmselect").val())&&t<12&&(t+=12),"AM"===i&&12===t&&(t=0);this.leftCalendar.month.hour(t).minute(e).second(n),this.rightCalendar.month.hour(t).minute(e).second(n)}this.renderCalendar("left"),this.renderCalendar("right"),this.container.find(".ranges li").removeClass("active"),null!=this.endDate&&this.calculateChosenLabel()},renderCalendar:function(n){var i,o=(i="left"==n?this.leftCalendar:this.rightCalendar).month.month(),a=i.month.year(),r=i.month.hour(),s=i.month.minute(),l=i.month.second(),c=t([a,o]).daysInMonth(),d=t([a,o,1]),h=t([a,o,c]),u=t(d).subtract(1,"month").month(),p=t(d).subtract(1,"month").year(),f=t([p,u]).daysInMonth(),m=d.day();(i=[]).firstDay=d,i.lastDay=h;for(var g=0;g<6;g++)i[g]=[];var v=f-m+this.locale.firstDay+1;v>f&&(v-=7),m==this.locale.firstDay&&(v=f-6);for(var b=t([p,u,v,12,s,l]),y=(g=0,0),w=0;g<42;g++,y++,b=t(b).add(24,"hour"))g>0&&y%7==0&&(y=0,w++),i[w][y]=b.clone().hour(r).minute(s).second(l),b.hour(12),this.minDate&&i[w][y].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&i[w][y].isBefore(this.minDate)&&"left"==n&&(i[w][y]=this.minDate.clone()),this.maxDate&&i[w][y].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&i[w][y].isAfter(this.maxDate)&&"right"==n&&(i[w][y]=this.maxDate.clone());"left"==n?this.leftCalendar.calendar=i:this.rightCalendar.calendar=i;var D="left"==n?this.minDate:this.startDate,C=this.maxDate,x=("left"==n?this.startDate:this.endDate,this.locale.direction,'<table class="table-condensed">');x+="<thead>",x+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(x+="<th></th>"),D&&!D.isBefore(i.firstDay)||this.linkedCalendars&&"left"!=n?x+="<th></th>":x+='<th class="prev available"><span></span></th>';var k=this.locale.monthNames[i[1][1].month()]+i[1][1].format(" YYYY");if(this.showDropdowns){for(var S=i[1][1].month(),_=i[1][1].year(),T=C&&C.year()||this.maxYear,A=D&&D.year()||this.minYear,I=_==A,$=_==T,E='<select class="monthselect">',P=0;P<12;P++)(!I||D&&P>=D.month())&&(!$||C&&P<=C.month())?E+="<option value='"+P+"'"+(P===S?" selected='selected'":"")+">"+this.locale.monthNames[P]+"</option>":E+="<option value='"+P+"'"+(P===S?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[P]+"</option>";E+="</select>";for(var L='<select class="yearselect">',M=A;M<=T;M++)L+='<option value="'+M+'"'+(M===_?' selected="selected"':"")+">"+M+"</option>";k=E+(L+="</select>")}if(x+='<th colspan="5" class="month">'+k+"</th>",C&&!C.isAfter(i.lastDay)||this.linkedCalendars&&"right"!=n&&!this.singleDatePicker?x+="<th></th>":x+='<th class="next available"><span></span></th>',x+="</tr>",x+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(x+='<th class="week">'+this.locale.weekLabel+"</th>"),e.each(this.locale.daysOfWeek,(function(t,e){x+="<th>"+e+"</th>"})),x+="</tr>",x+="</thead>",x+="<tbody>",null==this.endDate&&this.maxSpan){var N=this.startDate.clone().add(this.maxSpan).endOf("day");C&&!N.isBefore(C)||(C=N)}for(w=0;w<6;w++){x+="<tr>",this.showWeekNumbers?x+='<td class="week">'+i[w][0].week()+"</td>":this.showISOWeekNumbers&&(x+='<td class="week">'+i[w][0].isoWeek()+"</td>");for(y=0;y<7;y++){var R=[];i[w][y].isSame(new Date,"day")&&R.push("today"),i[w][y].isoWeekday()>5&&R.push("weekend"),i[w][y].month()!=i[1][1].month()&&R.push("off","ends"),this.minDate&&i[w][y].isBefore(this.minDate,"day")&&R.push("off","disabled"),C&&i[w][y].isAfter(C,"day")&&R.push("off","disabled"),this.isInvalidDate(i[w][y])&&R.push("off","disabled"),i[w][y].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&R.push("active","start-date"),null!=this.endDate&&i[w][y].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&R.push("active","end-date"),null!=this.endDate&&i[w][y]>this.startDate&&i[w][y]<this.endDate&&R.push("in-range");var F=this.isCustomDate(i[w][y]);!1!==F&&("string"==typeof F?R.push(F):Array.prototype.push.apply(R,F));var O="",H=!1;for(g=0;g<R.length;g++)O+=R[g]+" ","disabled"==R[g]&&(H=!0);H||(O+="available"),x+='<td class="'+O.replace(/^\s+|\s+$/g,"")+'" data-title="r'+w+"c"+y+'">'+i[w][y].date()+"</td>"}x+="</tr>"}x+="</tbody>",x+="</table>",this.container.find(".drp-calendar."+n+" .calendar-table").html(x)},renderTimePicker:function(t){if("right"!=t||this.endDate){var e,n,i,o=this.maxDate;if(!this.maxSpan||this.maxDate&&!this.startDate.clone().add(this.maxSpan).isBefore(this.maxDate)||(o=this.startDate.clone().add(this.maxSpan)),"left"==t)n=this.startDate.clone(),i=this.minDate;else if("right"==t){n=this.endDate.clone(),i=this.startDate;var a=this.container.find(".drp-calendar.right .calendar-time");if(""!=a.html()&&(n.hour(isNaN(n.hour())?a.find(".hourselect option:selected").val():n.hour()),n.minute(isNaN(n.minute())?a.find(".minuteselect option:selected").val():n.minute()),n.second(isNaN(n.second())?a.find(".secondselect option:selected").val():n.second()),!this.timePicker24Hour)){var r=a.find(".ampmselect option:selected").val();"PM"===r&&n.hour()<12&&n.hour(n.hour()+12),"AM"===r&&12===n.hour()&&n.hour(0)}n.isBefore(this.startDate)&&(n=this.startDate.clone()),o&&n.isAfter(o)&&(n=o.clone())}e='<select class="hourselect">';for(var s=this.timePicker24Hour?0:1,l=this.timePicker24Hour?23:12,c=s;c<=l;c++){var d=c;this.timePicker24Hour||(d=n.hour()>=12?12==c?12:c+12:12==c?0:c);var h=n.clone().hour(d),u=!1;i&&h.minute(59).isBefore(i)&&(u=!0),o&&h.minute(0).isAfter(o)&&(u=!0),d!=n.hour()||u?e+=u?'<option value="'+c+'" disabled="disabled" class="disabled">'+c+"</option>":'<option value="'+c+'">'+c+"</option>":e+='<option value="'+c+'" selected="selected">'+c+"</option>"}e+="</select> ",e+=': <select class="minuteselect">';for(c=0;c<60;c+=this.timePickerIncrement){var p=c<10?"0"+c:c;h=n.clone().minute(c),u=!1;i&&h.second(59).isBefore(i)&&(u=!0),o&&h.second(0).isAfter(o)&&(u=!0),n.minute()!=c||u?e+=u?'<option value="'+c+'" disabled="disabled" class="disabled">'+p+"</option>":'<option value="'+c+'">'+p+"</option>":e+='<option value="'+c+'" selected="selected">'+p+"</option>"}if(e+="</select> ",this.timePickerSeconds){e+=': <select class="secondselect">';for(c=0;c<60;c++){p=c<10?"0"+c:c,h=n.clone().second(c),u=!1;i&&h.isBefore(i)&&(u=!0),o&&h.isAfter(o)&&(u=!0),n.second()!=c||u?e+=u?'<option value="'+c+'" disabled="disabled" class="disabled">'+p+"</option>":'<option value="'+c+'">'+p+"</option>":e+='<option value="'+c+'" selected="selected">'+p+"</option>"}e+="</select> "}if(!this.timePicker24Hour){e+='<select class="ampmselect">';var f="",m="";i&&n.clone().hour(12).minute(0).second(0).isBefore(i)&&(f=' disabled="disabled" class="disabled"'),o&&n.clone().hour(0).minute(0).second(0).isAfter(o)&&(m=' disabled="disabled" class="disabled"'),n.hour()>=12?e+='<option value="AM"'+f+'>AM</option><option value="PM" selected="selected"'+m+">PM</option>":e+='<option value="AM" selected="selected"'+f+'>AM</option><option value="PM"'+m+">PM</option>",e+="</select>"}this.container.find(".drp-calendar."+t+" .calendar-time").html(e)}},updateFormInputs:function(){this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").prop("disabled",!1):this.container.find("button.applyBtn").prop("disabled",!0)},move:function(){var t,n={top:0,left:0},i=e(window).width();this.parentEl.is("body")||(n={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},i=this.parentEl[0].clientWidth+this.parentEl.offset().left),t="up"==this.drops?this.element.offset().top-this.container.outerHeight()-n.top:this.element.offset().top+this.element.outerHeight()-n.top,this.container.css({top:0,left:0,right:"auto"});var o=this.container.outerWidth();if(this.container["up"==this.drops?"addClass":"removeClass"]("drop-up"),"left"==this.opens){var a=i-this.element.offset().left-this.element.outerWidth();o+a>e(window).width()?this.container.css({top:t,right:"auto",left:9}):this.container.css({top:t,right:a,left:"auto"})}else if("center"==this.opens){(r=this.element.offset().left-n.left+this.element.outerWidth()/2-o/2)<0?this.container.css({top:t,right:"auto",left:9}):r+o>e(window).width()?this.container.css({top:t,left:"auto",right:0}):this.container.css({top:t,left:r,right:"auto"})}else{var r;(r=this.element.offset().left-n.left)+o>e(window).width()?this.container.css({top:t,left:"auto",right:0}):this.container.css({top:t,left:r,right:"auto"})}},show:function(t){this.isShowing||(this._outsideClickProxy=e.proxy((function(t){this.outsideClick(t)}),this),e(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),e(window).on("resize.daterangepicker",e.proxy((function(t){this.move(t)}),this)),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.previousRightTime=this.endDate.clone(),this.updateView(),this.container.show(),this.move(),this.element.trigger("show.daterangepicker",this),this.isShowing=!0)},hide:function(t){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate.clone(),this.endDate.clone(),this.chosenLabel),this.updateElement(),e(document).off(".daterangepicker"),e(window).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",this),this.isShowing=!1)},toggle:function(t){this.isShowing?this.hide():this.show()},outsideClick:function(t){var n=e(t.target);"focusin"==t.type||n.closest(this.element).length||n.closest(this.container).length||n.closest(".calendar-table").length||(this.hide(),this.element.trigger("outsideClick.daterangepicker",this))},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},clickRange:function(t){var e=t.target.getAttribute("data-range-key");if(this.chosenLabel=e,e==this.locale.customRangeLabel)this.showCalendars();else{var n=this.ranges[e];this.startDate=n[0],this.endDate=n[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.alwaysShowCalendars||this.hideCalendars(),this.clickApply()}},clickPrev:function(t){e(t.target).parents(".drp-calendar").hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,"month")):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(t){e(t.target).parents(".drp-calendar").hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month")),this.updateCalendars()},hoverDate:function(t){if(e(t.target).hasClass("available")){var n=e(t.target).attr("data-title"),i=n.substr(1,1),o=n.substr(3,1),a=e(t.target).parents(".drp-calendar").hasClass("left")?this.leftCalendar.calendar[i][o]:this.rightCalendar.calendar[i][o],r=this.leftCalendar,s=this.rightCalendar,l=this.startDate;this.endDate||this.container.find(".drp-calendar tbody td").each((function(t,n){if(!e(n).hasClass("week")){var i=e(n).attr("data-title"),o=i.substr(1,1),c=i.substr(3,1),d=e(n).parents(".drp-calendar").hasClass("left")?r.calendar[o][c]:s.calendar[o][c];d.isAfter(l)&&d.isBefore(a)||d.isSame(a,"day")?e(n).addClass("in-range"):e(n).removeClass("in-range")}}))}},clickDate:function(t){if(e(t.target).hasClass("available")){var n=e(t.target).attr("data-title"),i=n.substr(1,1),o=n.substr(3,1),a=e(t.target).parents(".drp-calendar").hasClass("left")?this.leftCalendar.calendar[i][o]:this.rightCalendar.calendar[i][o];if(this.endDate||a.isBefore(this.startDate,"day")){if(this.timePicker){var r=parseInt(this.container.find(".left .hourselect").val(),10);if(!this.timePicker24Hour)"PM"===(c=this.container.find(".left .ampmselect").val())&&r<12&&(r+=12),"AM"===c&&12===r&&(r=0);var s=parseInt(this.container.find(".left .minuteselect").val(),10);isNaN(s)&&(s=parseInt(this.container.find(".left .minuteselect option:last").val(),10));var l=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0;a=a.clone().hour(r).minute(s).second(l)}this.endDate=null,this.setStartDate(a.clone())}else if(!this.endDate&&a.isBefore(this.startDate))this.setEndDate(this.startDate.clone());else{if(this.timePicker){var c;r=parseInt(this.container.find(".right .hourselect").val(),10);if(!this.timePicker24Hour)"PM"===(c=this.container.find(".right .ampmselect").val())&&r<12&&(r+=12),"AM"===c&&12===r&&(r=0);s=parseInt(this.container.find(".right .minuteselect").val(),10);isNaN(s)&&(s=parseInt(this.container.find(".right .minuteselect option:last").val(),10));l=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0;a=a.clone().hour(r).minute(s).second(l)}this.setEndDate(a.clone()),this.autoApply&&(this.calculateChosenLabel(),this.clickApply())}this.singleDatePicker&&(this.setEndDate(this.startDate),this.timePicker||this.clickApply()),this.updateView(),t.stopPropagation()}},calculateChosenLabel:function(){var t=!0,e=0;for(var n in this.ranges){if(this.timePicker){var i=this.timePickerSeconds?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm";if(this.startDate.format(i)==this.ranges[n][0].format(i)&&this.endDate.format(i)==this.ranges[n][1].format(i)){t=!1,this.chosenLabel=this.container.find(".ranges li:eq("+e+")").addClass("active").attr("data-range-key");break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[n][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[n][1].format("YYYY-MM-DD")){t=!1,this.chosenLabel=this.container.find(".ranges li:eq("+e+")").addClass("active").attr("data-range-key");break}e++}t&&(this.showCustomRangeLabel?this.chosenLabel=this.container.find(".ranges li:last").addClass("active").attr("data-range-key"):this.chosenLabel=null,this.showCalendars())},clickApply:function(t){this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(t){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.hide(),this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(t){var n=e(t.target).closest(".drp-calendar").hasClass("left"),i=n?"left":"right",o=this.container.find(".drp-calendar."+i),a=parseInt(o.find(".monthselect").val(),10),r=o.find(".yearselect").val();n||(r<this.startDate.year()||r==this.startDate.year()&&a<this.startDate.month())&&(a=this.startDate.month(),r=this.startDate.year()),this.minDate&&(r<this.minDate.year()||r==this.minDate.year()&&a<this.minDate.month())&&(a=this.minDate.month(),r=this.minDate.year()),this.maxDate&&(r>this.maxDate.year()||r==this.maxDate.year()&&a>this.maxDate.month())&&(a=this.maxDate.month(),r=this.maxDate.year()),n?(this.leftCalendar.month.month(a).year(r),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(a).year(r),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month"))),this.updateCalendars()},timeChanged:function(t){var n=e(t.target).closest(".drp-calendar"),i=n.hasClass("left"),o=parseInt(n.find(".hourselect").val(),10),a=parseInt(n.find(".minuteselect").val(),10);isNaN(a)&&(a=parseInt(n.find(".minuteselect option:last").val(),10));var r=this.timePickerSeconds?parseInt(n.find(".secondselect").val(),10):0;if(!this.timePicker24Hour){var s=n.find(".ampmselect").val();"PM"===s&&o<12&&(o+=12),"AM"===s&&12===o&&(o=0)}if(i){var l=this.startDate.clone();l.hour(o),l.minute(a),l.second(r),this.setStartDate(l),this.singleDatePicker?this.endDate=this.startDate.clone():this.endDate&&this.endDate.format("YYYY-MM-DD")==l.format("YYYY-MM-DD")&&this.endDate.isBefore(l)&&this.setEndDate(l.clone())}else if(this.endDate){var c=this.endDate.clone();c.hour(o),c.minute(a),c.second(r),this.setEndDate(c)}this.updateCalendars(),this.updateFormInputs(),this.renderTimePicker("left"),this.renderTimePicker("right")},elementChanged:function(){if(this.element.is("input")&&this.element.val().length){var e=this.element.val().split(this.locale.separator),n=null,i=null;2===e.length&&(n=t(e[0],this.locale.format),i=t(e[1],this.locale.format)),(this.singleDatePicker||null===n||null===i)&&(i=n=t(this.element.val(),this.locale.format)),n.isValid()&&i.isValid()&&(this.setStartDate(n),this.setEndDate(i),this.updateView())}},keydown:function(t){9!==t.keyCode&&13!==t.keyCode||this.hide(),27===t.keyCode&&(t.preventDefault(),t.stopPropagation(),this.hide())},updateElement:function(){if(this.element.is("input")&&this.autoUpdateInput){var t=this.startDate.format(this.locale.format);this.singleDatePicker||(t+=this.locale.separator+this.endDate.format(this.locale.format)),t!==this.element.val()&&this.element.val(t).trigger("change")}},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData()}},e.fn.daterangepicker=function(t,i){var o=e.extend(!0,{},e.fn.daterangepicker.defaultOptions,t);return this.each((function(){var t=e(this);t.data("daterangepicker")&&t.data("daterangepicker").remove(),t.data("daterangepicker",new n(t,o,i))})),this},n})),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=function(e,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(n),n}:t(jQuery)}((function(t){var e=function(){if(t&&t.fn&&t.fn.select2&&t.fn.select2.amd)var e=t.fn.select2.amd;var n,i,o,a,r,s,l,c,d,h,u,p,f,m,g;function v(t,e){return f.call(t,e)}function b(t,e){var n,i,o,a,r,s,l,c,d,h,p,f=e&&e.split("/"),m=u.map,v=m&&m["*"]||{};if(t){for(r=(t=t.split("/")).length-1,u.nodeIdCompat&&g.test(t[r])&&(t[r]=t[r].replace(g,"")),"."===t[0].charAt(0)&&f&&(t=f.slice(0,f.length-1).concat(t)),d=0;d<t.length;d++)if("."===(p=t[d]))t.splice(d,1),d-=1;else if(".."===p){if(0===d||1===d&&".."===t[2]||".."===t[d-1])continue;0<d&&(t.splice(d-1,2),d-=2)}t=t.join("/")}if((f||v)&&m){for(d=(n=t.split("/")).length;0<d;d-=1){if(i=n.slice(0,d).join("/"),f)for(h=f.length;0<h;h-=1)if(o=(o=m[f.slice(0,h).join("/")])&&o[i]){a=o,s=d;break}if(a)break;!l&&v&&v[i]&&(l=v[i],c=d)}!a&&l&&(a=l,s=c),a&&(n.splice(0,s,a),t=n.join("/"))}return t}function y(t,e){return function(){var n=m.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),s.apply(a,n.concat([t,e]))}}function w(t){return function(e){d[t]=e}}function D(t){if(v(h,t)){var e=h[t];delete h[t],p[t]=!0,r.apply(a,e)}if(!v(d,t)&&!v(p,t))throw new Error("No "+t);return d[t]}function C(t){var e,n=t?t.indexOf("!"):-1;return-1<n&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function x(t){return t?C(t):[]}return e&&e.requirejs||(e?i=e:e={},d={},h={},u={},p={},f=Object.prototype.hasOwnProperty,m=[].slice,g=/\.js$/,l=function(t,e){var n,i=C(t),o=i[0],a=e[1];return t=i[1],o&&(n=D(o=b(o,a))),o?t=n&&n.normalize?n.normalize(t,function(t){return function(e){return b(e,t)}}(a)):b(t,a):(o=(i=C(t=b(t,a)))[0],t=i[1],o&&(n=D(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:n}},c={require:function(t){return y(t)},exports:function(t){var e=d[t];return void 0!==e?e:d[t]={}},module:function(t){return{id:t,uri:"",exports:d[t],config:function(t){return function(){return u&&u.config&&u.config[t]||{}}}(t)}}},r=function(t,e,n,i){var o,r,s,u,f,m,g,b=[],C=typeof n;if(m=x(i=i||t),"undefined"==C||"function"==C){for(e=!e.length&&n.length?["require","exports","module"]:e,f=0;f<e.length;f+=1)if("require"===(r=(u=l(e[f],m)).f))b[f]=c.require(t);else if("exports"===r)b[f]=c.exports(t),g=!0;else if("module"===r)o=b[f]=c.module(t);else if(v(d,r)||v(h,r)||v(p,r))b[f]=D(r);else{if(!u.p)throw new Error(t+" missing "+r);u.p.load(u.n,y(i,!0),w(r),{}),b[f]=d[r]}s=n?n.apply(d[t],b):void 0,t&&(o&&o.exports!==a&&o.exports!==d[t]?d[t]=o.exports:s===a&&g||(d[t]=s))}else t&&(d[t]=n)},n=i=s=function(t,e,n,i,o){if("string"==typeof t)return c[t]?c[t](e):D(l(t,x(e)).f);if(!t.splice){if((u=t).deps&&s(u.deps,u.callback),!e)return;e.splice?(t=e,e=n,n=null):t=a}return e=e||function(){},"function"==typeof n&&(n=i,i=o),i?r(a,t,e,n):setTimeout((function(){r(a,t,e,n)}),4),s},s.config=function(t){return s(t)},n._defined=d,(o=function(t,e,n){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(n=e,e=[]),v(d,t)||v(h,t)||(h[t]=[t,e,n])}).amd={jQuery:!0},e.requirejs=n,e.require=i,e.define=o),e.define("almond",(function(){})),e.define("jquery",[],(function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e})),e.define("select2/utils",["jquery"],(function(t){var e={};function n(t){var e=t.prototype,n=[];for(var i in e)"function"==typeof e[i]&&"constructor"!==i&&n.push(i);return n}function i(){this.listeners={}}e.Extend=function(t,e){var n={}.hasOwnProperty;function i(){this.constructor=t}for(var o in e)n.call(e,o)&&(t[o]=e[o]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},e.Decorate=function(t,e){var i=n(e),o=n(t);function a(){var n=Array.prototype.unshift,i=e.prototype.constructor.length,o=t.prototype.constructor;0<i&&(n.call(arguments,t.prototype.constructor),o=e.prototype.constructor),o.apply(this,arguments)}e.displayName=t.displayName,a.prototype=new function(){this.constructor=a};for(var r=0;r<o.length;r++){var s=o[r];a.prototype[s]=t.prototype[s]}function l(t){var n=function(){};t in a.prototype&&(n=a.prototype[t]);var i=e.prototype[t];return function(){return Array.prototype.unshift.call(arguments,n),i.apply(this,arguments)}}for(var c=0;c<i.length;c++){var d=i[c];a.prototype[d]=l(d)}return a},i.prototype.on=function(t,e){this.listeners=this.listeners||{},t in this.listeners?this.listeners[t].push(e):this.listeners[t]=[e]},i.prototype.trigger=function(t){var e=Array.prototype.slice,n=e.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),(n[0]._type=t)in this.listeners&&this.invoke(this.listeners[t],e.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(t,e){for(var n=0,i=t.length;n<i;n++)t[n].apply(this,e)},e.Observable=i,e.generateChars=function(t){for(var e="",n=0;n<t;n++)e+=Math.floor(36*Math.random()).toString(36);return e},e.bind=function(t,e){return function(){t.apply(e,arguments)}},e._convertData=function(t){for(var e in t){var n=e.split("-"),i=t;if(1!==n.length){for(var o=0;o<n.length;o++){var a=n[o];(a=a.substring(0,1).toLowerCase()+a.substring(1))in i||(i[a]={}),o==n.length-1&&(i[a]=t[e]),i=i[a]}delete t[e]}}return t},e.hasScroll=function(e,n){var i=t(n),o=n.style.overflowX,a=n.style.overflowY;return(o!==a||"hidden"!==a&&"visible"!==a)&&("scroll"===o||"scroll"===a||i.innerHeight()<n.scrollHeight||i.innerWidth()<n.scrollWidth)},e.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof t?t:String(t).replace(/[&<>"'\/\\]/g,(function(t){return e[t]}))},e.appendMany=function(e,n){if("1.7"===t.fn.jquery.substr(0,3)){var i=t();t.map(n,(function(t){i=i.add(t)})),n=i}e.append(n)},e.__cache={};var o=0;return e.GetUniqueElementId=function(t){var e=t.getAttribute("data-select2-id");return null==e&&(t.id?(e=t.id,t.setAttribute("data-select2-id",e)):(t.setAttribute("data-select2-id",++o),e=o.toString())),e},e.StoreData=function(t,n,i){var o=e.GetUniqueElementId(t);e.__cache[o]||(e.__cache[o]={}),e.__cache[o][n]=i},e.GetData=function(n,i){var o=e.GetUniqueElementId(n);return i?e.__cache[o]&&null!=e.__cache[o][i]?e.__cache[o][i]:t(n).data(i):e.__cache[o]},e.RemoveData=function(t){var n=e.GetUniqueElementId(t);null!=e.__cache[n]&&delete e.__cache[n],t.removeAttribute("data-select2-id")},e})),e.define("select2/results",["jquery","./utils"],(function(t,e){function n(t,e,i){this.$element=t,this.data=i,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(e){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=t('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),o=this.options.get("translations").get(e.message);i.append(n(o(e.args))),i[0].className+=" select2-results__message",this.$results.append(i)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(t){this.hideLoading();var e=[];if(null!=t.results&&0!==t.results.length){t.results=this.sort(t.results);for(var n=0;n<t.results.length;n++){var i=t.results[n],o=this.option(i);e.push(o)}this.$results.append(e)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},n.prototype.position=function(t,e){e.find(".select2-results").append(t)},n.prototype.sort=function(t){return this.options.get("sorter")(t)},n.prototype.highlightFirstItem=function(){var t=this.$results.find(".select2-results__option[aria-selected]"),e=t.filter("[aria-selected=true]");0<e.length?e.first().trigger("mouseenter"):t.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var n=this;this.data.current((function(i){var o=t.map(i,(function(t){return t.id.toString()}));n.$results.find(".select2-results__option[aria-selected]").each((function(){var n=t(this),i=e.GetData(this,"data"),a=""+i.id;null!=i.element&&i.element.selected||null==i.element&&-1<t.inArray(a,o)?n.attr("aria-selected","true"):n.attr("aria-selected","false")}))}))},n.prototype.showLoading=function(t){this.hideLoading();var e={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(t)},n=this.option(e);n.className+=" loading-results",this.$results.prepend(n)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(n){var i=document.createElement("li");i.className="select2-results__option";var o={role:"option","aria-selected":"false"},a=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(var r in(null!=n.element&&a.call(n.element,":disabled")||null==n.element&&n.disabled)&&(delete o["aria-selected"],o["aria-disabled"]="true"),null==n.id&&delete o["aria-selected"],null!=n._resultId&&(i.id=n._resultId),n.title&&(i.title=n.title),n.children&&(o.role="group",o["aria-label"]=n.text,delete o["aria-selected"]),o){var s=o[r];i.setAttribute(r,s)}if(n.children){var l=t(i),c=document.createElement("strong");c.className="select2-results__group",t(c),this.template(n,c);for(var d=[],h=0;h<n.children.length;h++){var u=n.children[h],p=this.option(u);d.push(p)}var f=t("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});f.append(d),l.append(c),l.append(f)}else this.template(n,i);return e.StoreData(i,"data",n),i},n.prototype.bind=function(n,i){var o=this,a=n.id+"-results";this.$results.attr("id",a),n.on("results:all",(function(t){o.clear(),o.append(t.data),n.isOpen()&&(o.setClasses(),o.highlightFirstItem())})),n.on("results:append",(function(t){o.append(t.data),n.isOpen()&&o.setClasses()})),n.on("query",(function(t){o.hideMessages(),o.showLoading(t)})),n.on("select",(function(){n.isOpen()&&(o.setClasses(),o.options.get("scrollAfterSelect")&&o.highlightFirstItem())})),n.on("unselect",(function(){n.isOpen()&&(o.setClasses(),o.options.get("scrollAfterSelect")&&o.highlightFirstItem())})),n.on("open",(function(){o.$results.attr("aria-expanded","true"),o.$results.attr("aria-hidden","false"),o.setClasses(),o.ensureHighlightVisible()})),n.on("close",(function(){o.$results.attr("aria-expanded","false"),o.$results.attr("aria-hidden","true"),o.$results.removeAttr("aria-activedescendant")})),n.on("results:toggle",(function(){var t=o.getHighlightedResults();0!==t.length&&t.trigger("mouseup")})),n.on("results:select",(function(){var t=o.getHighlightedResults();if(0!==t.length){var n=e.GetData(t[0],"data");"true"==t.attr("aria-selected")?o.trigger("close",{}):o.trigger("select",{data:n})}})),n.on("results:previous",(function(){var t=o.getHighlightedResults(),e=o.$results.find("[aria-selected]"),n=e.index(t);if(!(n<=0)){var i=n-1;0===t.length&&(i=0);var a=e.eq(i);a.trigger("mouseenter");var r=o.$results.offset().top,s=a.offset().top,l=o.$results.scrollTop()+(s-r);0===i?o.$results.scrollTop(0):s-r<0&&o.$results.scrollTop(l)}})),n.on("results:next",(function(){var t=o.getHighlightedResults(),e=o.$results.find("[aria-selected]"),n=e.index(t)+1;if(!(n>=e.length)){var i=e.eq(n);i.trigger("mouseenter");var a=o.$results.offset().top+o.$results.outerHeight(!1),r=i.offset().top+i.outerHeight(!1),s=o.$results.scrollTop()+r-a;0===n?o.$results.scrollTop(0):a<r&&o.$results.scrollTop(s)}})),n.on("results:focus",(function(t){t.element.addClass("select2-results__option--highlighted")})),n.on("results:message",(function(t){o.displayMessage(t)})),t.fn.mousewheel&&this.$results.on("mousewheel",(function(t){var e=o.$results.scrollTop(),n=o.$results.get(0).scrollHeight-e+t.deltaY,i=0<t.deltaY&&e-t.deltaY<=0,a=t.deltaY<0&&n<=o.$results.height();i?(o.$results.scrollTop(0),t.preventDefault(),t.stopPropagation()):a&&(o.$results.scrollTop(o.$results.get(0).scrollHeight-o.$results.height()),t.preventDefault(),t.stopPropagation())})),this.$results.on("mouseup",".select2-results__option[aria-selected]",(function(n){var i=t(this),a=e.GetData(this,"data");"true"!==i.attr("aria-selected")?o.trigger("select",{originalEvent:n,data:a}):o.options.get("multiple")?o.trigger("unselect",{originalEvent:n,data:a}):o.trigger("close",{})})),this.$results.on("mouseenter",".select2-results__option[aria-selected]",(function(n){var i=e.GetData(this,"data");o.getHighlightedResults().removeClass("select2-results__option--highlighted"),o.trigger("results:focus",{data:i,element:t(this)})}))},n.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(0!==t.length){var e=this.$results.find("[aria-selected]").index(t),n=this.$results.offset().top,i=t.offset().top,o=this.$results.scrollTop()+(i-n),a=i-n;o-=2*t.outerHeight(!1),e<=2?this.$results.scrollTop(0):(a>this.$results.outerHeight()||a<0)&&this.$results.scrollTop(o)}},n.prototype.template=function(e,n){var i=this.options.get("templateResult"),o=this.options.get("escapeMarkup"),a=i(e,n);null==a?n.style.display="none":"string"==typeof a?n.innerHTML=o(a):t(n).append(a)},n})),e.define("select2/keys",[],(function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}})),e.define("select2/selection/base",["jquery","../utils","../keys"],(function(t,e,n){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var n=t('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=e.GetData(this.$element[0],"old-tabindex")?this._tabindex=e.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),n.attr("title",this.$element.attr("title")),n.attr("tabindex",this._tabindex),n.attr("aria-disabled","false"),this.$selection=n},i.prototype.bind=function(t,e){var i=this,o=t.id+"-results";this.container=t,this.$selection.on("focus",(function(t){i.trigger("focus",t)})),this.$selection.on("blur",(function(t){i._handleBlur(t)})),this.$selection.on("keydown",(function(t){i.trigger("keypress",t),t.which===n.SPACE&&t.preventDefault()})),t.on("results:focus",(function(t){i.$selection.attr("aria-activedescendant",t.data._resultId)})),t.on("selection:update",(function(t){i.update(t.data)})),t.on("open",(function(){i.$selection.attr("aria-expanded","true"),i.$selection.attr("aria-owns",o),i._attachCloseHandler(t)})),t.on("close",(function(){i.$selection.attr("aria-expanded","false"),i.$selection.removeAttr("aria-activedescendant"),i.$selection.removeAttr("aria-owns"),i.$selection.trigger("focus"),i._detachCloseHandler(t)})),t.on("enable",(function(){i.$selection.attr("tabindex",i._tabindex),i.$selection.attr("aria-disabled","false")})),t.on("disable",(function(){i.$selection.attr("tabindex","-1"),i.$selection.attr("aria-disabled","true")}))},i.prototype._handleBlur=function(e){var n=this;window.setTimeout((function(){document.activeElement==n.$selection[0]||t.contains(n.$selection[0],document.activeElement)||n.trigger("blur",e)}),1)},i.prototype._attachCloseHandler=function(n){t(document.body).on("mousedown.select2."+n.id,(function(n){var i=t(n.target).closest(".select2");t(".select2.select2-container--open").each((function(){this!=i[0]&&e.GetData(this,"element").select2("close")}))}))},i.prototype._detachCloseHandler=function(e){t(document.body).off("mousedown.select2."+e.id)},i.prototype.position=function(t,e){e.find(".selection").append(t)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(t){throw new Error("The `update` method must be defined in child classes.")},i})),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],(function(t,e,n,i){function o(){o.__super__.constructor.apply(this,arguments)}return n.Extend(o,e),o.prototype.render=function(){var t=o.__super__.render.call(this);return t.addClass("select2-selection--single"),t.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),t},o.prototype.bind=function(t,e){var n=this;o.__super__.bind.apply(this,arguments);var i=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",(function(t){1===t.which&&n.trigger("toggle",{originalEvent:t})})),this.$selection.on("focus",(function(t){})),this.$selection.on("blur",(function(t){})),t.on("focus",(function(e){t.isOpen()||n.$selection.trigger("focus")}))},o.prototype.clear=function(){var t=this.$selection.find(".select2-selection__rendered");t.empty(),t.removeAttr("title")},o.prototype.display=function(t,e){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(t,e))},o.prototype.selectionContainer=function(){return t("<span></span>")},o.prototype.update=function(t){if(0!==t.length){var e=t[0],n=this.$selection.find(".select2-selection__rendered"),i=this.display(e,n);n.empty().append(i);var o=e.title||e.text;o?n.attr("title",o):n.removeAttr("title")}else this.clear()},o})),e.define("select2/selection/multiple",["jquery","./base","../utils"],(function(t,e,n){function i(t,e){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,e),i.prototype.render=function(){var t=i.__super__.render.call(this);return t.addClass("select2-selection--multiple"),t.html('<ul class="select2-selection__rendered"></ul>'),t},i.prototype.bind=function(e,o){var a=this;i.__super__.bind.apply(this,arguments),this.$selection.on("click",(function(t){a.trigger("toggle",{originalEvent:t})})),this.$selection.on("click",".select2-selection__choice__remove",(function(e){if(!a.options.get("disabled")){var i=t(this).parent(),o=n.GetData(i[0],"data");a.trigger("unselect",{originalEvent:e,data:o})}}))},i.prototype.clear=function(){var t=this.$selection.find(".select2-selection__rendered");t.empty(),t.removeAttr("title")},i.prototype.display=function(t,e){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(t,e))},i.prototype.selectionContainer=function(){return t('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},i.prototype.update=function(t){if(this.clear(),0!==t.length){for(var e=[],i=0;i<t.length;i++){var o=t[i],a=this.selectionContainer(),r=this.display(o,a);a.append(r);var s=o.title||o.text;s&&a.attr("title",s),n.StoreData(a[0],"data",o),e.push(a)}var l=this.$selection.find(".select2-selection__rendered");n.appendMany(l,e)}},i})),e.define("select2/selection/placeholder",["../utils"],(function(t){function e(t,e,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),t.call(this,e,n)}return e.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},e.prototype.createPlaceholder=function(t,e){var n=this.selectionContainer();return n.html(this.display(e)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},e.prototype.update=function(t,e){var n=1==e.length&&e[0].id!=this.placeholder.id;if(1<e.length||n)return t.call(this,e);this.clear();var i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},e})),e.define("select2/selection/allowClear",["jquery","../keys","../utils"],(function(t,e,n){function i(){}return i.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",(function(t){i._handleClear(t)})),e.on("keypress",(function(t){i._handleKeyboardClear(t,e)}))},i.prototype._handleClear=function(t,e){if(!this.options.get("disabled")){var i=this.$selection.find(".select2-selection__clear");if(0!==i.length){e.stopPropagation();var o=n.GetData(i[0],"data"),a=this.$element.val();this.$element.val(this.placeholder.id);var r={data:o};if(this.trigger("clear",r),r.prevented)this.$element.val(a);else{for(var s=0;s<o.length;s++)if(r={data:o[s]},this.trigger("unselect",r),r.prevented)return void this.$element.val(a);this.$element.trigger("change"),this.trigger("toggle",{})}}}},i.prototype._handleKeyboardClear=function(t,n,i){i.isOpen()||n.which!=e.DELETE&&n.which!=e.BACKSPACE||this._handleClear(n)},i.prototype.update=function(e,i){if(e.call(this,i),!(0<this.$selection.find(".select2-selection__placeholder").length||0===i.length)){var o=this.options.get("translations").get("removeAllItems"),a=t('<span class="select2-selection__clear" title="'+o()+'">&times;</span>');n.StoreData(a[0],"data",i),this.$selection.find(".select2-selection__rendered").prepend(a)}},i})),e.define("select2/selection/search",["jquery","../utils","../keys"],(function(t,e,n){function i(t,e,n){t.call(this,e,n)}return i.prototype.render=function(e){var n=t('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></li>');this.$searchContainer=n,this.$search=n.find("input");var i=e.call(this);return this._transferTabIndex(),i},i.prototype.bind=function(t,i,o){var a=this,r=i.id+"-results";t.call(this,i,o),i.on("open",(function(){a.$search.attr("aria-controls",r),a.$search.trigger("focus")})),i.on("close",(function(){a.$search.val(""),a.$search.removeAttr("aria-controls"),a.$search.removeAttr("aria-activedescendant"),a.$search.trigger("focus")})),i.on("enable",(function(){a.$search.prop("disabled",!1),a._transferTabIndex()})),i.on("disable",(function(){a.$search.prop("disabled",!0)})),i.on("focus",(function(t){a.$search.trigger("focus")})),i.on("results:focus",(function(t){t.data._resultId?a.$search.attr("aria-activedescendant",t.data._resultId):a.$search.removeAttr("aria-activedescendant")})),this.$selection.on("focusin",".select2-search--inline",(function(t){a.trigger("focus",t)})),this.$selection.on("focusout",".select2-search--inline",(function(t){a._handleBlur(t)})),this.$selection.on("keydown",".select2-search--inline",(function(t){if(t.stopPropagation(),a.trigger("keypress",t),a._keyUpPrevented=t.isDefaultPrevented(),t.which===n.BACKSPACE&&""===a.$search.val()){var i=a.$searchContainer.prev(".select2-selection__choice");if(0<i.length){var o=e.GetData(i[0],"data");a.searchRemoveChoice(o),t.preventDefault()}}})),this.$selection.on("click",".select2-search--inline",(function(t){a.$search.val()&&t.stopPropagation()}));var s=document.documentMode,l=s&&s<=11;this.$selection.on("input.searchcheck",".select2-search--inline",(function(t){l?a.$selection.off("input.search input.searchcheck"):a.$selection.off("keyup.search")})),this.$selection.on("keyup.search input.search",".select2-search--inline",(function(t){if(l&&"input"===t.type)a.$selection.off("input.search input.searchcheck");else{var e=t.which;e!=n.SHIFT&&e!=n.CTRL&&e!=n.ALT&&e!=n.TAB&&a.handleSearch(t)}}))},i.prototype._transferTabIndex=function(t){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},i.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)},i.prototype.update=function(t,e){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),t.call(this,e),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.trigger("focus")},i.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},i.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e}),this.$search.val(e.text),this.handleSearch()},i.prototype.resizeSearch=function(){this.$search.css("width","25px");var t="";t=""!==this.$search.attr("placeholder")?this.$selection.find(".select2-selection__rendered").width():.75*(this.$search.val().length+1)+"em",this.$search.css("width",t)},i})),e.define("select2/selection/eventRelay",["jquery"],(function(t){function e(){}return e.prototype.bind=function(e,n,i){var o=this,a=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],r=["opening","closing","selecting","unselecting","clearing"];e.call(this,n,i),n.on("*",(function(e,n){if(-1!==t.inArray(e,a)){n=n||{};var i=t.Event("select2:"+e,{params:n});o.$element.trigger(i),-1!==t.inArray(e,r)&&(n.prevented=i.isDefaultPrevented())}}))},e})),e.define("select2/translation",["jquery","require"],(function(t,e){function n(t){this.dict=t||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(t){return this.dict[t]},n.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},n._cache={},n.loadPath=function(t){if(!(t in n._cache)){var i=e(t);n._cache[t]=i}return new n(n._cache[t])},n})),e.define("select2/diacritics",[],(function(){return{"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OE","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oe","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"'"}})),e.define("select2/data/base",["../utils"],(function(t){function e(t,n){e.__super__.constructor.call(this)}return t.Extend(e,t.Observable),e.prototype.current=function(t){throw new Error("The `current` method must be defined in child classes.")},e.prototype.query=function(t,e){throw new Error("The `query` method must be defined in child classes.")},e.prototype.bind=function(t,e){},e.prototype.destroy=function(){},e.prototype.generateResultId=function(e,n){var i=e.id+"-result-";return i+=t.generateChars(4),null!=n.id?i+="-"+n.id.toString():i+="-"+t.generateChars(4),i},e})),e.define("select2/data/select",["./base","../utils","jquery"],(function(t,e,n){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,t),i.prototype.current=function(t){var e=[],i=this;this.$element.find(":selected").each((function(){var t=n(this),o=i.item(t);e.push(o)})),t(e)},i.prototype.select=function(t){var e=this;if(t.selected=!0,n(t.element).is("option"))return t.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current((function(i){var o=[];(t=[t]).push.apply(t,i);for(var a=0;a<t.length;a++){var r=t[a].id;-1===n.inArray(r,o)&&o.push(r)}e.$element.val(o),e.$element.trigger("change")}));else{var i=t.id;this.$element.val(i),this.$element.trigger("change")}},i.prototype.unselect=function(t){var e=this;if(this.$element.prop("multiple")){if(t.selected=!1,n(t.element).is("option"))return t.element.selected=!1,void this.$element.trigger("change");this.current((function(i){for(var o=[],a=0;a<i.length;a++){var r=i[a].id;r!==t.id&&-1===n.inArray(r,o)&&o.push(r)}e.$element.val(o),e.$element.trigger("change")}))}},i.prototype.bind=function(t,e){var n=this;(this.container=t).on("select",(function(t){n.select(t.data)})),t.on("unselect",(function(t){n.unselect(t.data)}))},i.prototype.destroy=function(){this.$element.find("*").each((function(){e.RemoveData(this)}))},i.prototype.query=function(t,e){var i=[],o=this;this.$element.children().each((function(){var e=n(this);if(e.is("option")||e.is("optgroup")){var a=o.item(e),r=o.matches(t,a);null!==r&&i.push(r)}})),e({results:i})},i.prototype.addOptions=function(t){e.appendMany(this.$element,t)},i.prototype.option=function(t){var i;t.children?(i=document.createElement("optgroup")).label=t.text:void 0!==(i=document.createElement("option")).textContent?i.textContent=t.text:i.innerText=t.text,void 0!==t.id&&(i.value=t.id),t.disabled&&(i.disabled=!0),t.selected&&(i.selected=!0),t.title&&(i.title=t.title);var o=n(i),a=this._normalizeItem(t);return a.element=i,e.StoreData(i,"data",a),o},i.prototype.item=function(t){var i={};if(null!=(i=e.GetData(t[0],"data")))return i;if(t.is("option"))i={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")};else if(t.is("optgroup")){i={text:t.prop("label"),children:[],title:t.prop("title")};for(var o=t.children("option"),a=[],r=0;r<o.length;r++){var s=n(o[r]),l=this.item(s);a.push(l)}i.children=a}return(i=this._normalizeItem(i)).element=t[0],e.StoreData(t[0],"data",i),i},i.prototype._normalizeItem=function(t){return t!==Object(t)&&(t={id:t,text:t}),null!=(t=n.extend({},{text:""},t)).id&&(t.id=t.id.toString()),null!=t.text&&(t.text=t.text.toString()),null==t._resultId&&t.id&&null!=this.container&&(t._resultId=this.generateResultId(this.container,t)),n.extend({},{selected:!1,disabled:!1},t)},i.prototype.matches=function(t,e){return this.options.get("matcher")(t,e)},i})),e.define("select2/data/array",["./select","../utils","jquery"],(function(t,e,n){function i(t,e){this._dataToConvert=e.get("data")||[],i.__super__.constructor.call(this,t,e)}return e.Extend(i,t),i.prototype.bind=function(t,e){i.__super__.bind.call(this,t,e),this.addOptions(this.convertToOptions(this._dataToConvert))},i.prototype.select=function(t){var e=this.$element.find("option").filter((function(e,n){return n.value==t.id.toString()}));0===e.length&&(e=this.option(t),this.addOptions(e)),i.__super__.select.call(this,t)},i.prototype.convertToOptions=function(t){var i=this,o=this.$element.find("option"),a=o.map((function(){return i.item(n(this)).id})).get(),r=[];function s(t){return function(){return n(this).val()==t.id}}for(var l=0;l<t.length;l++){var c=this._normalizeItem(t[l]);if(0<=n.inArray(c.id,a)){var d=o.filter(s(c)),h=this.item(d),u=n.extend(!0,{},c,h),p=this.option(u);d.replaceWith(p)}else{var f=this.option(c);if(c.children){var m=this.convertToOptions(c.children);e.appendMany(f,m)}r.push(f)}}return r},i})),e.define("select2/data/ajax",["./array","../utils","jquery"],(function(t,e,n){function i(t,e){this.ajaxOptions=this._applyDefaults(e.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),i.__super__.constructor.call(this,t,e)}return e.Extend(i,t),i.prototype._applyDefaults=function(t){var e={data:function(t){return n.extend({},t,{q:t.term})},transport:function(t,e,i){var o=n.ajax(t);return o.then(e),o.fail(i),o}};return n.extend({},e,t,!0)},i.prototype.processResults=function(t){return t},i.prototype.query=function(t,e){var i=this;null!=this._request&&(n.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var o=n.extend({type:"GET"},this.ajaxOptions);function a(){var a=o.transport(o,(function(o){var a=i.processResults(o,t);i.options.get("debug")&&window.console&&console.error&&(a&&a.results&&n.isArray(a.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),e(a)}),(function(){"status"in a&&(0===a.status||"0"===a.status)||i.trigger("results:message",{message:"errorLoading"})}));i._request=a}"function"==typeof o.url&&(o.url=o.url.call(this.$element,t)),"function"==typeof o.data&&(o.data=o.data.call(this.$element,t)),this.ajaxOptions.delay&&null!=t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(a,this.ajaxOptions.delay)):a()},i})),e.define("select2/data/tags",["jquery"],(function(t){function e(e,n,i){var o=i.get("tags"),a=i.get("createTag");void 0!==a&&(this.createTag=a);var r=i.get("insertTag");if(void 0!==r&&(this.insertTag=r),e.call(this,n,i),t.isArray(o))for(var s=0;s<o.length;s++){var l=o[s],c=this._normalizeItem(l),d=this.option(c);this.$element.append(d)}}return e.prototype.query=function(t,e,n){var i=this;this._removeOldTags(),null!=e.term&&null==e.page?t.call(this,e,(function t(o,a){for(var r=o.results,s=0;s<r.length;s++){var l=r[s],c=null!=l.children&&!t({results:l.children},!0);if((l.text||"").toUpperCase()===(e.term||"").toUpperCase()||c)return!a&&(o.data=r,void n(o))}if(a)return!0;var d=i.createTag(e);if(null!=d){var h=i.option(d);h.attr("data-select2-tag",!0),i.addOptions([h]),i.insertTag(r,d)}o.results=r,n(o)})):t.call(this,e,n)},e.prototype.createTag=function(e,n){var i=t.trim(n.term);return""===i?null:{id:i,text:i}},e.prototype.insertTag=function(t,e,n){e.unshift(n)},e.prototype._removeOldTags=function(e){this.$element.find("option[data-select2-tag]").each((function(){this.selected||t(this).remove()}))},e})),e.define("select2/data/tokenizer",["jquery"],(function(t){function e(t,e,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),t.call(this,e,n)}return e.prototype.bind=function(t,e,n){t.call(this,e,n),this.$search=e.dropdown.$search||e.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(e,n,i){var o=this;n.term=n.term||"";var a=this.tokenizer(n,this.options,(function(e){var n=o._normalizeItem(e);if(!o.$element.find("option").filter((function(){return t(this).val()===n.id})).length){var i=o.option(n);i.attr("data-select2-tag",!0),o._removeOldTags(),o.addOptions([i])}!function(t){o.trigger("select",{data:t})}(n)}));a.term!==n.term&&(this.$search.length&&(this.$search.val(a.term),this.$search.trigger("focus")),n.term=a.term),e.call(this,n,i)},e.prototype.tokenizer=function(e,n,i,o){for(var a=i.get("tokenSeparators")||[],r=n.term,s=0,l=this.createTag||function(t){return{id:t.term,text:t.term}};s<r.length;){var c=r[s];if(-1!==t.inArray(c,a)){var d=r.substr(0,s),h=l(t.extend({},n,{term:d}));null!=h?(o(h),r=r.substr(s+1)||"",s=0):s++}else s++}return{term:r}},e})),e.define("select2/data/minimumInputLength",[],(function(){function t(t,e,n){this.minimumInputLength=n.get("minimumInputLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){e.term=e.term||"",e.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:e.term,params:e}}):t.call(this,e,n)},t})),e.define("select2/data/maximumInputLength",[],(function(){function t(t,e,n){this.maximumInputLength=n.get("maximumInputLength"),t.call(this,e,n)}return t.prototype.query=function(t,e,n){e.term=e.term||"",0<this.maximumInputLength&&e.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}}):t.call(this,e,n)},t})),e.define("select2/data/maximumSelectionLength",[],(function(){function t(t,e,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),t.call(this,e,n)}return t.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("select",(function(){i._checkIfMaximumSelected()}))},t.prototype.query=function(t,e,n){var i=this;this._checkIfMaximumSelected((function(){t.call(i,e,n)}))},t.prototype._checkIfMaximumSelected=function(t,e){var n=this;this.current((function(t){var i=null!=t?t.length:0;0<n.maximumSelectionLength&&i>=n.maximumSelectionLength?n.trigger("results:message",{message:"maximumSelected",args:{maximum:n.maximumSelectionLength}}):e&&e()}))},t})),e.define("select2/dropdown",["jquery","./utils"],(function(t,e){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e},n.prototype.bind=function(){},n.prototype.position=function(t,e){},n.prototype.destroy=function(){this.$dropdown.remove()},n})),e.define("select2/dropdown/search",["jquery","../utils"],(function(t,e){function n(){}return n.prototype.render=function(e){var n=e.call(this),i=t('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),n.prepend(i),n},n.prototype.bind=function(e,n,i){var o=this,a=n.id+"-results";e.call(this,n,i),this.$search.on("keydown",(function(t){o.trigger("keypress",t),o._keyUpPrevented=t.isDefaultPrevented()})),this.$search.on("input",(function(e){t(this).off("keyup")})),this.$search.on("keyup input",(function(t){o.handleSearch(t)})),n.on("open",(function(){o.$search.attr("tabindex",0),o.$search.attr("aria-controls",a),o.$search.trigger("focus"),window.setTimeout((function(){o.$search.trigger("focus")}),0)})),n.on("close",(function(){o.$search.attr("tabindex",-1),o.$search.removeAttr("aria-controls"),o.$search.removeAttr("aria-activedescendant"),o.$search.val(""),o.$search.trigger("blur")})),n.on("focus",(function(){n.isOpen()||o.$search.trigger("focus")})),n.on("results:all",(function(t){null!=t.query.term&&""!==t.query.term||(o.showSearch(t)?o.$searchContainer.removeClass("select2-search--hide"):o.$searchContainer.addClass("select2-search--hide"))})),n.on("results:focus",(function(t){t.data._resultId?o.$search.attr("aria-activedescendant",t.data._resultId):o.$search.removeAttr("aria-activedescendant")}))},n.prototype.handleSearch=function(t){if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},n.prototype.showSearch=function(t,e){return!0},n})),e.define("select2/dropdown/hidePlaceholder",[],(function(){function t(t,e,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),t.call(this,e,n,i)}return t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results),t.call(this,e)},t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.removePlaceholder=function(t,e){for(var n=e.slice(0),i=e.length-1;0<=i;i--){var o=e[i];this.placeholder.id===o.id&&n.splice(i,1)}return n},t})),e.define("select2/dropdown/infiniteScroll",["jquery"],(function(t){function e(t,e,n,i){this.lastParams={},t.call(this,e,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(t,e){this.$loadingMore.remove(),this.loading=!1,t.call(this,e),this.showLoadingMore(e)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},e.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("query",(function(t){i.lastParams=t,i.loading=!0})),e.on("query:append",(function(t){i.lastParams=t,i.loading=!0})),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},e.prototype.loadMoreIfNeeded=function(){var e=t.contains(document.documentElement,this.$loadingMore[0]);if(!this.loading&&e){var n=this.$results.offset().top+this.$results.outerHeight(!1);this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)<=n+50&&this.loadMore()}},e.prototype.loadMore=function(){this.loading=!0;var e=t.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more},e.prototype.createLoadingMore=function(){var e=t('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),n=this.options.get("translations").get("loadingMore");return e.html(n(this.lastParams)),e},e})),e.define("select2/dropdown/attachBody",["jquery","../utils"],(function(t,e){function n(e,n,i){this.$dropdownParent=t(i.get("dropdownParent")||document.body),e.call(this,n,i)}return n.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("open",(function(){i._showDropdown(),i._attachPositioningHandler(e),i._bindContainerResultHandlers(e)})),e.on("close",(function(){i._hideDropdown(),i._detachPositioningHandler(e)})),this.$dropdownContainer.on("mousedown",(function(t){t.stopPropagation()}))},n.prototype.destroy=function(t){t.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(t,e,n){e.attr("class",n.attr("class")),e.removeClass("select2"),e.addClass("select2-container--open"),e.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(e){var n=t("<span></span>"),i=e.call(this);return n.append(i),this.$dropdownContainer=n},n.prototype._hideDropdown=function(t){this.$dropdownContainer.detach()},n.prototype._bindContainerResultHandlers=function(t,e){if(!this._containerResultsHandlersBound){var n=this;e.on("results:all",(function(){n._positionDropdown(),n._resizeDropdown()})),e.on("results:append",(function(){n._positionDropdown(),n._resizeDropdown()})),e.on("results:message",(function(){n._positionDropdown(),n._resizeDropdown()})),e.on("select",(function(){n._positionDropdown(),n._resizeDropdown()})),e.on("unselect",(function(){n._positionDropdown(),n._resizeDropdown()})),this._containerResultsHandlersBound=!0}},n.prototype._attachPositioningHandler=function(n,i){var o=this,a="scroll.select2."+i.id,r="resize.select2."+i.id,s="orientationchange.select2."+i.id,l=this.$container.parents().filter(e.hasScroll);l.each((function(){e.StoreData(this,"select2-scroll-position",{x:t(this).scrollLeft(),y:t(this).scrollTop()})})),l.on(a,(function(n){var i=e.GetData(this,"select2-scroll-position");t(this).scrollTop(i.y)})),t(window).on(a+" "+r+" "+s,(function(t){o._positionDropdown(),o._resizeDropdown()}))},n.prototype._detachPositioningHandler=function(n,i){var o="scroll.select2."+i.id,a="resize.select2."+i.id,r="orientationchange.select2."+i.id;this.$container.parents().filter(e.hasScroll).off(o),t(window).off(o+" "+a+" "+r)},n.prototype._positionDropdown=function(){var e=t(window),n=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),o=null,a=this.$container.offset();a.bottom=a.top+this.$container.outerHeight(!1);var r={height:this.$container.outerHeight(!1)};r.top=a.top,r.bottom=a.top+r.height;var s=this.$dropdown.outerHeight(!1),l=e.scrollTop(),c=e.scrollTop()+e.height(),d=l<a.top-s,h=c>a.bottom+s,u={left:a.left,top:r.bottom},p=this.$dropdownParent;"static"===p.css("position")&&(p=p.offsetParent());var f=p.offset();u.top-=f.top,u.left-=f.left,n||i||(o="below"),h||!d||n?!d&&h&&n&&(o="below"):o="above",("above"==o||n&&"below"!==o)&&(u.top=r.top-f.top-s),null!=o&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+o),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+o)),this.$dropdownContainer.css(u)},n.prototype._resizeDropdown=function(){var t={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(t.minWidth=t.width,t.position="relative",t.width="auto"),this.$dropdown.css(t)},n.prototype._showDropdown=function(t){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n})),e.define("select2/dropdown/minimumResultsForSearch",[],(function(){function t(t,e,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),t.call(this,e,n,i)}return t.prototype.showSearch=function(t,e){return!(function t(e){for(var n=0,i=0;i<e.length;i++){var o=e[i];o.children?n+=t(o.children):n++}return n}(e.data.results)<this.minimumResultsForSearch)&&t.call(this,e)},t})),e.define("select2/dropdown/selectOnClose",["../utils"],(function(t){function e(){}return e.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("close",(function(t){i._handleSelectOnClose(t)}))},e.prototype._handleSelectOnClose=function(e,n){if(n&&null!=n.originalSelect2Event){var i=n.originalSelect2Event;if("select"===i._type||"unselect"===i._type)return}var o=this.getHighlightedResults();if(!(o.length<1)){var a=t.GetData(o[0],"data");null!=a.element&&a.element.selected||null==a.element&&a.selected||this.trigger("select",{data:a})}},e})),e.define("select2/dropdown/closeOnSelect",[],(function(){function t(){}return t.prototype.bind=function(t,e,n){var i=this;t.call(this,e,n),e.on("select",(function(t){i._selectTriggered(t)})),e.on("unselect",(function(t){i._selectTriggered(t)}))},t.prototype._selectTriggered=function(t,e){var n=e.originalEvent;n&&(n.ctrlKey||n.metaKey)||this.trigger("close",{originalEvent:n,originalSelect2Event:e})},t})),e.define("select2/i18n/en",[],(function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum,n="Please delete "+e+" character";return 1!=e&&(n+="s"),n},inputTooShort:function(t){return"Please enter "+(t.minimum-t.input.length)+" or more characters"},loadingMore:function(){return"Loading more results"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";return 1!=t.maximum&&(e+="s"),e},noResults:function(){return"No results found"},searching:function(){return"Searching"},removeAllItems:function(){return"Remove all items"}}})),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],(function(t,e,n,i,o,a,r,s,l,c,d,h,u,p,f,m,g,v,b,y,w,D,C,x,k,S,_,T,A){function I(){this.reset()}return I.prototype.apply=function(d){if(null==(d=t.extend(!0,{},this.defaults,d)).dataAdapter){if(null!=d.ajax?d.dataAdapter=f:null!=d.data?d.dataAdapter=p:d.dataAdapter=u,0<d.minimumInputLength&&(d.dataAdapter=c.Decorate(d.dataAdapter,v)),0<d.maximumInputLength&&(d.dataAdapter=c.Decorate(d.dataAdapter,b)),0<d.maximumSelectionLength&&(d.dataAdapter=c.Decorate(d.dataAdapter,y)),d.tags&&(d.dataAdapter=c.Decorate(d.dataAdapter,m)),null==d.tokenSeparators&&null==d.tokenizer||(d.dataAdapter=c.Decorate(d.dataAdapter,g)),null!=d.query){var h=e(d.amdBase+"compat/query");d.dataAdapter=c.Decorate(d.dataAdapter,h)}if(null!=d.initSelection){var A=e(d.amdBase+"compat/initSelection");d.dataAdapter=c.Decorate(d.dataAdapter,A)}}if(null==d.resultsAdapter&&(d.resultsAdapter=n,null!=d.ajax&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,x)),null!=d.placeholder&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,C)),d.selectOnClose&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,_))),null==d.dropdownAdapter){if(d.multiple)d.dropdownAdapter=w;else{var I=c.Decorate(w,D);d.dropdownAdapter=I}if(0!==d.minimumResultsForSearch&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,S)),d.closeOnSelect&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,T)),null!=d.dropdownCssClass||null!=d.dropdownCss||null!=d.adaptDropdownCssClass){var $=e(d.amdBase+"compat/dropdownCss");d.dropdownAdapter=c.Decorate(d.dropdownAdapter,$)}d.dropdownAdapter=c.Decorate(d.dropdownAdapter,k)}if(null==d.selectionAdapter){if(d.multiple?d.selectionAdapter=o:d.selectionAdapter=i,null!=d.placeholder&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,a)),d.allowClear&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,r)),d.multiple&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,s)),null!=d.containerCssClass||null!=d.containerCss||null!=d.adaptContainerCssClass){var E=e(d.amdBase+"compat/containerCss");d.selectionAdapter=c.Decorate(d.selectionAdapter,E)}d.selectionAdapter=c.Decorate(d.selectionAdapter,l)}d.language=this._resolveLanguage(d.language),d.language.push("en");for(var P=[],L=0;L<d.language.length;L++){var M=d.language[L];-1===P.indexOf(M)&&P.push(M)}return d.language=P,d.translations=this._processTranslations(d.language,d.debug),d},I.prototype.reset=function(){function e(t){return t.replace(/[^\u0000-\u007E]/g,(function(t){return h[t]||t}))}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:{},matcher:function n(i,o){if(""===t.trim(i.term))return o;if(o.children&&0<o.children.length){for(var a=t.extend(!0,{},o),r=o.children.length-1;0<=r;r--)null==n(i,o.children[r])&&a.children.splice(r,1);return 0<a.children.length?a:n(i,a)}var s=e(o.text).toUpperCase(),l=e(i.term).toUpperCase();return-1<s.indexOf(l)?o:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}},I.prototype.applyFromElement=function(t,e){var n=t.language,i=this.defaults.language,o=e.prop("lang"),a=e.closest("[lang]").prop("lang"),r=Array.prototype.concat.call(this._resolveLanguage(o),this._resolveLanguage(n),this._resolveLanguage(i),this._resolveLanguage(a));return t.language=r,t},I.prototype._resolveLanguage=function(e){if(!e)return[];if(t.isEmptyObject(e))return[];if(t.isPlainObject(e))return[e];var n;n=t.isArray(e)?e:[e];for(var i=[],o=0;o<n.length;o++)if(i.push(n[o]),"string"==typeof n[o]&&0<n[o].indexOf("-")){var a=n[o].split("-")[0];i.push(a)}return i},I.prototype._processTranslations=function(e,n){for(var i=new d,o=0;o<e.length;o++){var a=new d,r=e[o];if("string"==typeof r)try{a=d.loadPath(r)}catch(e){try{r=this.defaults.amdLanguageBase+r,a=d.loadPath(r)}catch(e){n&&window.console&&console.warn&&console.warn('Select2: The language file for "'+r+'" could not be automatically loaded. A fallback will be used instead.')}}else a=t.isPlainObject(r)?new d(r):r;i.extend(a)}return i},I.prototype.set=function(e,n){var i={};i[t.camelCase(e)]=n;var o=c._convertData(i);t.extend(!0,this.defaults,o)},new I})),e.define("select2/options",["require","jquery","./defaults","./utils"],(function(t,e,n,i){function o(e,o){if(this.options=e,null!=o&&this.fromElement(o),null!=o&&(this.options=n.applyFromElement(this.options,o)),this.options=n.apply(this.options),o&&o.is("input")){var a=t(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=i.Decorate(this.options.dataAdapter,a)}}return o.prototype.fromElement=function(t){var n=["select2"];null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.dir&&(t.prop("dir")?this.options.dir=t.prop("dir"):t.closest("[dir]").prop("dir")?this.options.dir=t.closest("[dir]").prop("dir"):this.options.dir="ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),i.GetData(t[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),i.StoreData(t[0],"data",i.GetData(t[0],"select2Tags")),i.StoreData(t[0],"tags",!0)),i.GetData(t[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",i.GetData(t[0],"ajaxUrl")),i.StoreData(t[0],"ajax-Url",i.GetData(t[0],"ajaxUrl")));var o={};function a(t,e){return e.toUpperCase()}for(var r=0;r<t[0].attributes.length;r++){var s=t[0].attributes[r].name,l="data-";if(s.substr(0,l.length)==l){var c=s.substring(l.length),d=i.GetData(t[0],c);o[c.replace(/-([a-z])/g,a)]=d}}e.fn.jquery&&"1."==e.fn.jquery.substr(0,2)&&t[0].dataset&&(o=e.extend(!0,{},t[0].dataset,o));var h=e.extend(!0,{},i.GetData(t[0]),o);for(var u in h=i._convertData(h))-1<e.inArray(u,n)||(e.isPlainObject(this.options[u])?e.extend(this.options[u],h[u]):this.options[u]=h[u]);return this},o.prototype.get=function(t){return this.options[t]},o.prototype.set=function(t,e){this.options[t]=e},o})),e.define("select2/core",["jquery","./options","./utils","./keys"],(function(t,e,n,i){var o=function(t,i){null!=n.GetData(t[0],"select2")&&n.GetData(t[0],"select2").destroy(),this.$element=t,this.id=this._generateId(t),i=i||{},this.options=new e(i,t),o.__super__.constructor.call(this);var a=t.attr("tabindex")||0;n.StoreData(t[0],"old-tabindex",a),t.attr("tabindex","-1");var r=this.options.get("dataAdapter");this.dataAdapter=new r(t,this.options);var s=this.render();this._placeContainer(s);var l=this.options.get("selectionAdapter");this.selection=new l(t,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,s);var c=this.options.get("dropdownAdapter");this.dropdown=new c(t,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,s);var d=this.options.get("resultsAdapter");this.results=new d(t,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var h=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current((function(t){h.trigger("selection:update",{data:t})})),t.addClass("select2-hidden-accessible"),t.attr("aria-hidden","true"),this._syncAttributes(),n.StoreData(t[0],"select2",this),t.data("select2",this)};return n.Extend(o,n.Observable),o.prototype._generateId=function(t){return"select2-"+(null!=t.attr("id")?t.attr("id"):null!=t.attr("name")?t.attr("name")+"-"+n.generateChars(2):n.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},o.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));null!=e&&t.css("width",e)},o.prototype._resolveWidth=function(t,e){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==e){var i=this._resolveWidth(t,"style");return null!=i?i:this._resolveWidth(t,"element")}if("element"==e){var o=t.outerWidth(!1);return o<=0?"auto":o+"px"}if("style"!=e)return"computedstyle"!=e?e:window.getComputedStyle(t[0]).width;var a=t.attr("style");if("string"!=typeof a)return null;for(var r=a.split(";"),s=0,l=r.length;s<l;s+=1){var c=r[s].replace(/\s/g,"").match(n);if(null!==c&&1<=c.length)return c[1]}return null},o.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},o.prototype._registerDomEvents=function(){var e=this;this.$element.on("change.select2",(function(){e.dataAdapter.current((function(t){e.trigger("selection:update",{data:t})}))})),this.$element.on("focus.select2",(function(t){e.trigger("focus",t)})),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=i?(this._observer=new i((function(n){t.each(n,e._syncA),t.each(n,e._syncS)})),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",e._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",e._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",e._syncS,!1))},o.prototype._registerDataEvents=function(){var t=this;this.dataAdapter.on("*",(function(e,n){t.trigger(e,n)}))},o.prototype._registerSelectionEvents=function(){var e=this,n=["toggle","focus"];this.selection.on("toggle",(function(){e.toggleDropdown()})),this.selection.on("focus",(function(t){e.focus(t)})),this.selection.on("*",(function(i,o){-1===t.inArray(i,n)&&e.trigger(i,o)}))},o.prototype._registerDropdownEvents=function(){var t=this;this.dropdown.on("*",(function(e,n){t.trigger(e,n)}))},o.prototype._registerResultsEvents=function(){var t=this;this.results.on("*",(function(e,n){t.trigger(e,n)}))},o.prototype._registerEvents=function(){var t=this;this.on("open",(function(){t.$container.addClass("select2-container--open")})),this.on("close",(function(){t.$container.removeClass("select2-container--open")})),this.on("enable",(function(){t.$container.removeClass("select2-container--disabled")})),this.on("disable",(function(){t.$container.addClass("select2-container--disabled")})),this.on("blur",(function(){t.$container.removeClass("select2-container--focus")})),this.on("query",(function(e){t.isOpen()||t.trigger("open",{}),this.dataAdapter.query(e,(function(n){t.trigger("results:all",{data:n,query:e})}))})),this.on("query:append",(function(e){this.dataAdapter.query(e,(function(n){t.trigger("results:append",{data:n,query:e})}))})),this.on("keypress",(function(e){var n=e.which;t.isOpen()?n===i.ESC||n===i.TAB||n===i.UP&&e.altKey?(t.close(),e.preventDefault()):n===i.ENTER?(t.trigger("results:select",{}),e.preventDefault()):n===i.SPACE&&e.ctrlKey?(t.trigger("results:toggle",{}),e.preventDefault()):n===i.UP?(t.trigger("results:previous",{}),e.preventDefault()):n===i.DOWN&&(t.trigger("results:next",{}),e.preventDefault()):(n===i.ENTER||n===i.SPACE||n===i.DOWN&&e.altKey)&&(t.open(),e.preventDefault())}))},o.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},o.prototype._syncSubtree=function(t,e){var n=!1,i=this;if(!t||!t.target||"OPTION"===t.target.nodeName||"OPTGROUP"===t.target.nodeName){if(e)if(e.addedNodes&&0<e.addedNodes.length)for(var o=0;o<e.addedNodes.length;o++)e.addedNodes[o].selected&&(n=!0);else e.removedNodes&&0<e.removedNodes.length&&(n=!0);else n=!0;n&&this.dataAdapter.current((function(t){i.trigger("selection:update",{data:t})}))}},o.prototype.trigger=function(t,e){var n=o.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===e&&(e={}),t in i){var a=i[t],r={prevented:!1,name:t,args:e};if(n.call(this,a,r),r.prevented)return void(e.prevented=!0)}n.call(this,t,e)},o.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},o.prototype.open=function(){this.isOpen()||this.trigger("query",{})},o.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},o.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},o.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},o.prototype.focus=function(t){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},o.prototype.enable=function(t){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=t&&0!==t.length||(t=[!0]);var e=!t[0];this.$element.prop("disabled",e)},o.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current((function(e){t=e})),t},o.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var n=e[0];t.isArray(n)&&(n=t.map(n,(function(t){return t.toString()}))),this.$element.val(n).trigger("change")},o.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",n.GetData(this.$element[0],"old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),n.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},o.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),n.StoreData(e[0],"element",this.$element),e},o})),e.define("jquery-mousewheel",["jquery"],(function(t){return t})),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],(function(t,e,n,i,o){if(null==t.fn.select2){var a=["open","close","destroy"];t.fn.select2=function(e){if("object"==typeof(e=e||{}))return this.each((function(){var i=t.extend(!0,{},e);new n(t(this),i)})),this;if("string"!=typeof e)throw new Error("Invalid arguments for Select2: "+e);var i,r=Array.prototype.slice.call(arguments,1);return this.each((function(){var t=o.GetData(this,"select2");null==t&&window.console&&console.error&&console.error("The select2('"+e+"') method was called on an element that is not using Select2."),i=t[e].apply(t,r)})),-1<t.inArray(e,a)?this:i}}return null==t.fn.select2.defaults&&(t.fn.select2.defaults=i),n})),{define:e.define,require:e.require}}(),n=e.require("jquery.select2");return t.fn.select2.amd=e,n})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e((t=t||self).jQuery)}(this,(function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e=function(){function e(t,e,n,i){this.markup=t,this.children=e,this.options=n,this.callback=i}return e.prototype.render=function(e){var n=t(this.markup);if(this.options&&this.options.contents&&n.html(this.options.contents),this.options&&this.options.className&&n.addClass(this.options.className),this.options&&this.options.data&&t.each(this.options.data,(function(t,e){n.attr("data-"+t,e)})),this.options&&this.options.click&&n.on("click",this.options.click),this.children){var i=n.find(".note-children-container");this.children.forEach((function(t){t.render(i.length?i:n)}))}return this.callback&&this.callback(n,this.options),this.options&&this.options.callback&&this.options.callback(n),e&&e.append(n),n},e}(),n=function(t,n){return function(){var i="object"==typeof arguments[1]?arguments[1]:arguments[0],o=Array.isArray(arguments[0])?arguments[0]:[];return i&&i.children&&(o=i.children),new e(t,o,i,n)}},i=n('<div class="note-editor note-frame panel panel-default"/>'),o=n('<div class="note-toolbar panel-heading" role="toolbar"></div></div>'),a=n('<div class="note-editing-area"/>'),r=n('<textarea class="note-codable" role="textbox" aria-multiline="true"/>'),s=n('<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/>'),l=n(['<output class="note-status-output" aria-live="polite"/>','<div class="note-statusbar" role="status">','  <div class="note-resizebar" role="seperator" aria-orientation="horizontal" aria-label="Resize">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join("")),c=n('<div class="note-editor"/>'),d=n(['<div class="note-editable" contentEditable="true" role="textbox" aria-multiline="true"/>','<output class="note-status-output" aria-live="polite"/>'].join("")),h=n('<div class="note-btn-group btn-group">'),u=n('<ul class="dropdown-menu" role="list">',(function(t,e){var n=Array.isArray(e.items)?e.items.map((function(t){var n="string"==typeof t?t:t.value||"",i=e.template?e.template(t):t,o="object"==typeof t?t.option:void 0;return'<li role="listitem" aria-label="'+n+'"><a href="#" '+('data-value="'+n+'"'+(void 0!==o?' data-option="'+o+'"':""))+">"+i+"</a></li>"})).join(""):e.items;t.html(n).attr({"aria-label":e.title})})),p=n('<ul class="dropdown-menu note-check" role="list">',(function(t,e){var n=Array.isArray(e.items)?e.items.map((function(t){var n="string"==typeof t?t:t.value||"",i=e.template?e.template(t):t;return'<li role="listitem" aria-label="'+t+'"><a href="#" data-value="'+n+'">'+b(e.checkClassName)+" "+i+"</a></li>"})).join(""):e.items;t.html(n).attr({"aria-label":e.title})})),f=n('<div class="note-color-palette"/>',(function(t,e){for(var n=[],i=0,o=e.colors.length;i<o;i++){for(var a=e.eventName,r=e.colors[i],s=e.colorsName[i],l=[],c=0,d=r.length;c<d;c++){var h=r[c],u=s[c];l.push(['<button type="button" class="note-color-btn"','style="background-color:',h,'" ','data-event="',a,'" ','data-value="',h,'" ','title="',u,'" ','aria-label="',u,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}n.push('<div class="note-color-row">'+l.join("")+"</div>")}t.html(n.join("")),e.tooltip&&t.find(".note-color-btn").tooltip({container:e.container,trigger:"hover",placement:"bottom"})})),m=n('<div class="modal" aria-hidden="false" tabindex="-1" role="dialog"/>',(function(t,e){e.fade&&t.addClass("fade"),t.attr({"aria-label":e.title}),t.html(['<div class="modal-dialog">','  <div class="modal-content">',e.title?'    <div class="modal-header">      <button type="button" class="close" data-dismiss="modal" aria-label="Close" aria-hidden="true">&times;</button>      <h4 class="modal-title">'+e.title+"</h4>    </div>":"",'    <div class="modal-body">'+e.body+"</div>",e.footer?'    <div class="modal-footer">'+e.footer+"</div>":"","  </div>","</div>"].join(""))})),g=n(['<div class="note-popover popover in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),(function(t,e){var n=void 0!==e.direction?e.direction:"bottom";t.addClass(n),e.hideArrow&&t.find(".arrow").hide()})),v=n('<div class="checkbox"></div>',(function(t,e){t.html(["<label"+(e.id?' for="'+e.id+'"':"")+">",' <input role="checkbox" type="checkbox"'+(e.id?' id="'+e.id+'"':""),e.checked?" checked":"",' aria-checked="'+(e.checked?"true":"false")+'"/>',e.text?e.text:"","</label>"].join(""))})),b=function(t,e){return"<"+(e=e||"i")+' class="'+t+'"/>'},y={editor:i,toolbar:o,editingArea:a,codable:r,editable:s,statusbar:l,airEditor:c,airEditable:d,buttonGroup:h,dropdown:u,dropdownButtonContents:function(t,e){return t+" "+b(e.icons.caret,"span")},dropdownCheck:p,palette:f,dialog:m,popover:g,checkbox:v,icon:b,options:{},button:function(e,i){return n('<button type="button" class="note-btn btn btn-default btn-sm" role="button" tabindex="-1">',(function(e,n){n&&n.tooltip&&e.attr({title:n.tooltip,"aria-label":n.tooltip}).tooltip({container:void 0!==n.container?n.container:"body",trigger:"hover",placement:"bottom"}).on("click",(function(e){t(e.currentTarget).tooltip("hide")}))}))(e,i)},toggleBtn:function(t,e){t.toggleClass("disabled",!e),t.attr("disabled",!e)},toggleBtnActive:function(t,e){t.toggleClass("active",e)},onDialogShown:function(t,e){t.one("shown.bs.modal",e)},onDialogHidden:function(t,e){t.one("hidden.bs.modal",e)},showDialog:function(t){t.modal("show")},hideDialog:function(t){t.modal("hide")},createLayout:function(t,e){var n=(e.airMode?y.airEditor([y.editingArea([y.airEditable()])]):y.editor([y.toolbar(),y.editingArea([y.codable(),y.editable()]),y.statusbar()])).render();return n.insertAfter(t),{note:t,editor:n,toolbar:n.find(".note-toolbar"),editingArea:n.find(".note-editing-area"),editable:n.find(".note-editable"),codable:n.find(".note-codable"),statusbar:n.find(".note-statusbar")}},removeLayout:function(t,e){t.html(e.editable.html()),e.editor.remove(),t.show()}};t.summernote=t.summernote||{lang:{}},t.extend(t.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize full",resizeHalf:"Resize half",resizeQuarter:"Resize quarter",resizeNone:"Original size",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Remove float",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image",original:"Original"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table",addRowAbove:"Add row above",addRowBelow:"Add row below",addColLeft:"Add column left",addColRight:"Add column right",delRow:"Delete row",delCol:"Delete column",delTable:"Delete table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",p:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default",cpSelect:"Select"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var w="function"==typeof define&&define.amd;var D,C=navigator.userAgent,x=/MSIE|Trident/i.test(C);if(x){var k=/MSIE (\d+[.]\d+)/.exec(C);k&&(D=parseFloat(k[1])),(k=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(C))&&(D=parseFloat(k[1]))}var S=/Edge\/\d+/.test(C),_=!!window.CodeMirror,T="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,A=x||S?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input",I={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:x,isEdge:S,isFF:!S&&/firefox/i.test(C),isPhantom:/PhantomJS/i.test(C),isWebkit:!S&&/webkit/i.test(C),isChrome:!S&&/chrome/i.test(C),isSafari:!S&&/safari/i.test(C),browserVersion:D,jqueryVersion:parseFloat(t.fn.jquery),isSupportAmd:w,isSupportTouch:T,hasCodeMirror:_,isFontInstalled:function(t){var e="Comic Sans MS"===t?"Courier New":"Comic Sans MS",n="mmmmmmmmmmwwwww",i=document.createElement("canvas").getContext("2d");i.font="200px '"+e+"'";var o=i.measureText(n).width;return i.font="200px '"+t+"', '"+e+"'",o!==i.measureText(n).width},isW3CRangeSupport:!!document.createRange,inputEventName:A};var E=0;var P={eq:function(t){return function(e){return t===e}},eq2:function(t,e){return t===e},peq2:function(t){return function(e,n){return e[t]===n[t]}},ok:function(){return!0},fail:function(){return!1},self:function(t){return t},not:function(t){return function(){return!t.apply(t,arguments)}},and:function(t,e){return function(n){return t(n)&&e(n)}},invoke:function(t,e){return function(){return t[e].apply(t,arguments)}},uniqueId:function(t){var e=++E+"";return t?t+e:e},rect2bnd:function(t){var e=$(document);return{top:t.top+e.scrollTop(),left:t.left+e.scrollLeft(),width:t.right-t.left,height:t.bottom-t.top}},invertObject:function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e},namespaceToCamel:function(t,e){return(e=e||"")+t.split(".").map((function(t){return t.substring(0,1).toUpperCase()+t.substring(1)})).join("")},debounce:function(t,e,n){var i;return function(){var o=this,a=arguments,r=function(){i=null,n||t.apply(o,a)},s=n&&!i;clearTimeout(i),i=setTimeout(r,e),s&&t.apply(o,a)}},isValidUrl:function(t){return/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/gi.test(t)}};function L(t){return t[0]}function M(t){return t[t.length-1]}function N(t){return t.slice(1)}function R(t,e){return!!(t&&t.length&&e)&&-1!==t.indexOf(e)}var F={head:L,last:M,initial:function(t){return t.slice(0,t.length-1)},tail:N,prev:function(t,e){if(t&&t.length&&e){var n=t.indexOf(e);return-1===n?null:t[n-1]}return null},next:function(t,e){if(t&&t.length&&e){var n=t.indexOf(e);return-1===n?null:t[n+1]}return null},find:function(t,e){for(var n=0,i=t.length;n<i;n++){var o=t[n];if(e(o))return o}},contains:R,all:function(t,e){for(var n=0,i=t.length;n<i;n++)if(!e(t[n]))return!1;return!0},sum:function(t,e){return e=e||P.self,t.reduce((function(t,n){return t+e(n)}),0)},from:function(t){for(var e=[],n=t.length,i=-1;++i<n;)e[i]=t[i];return e},isEmpty:function(t){return!t||!t.length},clusterBy:function(t,e){return t.length?N(t).reduce((function(t,n){var i=M(t);return e(M(i),n)?i[i.length]=n:t[t.length]=[n],t}),[[L(t)]]):[]},compact:function(t){for(var e=[],n=0,i=t.length;n<i;n++)t[n]&&e.push(t[n]);return e},unique:function(t){for(var e=[],n=0,i=t.length;n<i;n++)R(e,t[n])||e.push(t[n]);return e}},O=String.fromCharCode(160);function H(e){return e&&t(e).hasClass("note-editable")}function B(t){return t=t.toUpperCase(),function(e){return e&&e.nodeName.toUpperCase()===t}}function U(t){return t&&3===t.nodeType}function j(t){return t&&/^BR|^IMG|^HR|^IFRAME|^BUTTON|^INPUT|^AUDIO|^VIDEO|^EMBED/.test(t.nodeName.toUpperCase())}function z(t){return!H(t)&&(t&&/^DIV|^P|^LI|^H[1-7]/.test(t.nodeName.toUpperCase()))}var W=B("PRE"),Y=B("LI");var q=B("TABLE"),V=B("DATA");function G(t){return!(Q(t)||K(t)||J(t)||z(t)||q(t)||Z(t)||V(t))}function K(t){return t&&/^UL|^OL/.test(t.nodeName.toUpperCase())}var J=B("HR");function X(t){return t&&/^TD|^TH/.test(t.nodeName.toUpperCase())}var Z=B("BLOCKQUOTE");function Q(t){return X(t)||Z(t)||H(t)}var tt=B("A");var et=B("BODY");var nt=I.isMSIE&&I.browserVersion<11?"&nbsp;":"<br>";function it(t){return U(t)?t.nodeValue.length:t?t.childNodes.length:0}function ot(t){var e=it(t);return 0===e||(!U(t)&&1===e&&t.innerHTML===nt||!(!F.all(t.childNodes,U)||""!==t.innerHTML))}function at(t){j(t)||it(t)||(t.innerHTML=nt)}function rt(t,e){for(;t;){if(e(t))return t;if(H(t))break;t=t.parentNode}return null}function st(t,e){e=e||P.fail;var n=[];return rt(t,(function(t){return H(t)||n.push(t),e(t)})),n}function lt(t,e){e=e||P.fail;for(var n=[];t&&!e(t);)n.push(t),t=t.nextSibling;return n}function ct(t,e){var n=e.nextSibling,i=e.parentNode;return n?i.insertBefore(t,n):i.appendChild(t),t}function dt(e,n){return t.each(n,(function(t,n){e.appendChild(n)})),e}function ht(t){return 0===t.offset}function ut(t){return t.offset===it(t.node)}function pt(t){return ht(t)||ut(t)}function ft(t,e){for(;t&&t!==e;){if(0!==gt(t))return!1;t=t.parentNode}return!0}function mt(t,e){if(!e)return!1;for(;t&&t!==e;){if(gt(t)!==it(t.parentNode)-1)return!1;t=t.parentNode}return!0}function gt(t){for(var e=0;t=t.previousSibling;)e+=1;return e}function vt(t){return!!(t&&t.childNodes&&t.childNodes.length)}function bt(t,e){var n,i;if(0===t.offset){if(H(t.node))return null;n=t.node.parentNode,i=gt(t.node)}else vt(t.node)?i=it(n=t.node.childNodes[t.offset-1]):(n=t.node,i=e?0:t.offset-1);return{node:n,offset:i}}function yt(t,e){var n,i;if(it(t.node)===t.offset){if(H(t.node))return null;n=t.node.parentNode,i=gt(t.node)+1}else vt(t.node)?(n=t.node.childNodes[t.offset],i=0):(n=t.node,i=e?it(t.node):t.offset+1);return{node:n,offset:i}}function wt(t,e){return t.node===e.node&&t.offset===e.offset}function Dt(t,e){var n=e&&e.isSkipPaddingBlankHTML,i=e&&e.isNotSplitEdgePoint,o=e&&e.isDiscardEmptySplits;if(o&&(n=!0),pt(t)&&(U(t.node)||i)){if(ht(t))return t.node;if(ut(t))return t.node.nextSibling}if(U(t.node))return t.node.splitText(t.offset);var a=t.node.childNodes[t.offset],r=ct(t.node.cloneNode(!1),t.node);return dt(r,lt(a)),n||(at(t.node),at(r)),o&&(ot(t.node)&&kt(t.node),ot(r))?(kt(r),t.node.nextSibling):r}function Ct(t,e,n){var i=st(e.node,P.eq(t));return i.length?1===i.length?Dt(e,n):i.reduce((function(t,i){return t===e.node&&(t=Dt(e,n)),Dt({node:i,offset:t?gt(t):it(i)},n)})):null}function xt(t){return document.createElement(t)}function kt(t,e){if(t&&t.parentNode){if(t.removeNode)return t.removeNode(e);var n=t.parentNode;if(!e){for(var i=[],o=0,a=t.childNodes.length;o<a;o++)i.push(t.childNodes[o]);for(o=0,a=i.length;o<a;o++)n.insertBefore(i[o],t)}n.removeChild(t)}}var St=B("TEXTAREA");function _t(t,e){var n=St(t[0])?t.val():t.html();return e?n.replace(/[\n\r]/g,""):n}var Tt={NBSP_CHAR:O,ZERO_WIDTH_NBSP_CHAR:"\ufeff",blank:nt,emptyPara:"<p>"+nt+"</p>",makePredByNodeName:B,isEditable:H,isControlSizing:function(e){return e&&t(e).hasClass("note-control-sizing")},isText:U,isElement:function(t){return t&&1===t.nodeType},isVoid:j,isPara:z,isPurePara:function(t){return z(t)&&!Y(t)},isHeading:function(t){return t&&/^H[1-7]/.test(t.nodeName.toUpperCase())},isInline:G,isBlock:P.not(G),isBodyInline:function(t){return G(t)&&!rt(t,z)},isBody:et,isParaInline:function(t){return G(t)&&!!rt(t,z)},isPre:W,isList:K,isTable:q,isData:V,isCell:X,isBlockquote:Z,isBodyContainer:Q,isAnchor:tt,isDiv:B("DIV"),isLi:Y,isBR:B("BR"),isSpan:B("SPAN"),isB:B("B"),isU:B("U"),isS:B("S"),isI:B("I"),isImg:B("IMG"),isTextarea:St,isEmpty:ot,isEmptyAnchor:P.and(tt,ot),isClosestSibling:function(t,e){return t.nextSibling===e||t.previousSibling===e},withClosestSiblings:function(t,e){e=e||P.ok;var n=[];return t.previousSibling&&e(t.previousSibling)&&n.push(t.previousSibling),n.push(t),t.nextSibling&&e(t.nextSibling)&&n.push(t.nextSibling),n},nodeLength:it,isLeftEdgePoint:ht,isRightEdgePoint:ut,isEdgePoint:pt,isLeftEdgeOf:ft,isRightEdgeOf:mt,isLeftEdgePointOf:function(t,e){return ht(t)&&ft(t.node,e)},isRightEdgePointOf:function(t,e){return ut(t)&&mt(t.node,e)},prevPoint:bt,nextPoint:yt,isSamePoint:wt,isVisiblePoint:function(t){if(U(t.node)||!vt(t.node)||ot(t.node))return!0;var e=t.node.childNodes[t.offset-1],n=t.node.childNodes[t.offset];return!(e&&!j(e)||n&&!j(n))},prevPointUntil:function(t,e){for(;t;){if(e(t))return t;t=bt(t)}return null},nextPointUntil:function(t,e){for(;t;){if(e(t))return t;t=yt(t)}return null},isCharPoint:function(t){if(!U(t.node))return!1;var e=t.node.nodeValue.charAt(t.offset-1);return e&&" "!==e&&e!==O},walkPoint:function(t,e,n,i){for(var o=t;o&&(n(o),!wt(o,e));){o=yt(o,i&&t.node!==o.node&&e.node!==o.node)}},ancestor:rt,singleChildAncestor:function(t,e){for(t=t.parentNode;t&&1===it(t);){if(e(t))return t;if(H(t))break;t=t.parentNode}return null},listAncestor:st,lastAncestor:function(t,e){var n=st(t);return F.last(n.filter(e))},listNext:lt,listPrev:function(t,e){e=e||P.fail;for(var n=[];t&&!e(t);)n.push(t),t=t.previousSibling;return n},listDescendant:function(t,e){var n=[];return e=e||P.ok,function i(o){t!==o&&e(o)&&n.push(o);for(var a=0,r=o.childNodes.length;a<r;a++)i(o.childNodes[a])}(t),n},commonAncestor:function(t,e){for(var n=st(t),i=e;i;i=i.parentNode)if(n.indexOf(i)>-1)return i;return null},wrap:function(e,n){var i=e.parentNode,o=t("<"+n+">")[0];return i.insertBefore(o,e),o.appendChild(e),o},insertAfter:ct,appendChildNodes:dt,position:gt,hasChildren:vt,makeOffsetPath:function(t,e){return st(e,P.eq(t)).map(gt).reverse()},fromOffsetPath:function(t,e){for(var n=t,i=0,o=e.length;i<o;i++)n=n.childNodes.length<=e[i]?n.childNodes[n.childNodes.length-1]:n.childNodes[e[i]];return n},splitTree:Ct,splitPoint:function(t,e){var n,i,o=e?z:Q,a=st(t.node,o),r=F.last(a)||t.node;o(r)?(n=a[a.length-2],i=r):i=(n=r).parentNode;var s=n&&Ct(n,t,{isSkipPaddingBlankHTML:e,isNotSplitEdgePoint:e});return s||i!==t.node||(s=t.node.childNodes[t.offset]),{rightNode:s,container:i}},create:xt,createText:function(t){return document.createTextNode(t)},remove:kt,removeWhile:function(t,e){for(;t&&!H(t)&&e(t);){var n=t.parentNode;kt(t),t=n}},replace:function(t,e){if(t.nodeName.toUpperCase()===e.toUpperCase())return t;var n=xt(e);return t.style.cssText&&(n.style.cssText=t.style.cssText),dt(n,F.from(t.childNodes)),ct(n,t),kt(t),n},html:function(t,e){var n=_t(t);if(e){n=(n=n.replace(/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g,(function(t,e,n){n=n.toUpperCase();var i=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(n)&&!!e,o=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(n);return t+(i||o?"\n":"")}))).trim()}return n},value:_t,posFromPlaceholder:function(e){var n=t(e),i=n.offset(),o=n.outerHeight(!0);return{left:i.left,top:i.top+o}},attachEvents:function(t,e){Object.keys(e).forEach((function(n){t.on(n,e[n])}))},detachEvents:function(t,e){Object.keys(e).forEach((function(n){t.off(n,e[n])}))},isCustomStyleTag:function(t){return t&&!U(t)&&F.contains(t.classList,"note-styletag")}},At=function(){function e(e,n){this.ui=t.summernote.ui,this.$note=e,this.memos={},this.modules={},this.layoutInfo={},this.options=n,this.initialize()}return e.prototype.initialize=function(){return this.layoutInfo=this.ui.createLayout(this.$note,this.options),this._initialize(),this.$note.hide(),this},e.prototype.destroy=function(){this._destroy(),this.$note.removeData("summernote"),this.ui.removeLayout(this.$note,this.layoutInfo)},e.prototype.reset=function(){var t=this.isDisabled();this.code(Tt.emptyPara),this._destroy(),this._initialize(),t&&this.disable()},e.prototype._initialize=function(){var e=this,n=t.extend({},this.options.buttons);Object.keys(n).forEach((function(t){e.memo("button."+t,n[t])}));var i=t.extend({},this.options.modules,t.summernote.plugins||{});Object.keys(i).forEach((function(t){e.module(t,i[t],!0)})),Object.keys(this.modules).forEach((function(t){e.initializeModule(t)}))},e.prototype._destroy=function(){var t=this;Object.keys(this.modules).reverse().forEach((function(e){t.removeModule(e)})),Object.keys(this.memos).forEach((function(e){t.removeMemo(e)})),this.triggerEvent("destroy",this)},e.prototype.code=function(t){var e=this.invoke("codeview.isActivated");if(void 0===t)return this.invoke("codeview.sync"),e?this.layoutInfo.codable.val():this.layoutInfo.editable.html();e?this.layoutInfo.codable.val(t):this.layoutInfo.editable.html(t),this.$note.val(t),this.triggerEvent("change",t,this.layoutInfo.editable)},e.prototype.isDisabled=function(){return"false"===this.layoutInfo.editable.attr("contenteditable")},e.prototype.enable=function(){this.layoutInfo.editable.attr("contenteditable",!0),this.invoke("toolbar.activate",!0),this.triggerEvent("disable",!1)},e.prototype.disable=function(){this.invoke("codeview.isActivated")&&this.invoke("codeview.deactivate"),this.layoutInfo.editable.attr("contenteditable",!1),this.invoke("toolbar.deactivate",!0),this.triggerEvent("disable",!0)},e.prototype.triggerEvent=function(){var t=F.head(arguments),e=F.tail(F.from(arguments)),n=this.options.callbacks[P.namespaceToCamel(t,"on")];n&&n.apply(this.$note[0],e),this.$note.trigger("summernote."+t,e)},e.prototype.initializeModule=function(t){var e=this.modules[t];e.shouldInitialize=e.shouldInitialize||P.ok,e.shouldInitialize()&&(e.initialize&&e.initialize(),e.events&&Tt.attachEvents(this.$note,e.events))},e.prototype.module=function(t,e,n){if(1===arguments.length)return this.modules[t];this.modules[t]=new e(this),n||this.initializeModule(t)},e.prototype.removeModule=function(t){var e=this.modules[t];e.shouldInitialize()&&(e.events&&Tt.detachEvents(this.$note,e.events),e.destroy&&e.destroy()),delete this.modules[t]},e.prototype.memo=function(t,e){if(1===arguments.length)return this.memos[t];this.memos[t]=e},e.prototype.removeMemo=function(t){this.memos[t]&&this.memos[t].destroy&&this.memos[t].destroy(),delete this.memos[t]},e.prototype.createInvokeHandlerAndUpdateState=function(t,e){var n=this;return function(i){n.createInvokeHandler(t,e)(i),n.invoke("buttons.updateCurrentStyle")}},e.prototype.createInvokeHandler=function(e,n){var i=this;return function(o){o.preventDefault();var a=t(o.target);i.invoke(e,n||a.closest("[data-value]").data("value"),a)}},e.prototype.invoke=function(){var t=F.head(arguments),e=F.tail(F.from(arguments)),n=t.split("."),i=n.length>1,o=i&&F.head(n),a=i?F.last(n):F.head(n),r=this.modules[o||"editor"];return!o&&this[a]?this[a].apply(this,e):r&&r[a]&&r.shouldInitialize()?r[a].apply(r,e):void 0},e}();function It(t,e){var n,i,o=t.parentElement(),a=document.body.createTextRange(),r=F.from(o.childNodes);for(n=0;n<r.length;n++)if(!Tt.isText(r[n])){if(a.moveToElementText(r[n]),a.compareEndPoints("StartToStart",t)>=0)break;i=r[n]}if(0!==n&&Tt.isText(r[n-1])){var s=document.body.createTextRange(),l=null;s.moveToElementText(i||o),s.collapse(!i),l=i?i.nextSibling:o.firstChild;var c=t.duplicate();c.setEndPoint("StartToStart",s);for(var d=c.text.replace(/[\r\n]/g,"").length;d>l.nodeValue.length&&l.nextSibling;)d-=l.nodeValue.length,l=l.nextSibling;l.nodeValue;e&&l.nextSibling&&Tt.isText(l.nextSibling)&&d===l.nodeValue.length&&(d-=l.nodeValue.length,l=l.nextSibling),o=l,n=d}return{cont:o,offset:n}}function $t(t){var e=function(t,n){var i,o;if(Tt.isText(t)){var a=Tt.listPrev(t,P.not(Tt.isText)),r=F.last(a).previousSibling;i=r||t.parentNode,n+=F.sum(F.tail(a),Tt.nodeLength),o=!r}else{if(i=t.childNodes[n]||t,Tt.isText(i))return e(i,0);n=0,o=!1}return{node:i,collapseToStart:o,offset:n}},n=document.body.createTextRange(),i=e(t.node,t.offset);return n.moveToElementText(i.node),n.collapse(i.collapseToStart),n.moveStart("character",i.offset),n}t.fn.extend({summernote:function(){var e=t.type(F.head(arguments)),n="string"===e,i="object"===e,o=t.extend({},t.summernote.options,i?F.head(arguments):{});o.langInfo=t.extend(!0,{},t.summernote.lang["en-US"],t.summernote.lang[o.lang]),o.icons=t.extend(!0,{},t.summernote.options.icons,o.icons),o.tooltip="auto"===o.tooltip?!I.isSupportTouch:o.tooltip,this.each((function(e,n){var i=t(n);if(!i.data("summernote")){var a=new At(i,o);i.data("summernote",a),i.data("summernote").triggerEvent("init",a.layoutInfo)}}));var a=this.first();if(a.length){var r=a.data("summernote");if(n)return r.invoke.apply(r,F.from(arguments));o.focus&&r.invoke("editor.focus")}return this}});var Et=function(){function e(t,e,n,i){this.sc=t,this.so=e,this.ec=n,this.eo=i,this.isOnEditable=this.makeIsOn(Tt.isEditable),this.isOnList=this.makeIsOn(Tt.isList),this.isOnAnchor=this.makeIsOn(Tt.isAnchor),this.isOnCell=this.makeIsOn(Tt.isCell),this.isOnData=this.makeIsOn(Tt.isData)}return e.prototype.nativeRange=function(){if(I.isW3CRangeSupport){var t=document.createRange();return t.setStart(this.sc,this.sc.data&&this.so>this.sc.data.length?0:this.so),t.setEnd(this.ec,this.sc.data?Math.min(this.eo,this.sc.data.length):this.eo),t}var e=$t({node:this.sc,offset:this.so});return e.setEndPoint("EndToEnd",$t({node:this.ec,offset:this.eo})),e},e.prototype.getPoints=function(){return{sc:this.sc,so:this.so,ec:this.ec,eo:this.eo}},e.prototype.getStartPoint=function(){return{node:this.sc,offset:this.so}},e.prototype.getEndPoint=function(){return{node:this.ec,offset:this.eo}},e.prototype.select=function(){var t=this.nativeRange();if(I.isW3CRangeSupport){var e=document.getSelection();e.rangeCount>0&&e.removeAllRanges(),e.addRange(t)}else t.select();return this},e.prototype.scrollIntoView=function(e){var n=t(e).height();return e.scrollTop+n<this.sc.offsetTop&&(e.scrollTop+=Math.abs(e.scrollTop+n-this.sc.offsetTop)),this},e.prototype.normalize=function(){var t=function(t,e){if(Tt.isVisiblePoint(t)&&(!Tt.isEdgePoint(t)||Tt.isRightEdgePoint(t)&&!e||Tt.isLeftEdgePoint(t)&&e||Tt.isRightEdgePoint(t)&&e&&Tt.isVoid(t.node.nextSibling)||Tt.isLeftEdgePoint(t)&&!e&&Tt.isVoid(t.node.previousSibling)||Tt.isBlock(t.node)&&Tt.isEmpty(t.node)))return t;var n=Tt.ancestor(t.node,Tt.isBlock);if((Tt.isLeftEdgePointOf(t,n)||Tt.isVoid(Tt.prevPoint(t).node))&&!e||(Tt.isRightEdgePointOf(t,n)||Tt.isVoid(Tt.nextPoint(t).node))&&e){if(Tt.isVisiblePoint(t))return t;e=!e}return(e?Tt.nextPointUntil(Tt.nextPoint(t),Tt.isVisiblePoint):Tt.prevPointUntil(Tt.prevPoint(t),Tt.isVisiblePoint))||t},n=t(this.getEndPoint(),!1),i=this.isCollapsed()?n:t(this.getStartPoint(),!0);return new e(i.node,i.offset,n.node,n.offset)},e.prototype.nodes=function(t,e){t=t||P.ok;var n=e&&e.includeAncestor,i=e&&e.fullyContains,o=this.getStartPoint(),a=this.getEndPoint(),r=[],s=[];return Tt.walkPoint(o,a,(function(e){var o;Tt.isEditable(e.node)||(i?(Tt.isLeftEdgePoint(e)&&s.push(e.node),Tt.isRightEdgePoint(e)&&F.contains(s,e.node)&&(o=e.node)):o=n?Tt.ancestor(e.node,t):e.node,o&&t(o)&&r.push(o))}),!0),F.unique(r)},e.prototype.commonAncestor=function(){return Tt.commonAncestor(this.sc,this.ec)},e.prototype.expand=function(t){var n=Tt.ancestor(this.sc,t),i=Tt.ancestor(this.ec,t);if(!n&&!i)return new e(this.sc,this.so,this.ec,this.eo);var o=this.getPoints();return n&&(o.sc=n,o.so=0),i&&(o.ec=i,o.eo=Tt.nodeLength(i)),new e(o.sc,o.so,o.ec,o.eo)},e.prototype.collapse=function(t){return t?new e(this.sc,this.so,this.sc,this.so):new e(this.ec,this.eo,this.ec,this.eo)},e.prototype.splitText=function(){var t=this.sc===this.ec,n=this.getPoints();return Tt.isText(this.ec)&&!Tt.isEdgePoint(this.getEndPoint())&&this.ec.splitText(this.eo),Tt.isText(this.sc)&&!Tt.isEdgePoint(this.getStartPoint())&&(n.sc=this.sc.splitText(this.so),n.so=0,t&&(n.ec=n.sc,n.eo=this.eo-this.so)),new e(n.sc,n.so,n.ec,n.eo)},e.prototype.deleteContents=function(){if(this.isCollapsed())return this;var n=this.splitText(),i=n.nodes(null,{fullyContains:!0}),o=Tt.prevPointUntil(n.getStartPoint(),(function(t){return!F.contains(i,t.node)})),a=[];return t.each(i,(function(t,e){var n=e.parentNode;o.node!==n&&1===Tt.nodeLength(n)&&a.push(n),Tt.remove(e,!1)})),t.each(a,(function(t,e){Tt.remove(e,!1)})),new e(o.node,o.offset,o.node,o.offset).normalize()},e.prototype.makeIsOn=function(t){return function(){var e=Tt.ancestor(this.sc,t);return!!e&&e===Tt.ancestor(this.ec,t)}},e.prototype.isLeftEdgeOf=function(t){if(!Tt.isLeftEdgePoint(this.getStartPoint()))return!1;var e=Tt.ancestor(this.sc,t);return e&&Tt.isLeftEdgeOf(this.sc,e)},e.prototype.isCollapsed=function(){return this.sc===this.ec&&this.so===this.eo},e.prototype.wrapBodyInlineWithPara=function(){if(Tt.isBodyContainer(this.sc)&&Tt.isEmpty(this.sc))return this.sc.innerHTML=Tt.emptyPara,new e(this.sc.firstChild,0,this.sc.firstChild,0);var t,n=this.normalize();if(Tt.isParaInline(this.sc)||Tt.isPara(this.sc))return n;if(Tt.isInline(n.sc)){var i=Tt.listAncestor(n.sc,P.not(Tt.isInline));t=F.last(i),Tt.isInline(t)||(t=i[i.length-2]||n.sc.childNodes[n.so])}else t=n.sc.childNodes[n.so>0?n.so-1:0];var o=Tt.listPrev(t,Tt.isParaInline).reverse();if((o=o.concat(Tt.listNext(t.nextSibling,Tt.isParaInline))).length){var a=Tt.wrap(F.head(o),"p");Tt.appendChildNodes(a,F.tail(o))}return this.normalize()},e.prototype.insertNode=function(t){var e=this.wrapBodyInlineWithPara().deleteContents(),n=Tt.splitPoint(e.getStartPoint(),Tt.isInline(t));return n.rightNode?n.rightNode.parentNode.insertBefore(t,n.rightNode):n.container.appendChild(t),t},e.prototype.pasteHTML=function(e){var n=t("<div></div>").html(e)[0],i=F.from(n.childNodes),o=this.wrapBodyInlineWithPara().deleteContents();return o.so>0&&(i=i.reverse()),i=i.map((function(t){return o.insertNode(t)})),o.so>0&&(i=i.reverse()),i},e.prototype.toString=function(){var t=this.nativeRange();return I.isW3CRangeSupport?t.toString():t.text},e.prototype.getWordRange=function(t){var n=this.getEndPoint();if(!Tt.isCharPoint(n))return this;var i=Tt.prevPointUntil(n,(function(t){return!Tt.isCharPoint(t)}));return t&&(n=Tt.nextPointUntil(n,(function(t){return!Tt.isCharPoint(t)}))),new e(i.node,i.offset,n.node,n.offset)},e.prototype.bookmark=function(t){return{s:{path:Tt.makeOffsetPath(t,this.sc),offset:this.so},e:{path:Tt.makeOffsetPath(t,this.ec),offset:this.eo}}},e.prototype.paraBookmark=function(t){return{s:{path:F.tail(Tt.makeOffsetPath(F.head(t),this.sc)),offset:this.so},e:{path:F.tail(Tt.makeOffsetPath(F.last(t),this.ec)),offset:this.eo}}},e.prototype.getClientRects=function(){return this.nativeRange().getClientRects()},e}(),Pt={create:function(t,e,n,i){if(4===arguments.length)return new Et(t,e,n,i);if(2===arguments.length)return new Et(t,e,n=t,i=e);var o=this.createFromSelection();return o||1!==arguments.length?o:(o=this.createFromNode(arguments[0])).collapse(Tt.emptyPara===arguments[0].innerHTML)},createFromSelection:function(){var t,e,n,i;if(I.isW3CRangeSupport){var o=document.getSelection();if(!o||0===o.rangeCount)return null;if(Tt.isBody(o.anchorNode))return null;var a=o.getRangeAt(0);t=a.startContainer,e=a.startOffset,n=a.endContainer,i=a.endOffset}else{var r=document.selection.createRange(),s=r.duplicate();s.collapse(!1);var l=r;l.collapse(!0);var c=It(l,!0),d=It(s,!1);Tt.isText(c.node)&&Tt.isLeftEdgePoint(c)&&Tt.isTextNode(d.node)&&Tt.isRightEdgePoint(d)&&d.node.nextSibling===c.node&&(c=d),t=c.cont,e=c.offset,n=d.cont,i=d.offset}return new Et(t,e,n,i)},createFromNode:function(t){var e=t,n=0,i=t,o=Tt.nodeLength(i);return Tt.isVoid(e)&&(n=Tt.listPrev(e).length-1,e=e.parentNode),Tt.isBR(i)?(o=Tt.listPrev(i).length-1,i=i.parentNode):Tt.isVoid(i)&&(o=Tt.listPrev(i).length,i=i.parentNode),this.create(e,n,i,o)},createFromNodeBefore:function(t){return this.createFromNode(t).collapse(!0)},createFromNodeAfter:function(t){return this.createFromNode(t).collapse()},createFromBookmark:function(t,e){var n=Tt.fromOffsetPath(t,e.s.path),i=e.s.offset,o=Tt.fromOffsetPath(t,e.e.path),a=e.e.offset;return new Et(n,i,o,a)},createFromParaBookmark:function(t,e){var n=t.s.offset,i=t.e.offset,o=Tt.fromOffsetPath(F.head(e),t.s.path),a=Tt.fromOffsetPath(F.last(e),t.e.path);return new Et(o,n,a,i)}},Lt={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,DELETE:46,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221},Mt={isEdit:function(t){return F.contains([Lt.BACKSPACE,Lt.TAB,Lt.ENTER,Lt.SPACE,Lt.DELETE],t)},isMove:function(t){return F.contains([Lt.LEFT,Lt.UP,Lt.RIGHT,Lt.DOWN],t)},nameFromCode:P.invertObject(Lt),code:Lt};var Nt=function(){function t(t){this.stack=[],this.stackOffset=-1,this.$editable=t,this.editable=t[0]}return t.prototype.makeSnapshot=function(){var t=Pt.create(this.editable);return{contents:this.$editable.html(),bookmark:t&&t.isOnEditable()?t.bookmark(this.editable):{s:{path:[],offset:0},e:{path:[],offset:0}}}},t.prototype.applySnapshot=function(t){null!==t.contents&&this.$editable.html(t.contents),null!==t.bookmark&&Pt.createFromBookmark(this.editable,t.bookmark).select()},t.prototype.rewind=function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),this.stackOffset=0,this.applySnapshot(this.stack[this.stackOffset])},t.prototype.commit=function(){this.stack=[],this.stackOffset=-1,this.recordUndo()},t.prototype.reset=function(){this.stack=[],this.stackOffset=-1,this.$editable.html(""),this.recordUndo()},t.prototype.undo=function(){this.$editable.html()!==this.stack[this.stackOffset].contents&&this.recordUndo(),this.stackOffset>0&&(this.stackOffset--,this.applySnapshot(this.stack[this.stackOffset]))},t.prototype.redo=function(){this.stack.length-1>this.stackOffset&&(this.stackOffset++,this.applySnapshot(this.stack[this.stackOffset]))},t.prototype.recordUndo=function(){this.stackOffset++,this.stack.length>this.stackOffset&&(this.stack=this.stack.slice(0,this.stackOffset)),this.stack.push(this.makeSnapshot())},t}(),Rt=function(){function e(){}return e.prototype.jQueryCSS=function(e,n){if(I.jqueryVersion<1.9){var i={};return t.each(n,(function(t,n){i[n]=e.css(n)})),i}return e.css(n)},e.prototype.fromNode=function(t){var e=this.jQueryCSS(t,["font-family","font-size","text-align","list-style-type","line-height"])||{};return e["font-size"]=parseInt(e["font-size"],10),e},e.prototype.stylePara=function(e,n){t.each(e.nodes(Tt.isPara,{includeAncestor:!0}),(function(e,i){t(i).css(n)}))},e.prototype.styleNodes=function(e,n){e=e.splitText();var i=n&&n.nodeName||"SPAN",o=!(!n||!n.expandClosestSibling),a=!(!n||!n.onlyPartialContains);if(e.isCollapsed())return[e.insertNode(Tt.create(i))];var r=Tt.makePredByNodeName(i),s=e.nodes(Tt.isText,{fullyContains:!0}).map((function(t){return Tt.singleChildAncestor(t,r)||Tt.wrap(t,i)}));if(o){if(a){var l=e.nodes();r=P.and(r,(function(t){return F.contains(l,t)}))}return s.map((function(e){var n=Tt.withClosestSiblings(e,r),i=F.head(n),o=F.tail(n);return t.each(o,(function(t,e){Tt.appendChildNodes(i,e.childNodes),Tt.remove(e)})),F.head(n)}))}return s},e.prototype.current=function(e){var n=t(Tt.isElement(e.sc)?e.sc:e.sc.parentNode),i=this.fromNode(n);try{i=t.extend(i,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal","font-family":document.queryCommandValue("fontname")||i["font-family"]})}catch(t){}if(e.isOnList()){var o=["circle","disc","disc-leading-zero","square"].indexOf(i["list-style-type"])>-1;i["list-style"]=o?"unordered":"ordered"}else i["list-style"]="none";var a=Tt.ancestor(e.sc,Tt.isPara);if(a&&a.style["line-height"])i["line-height"]=a.style.lineHeight;else{var r=parseInt(i["line-height"],10)/parseInt(i["font-size"],10);i["line-height"]=r.toFixed(1)}return i.anchor=e.isOnAnchor()&&Tt.ancestor(e.sc,Tt.isAnchor),i.ancestors=Tt.listAncestor(e.sc,Tt.isEditable),i.range=e,i},e}(),Ft=function(){function e(){}return e.prototype.insertOrderedList=function(t){this.toggleList("OL",t)},e.prototype.insertUnorderedList=function(t){this.toggleList("UL",t)},e.prototype.indent=function(e){var n=this,i=Pt.create(e).wrapBodyInlineWithPara(),o=i.nodes(Tt.isPara,{includeAncestor:!0}),a=F.clusterBy(o,P.peq2("parentNode"));t.each(a,(function(e,i){var o=F.head(i);if(Tt.isLi(o)){var a=n.findList(o.previousSibling);a?i.map((function(t){return a.appendChild(t)})):(n.wrapList(i,o.parentNode.nodeName),i.map((function(t){return t.parentNode})).map((function(t){return n.appendToPrevious(t)})))}else t.each(i,(function(e,n){t(n).css("marginLeft",(function(t,e){return(parseInt(e,10)||0)+25}))}))})),i.select()},e.prototype.outdent=function(e){var n=this,i=Pt.create(e).wrapBodyInlineWithPara(),o=i.nodes(Tt.isPara,{includeAncestor:!0}),a=F.clusterBy(o,P.peq2("parentNode"));t.each(a,(function(e,i){var o=F.head(i);Tt.isLi(o)?n.releaseList([i]):t.each(i,(function(e,n){t(n).css("marginLeft",(function(t,e){return(e=parseInt(e,10)||0)>25?e-25:""}))}))})),i.select()},e.prototype.toggleList=function(e,n){var i=this,o=Pt.create(n).wrapBodyInlineWithPara(),a=o.nodes(Tt.isPara,{includeAncestor:!0}),r=o.paraBookmark(a),s=F.clusterBy(a,P.peq2("parentNode"));if(F.find(a,Tt.isPurePara)){var l=[];t.each(s,(function(t,n){l=l.concat(i.wrapList(n,e))})),a=l}else{var c=o.nodes(Tt.isList,{includeAncestor:!0}).filter((function(n){return!t.nodeName(n,e)}));c.length?t.each(c,(function(t,n){Tt.replace(n,e)})):a=this.releaseList(s,!0)}Pt.createFromParaBookmark(r,a).select()},e.prototype.wrapList=function(t,e){var n=F.head(t),i=F.last(t),o=Tt.isList(n.previousSibling)&&n.previousSibling,a=Tt.isList(i.nextSibling)&&i.nextSibling,r=o||Tt.insertAfter(Tt.create(e||"UL"),i);return t=t.map((function(t){return Tt.isPurePara(t)?Tt.replace(t,"LI"):t})),Tt.appendChildNodes(r,t),a&&(Tt.appendChildNodes(r,F.from(a.childNodes)),Tt.remove(a)),t},e.prototype.releaseList=function(e,n){var i=this,o=[];return t.each(e,(function(e,a){var r=F.head(a),s=F.last(a),l=n?Tt.lastAncestor(r,Tt.isList):r.parentNode,c=l.parentNode;if("LI"===l.parentNode.nodeName)a.map((function(t){var e=i.findNextSiblings(t);c.nextSibling?c.parentNode.insertBefore(t,c.nextSibling):c.parentNode.appendChild(t),e.length&&(i.wrapList(e,l.nodeName),t.appendChild(e[0].parentNode))})),0===l.children.length&&c.removeChild(l),0===c.childNodes.length&&c.parentNode.removeChild(c);else{var d=l.childNodes.length>1?Tt.splitTree(l,{node:s.parentNode,offset:Tt.position(s)+1},{isSkipPaddingBlankHTML:!0}):null,h=Tt.splitTree(l,{node:r.parentNode,offset:Tt.position(r)},{isSkipPaddingBlankHTML:!0});a=n?Tt.listDescendant(h,Tt.isLi):F.from(h.childNodes).filter(Tt.isLi),!n&&Tt.isList(l.parentNode)||(a=a.map((function(t){return Tt.replace(t,"P")}))),t.each(F.from(a).reverse(),(function(t,e){Tt.insertAfter(e,l)}));var u=F.compact([l,h,d]);t.each(u,(function(e,n){var i=[n].concat(Tt.listDescendant(n,Tt.isList));t.each(i.reverse(),(function(t,e){Tt.nodeLength(e)||Tt.remove(e,!0)}))}))}o=o.concat(a)})),o},e.prototype.appendToPrevious=function(t){return t.previousSibling?Tt.appendChildNodes(t.previousSibling,[t]):this.wrapList([t],"LI")},e.prototype.findList=function(t){return t?F.find(t.children,(function(t){return["OL","UL"].indexOf(t.nodeName)>-1})):null},e.prototype.findNextSiblings=function(t){for(var e=[];t.nextSibling;)e.push(t.nextSibling),t=t.nextSibling;return e},e}(),Ot=function(){function e(t){this.bullet=new Ft,this.options=t.options}return e.prototype.insertTab=function(t,e){var n=Tt.createText(new Array(e+1).join(Tt.NBSP_CHAR));(t=t.deleteContents()).insertNode(n,!0),(t=Pt.create(n,e)).select()},e.prototype.insertParagraph=function(e,n){n=(n=(n=n||Pt.create(e)).deleteContents()).wrapBodyInlineWithPara();var i,o=Tt.ancestor(n.sc,Tt.isPara);if(o){if(Tt.isEmpty(o)&&Tt.isLi(o))return void this.bullet.toggleList(o.parentNode.nodeName);var a=null;if(1===this.options.blockquoteBreakingLevel?a=Tt.ancestor(o,Tt.isBlockquote):2===this.options.blockquoteBreakingLevel&&(a=Tt.lastAncestor(o,Tt.isBlockquote)),a){i=t(Tt.emptyPara)[0],Tt.isRightEdgePoint(n.getStartPoint())&&Tt.isBR(n.sc.nextSibling)&&t(n.sc.nextSibling).remove();var r=Tt.splitTree(a,n.getStartPoint(),{isDiscardEmptySplits:!0});r?r.parentNode.insertBefore(i,r):Tt.insertAfter(i,a)}else{i=Tt.splitTree(o,n.getStartPoint());var s=Tt.listDescendant(o,Tt.isEmptyAnchor);s=s.concat(Tt.listDescendant(i,Tt.isEmptyAnchor)),t.each(s,(function(t,e){Tt.remove(e)})),(Tt.isHeading(i)||Tt.isPre(i)||Tt.isCustomStyleTag(i))&&Tt.isEmpty(i)&&(i=Tt.replace(i,"p"))}}else{var l=n.sc.childNodes[n.so];i=t(Tt.emptyPara)[0],l?n.sc.insertBefore(i,l):n.sc.appendChild(i)}Pt.create(i,0).normalize().select().scrollIntoView(e)},e}(),Ht=function(t,e,n,i){var o={colPos:0,rowPos:0},a=[],r=[];function s(t,e,n,i,o,r,s){var l={baseRow:n,baseCell:i,isRowSpan:o,isColSpan:r,isVirtual:s};a[t]||(a[t]=[]),a[t][e]=l}function l(t,e,n,i){return{baseCell:t.baseCell,action:e,virtualTable:{rowIndex:n,cellIndex:i}}}function c(t,e){if(!a[t])return e;if(!a[t][e])return e;for(var n=e;a[t][n];)if(n++,!a[t][n])return n}function d(t,e){var n=c(t.rowIndex,e.cellIndex),i=e.colSpan>1,a=e.rowSpan>1,r=t.rowIndex===o.rowPos&&e.cellIndex===o.colPos;s(t.rowIndex,n,t,e,a,i,!1);var l=e.attributes.rowSpan?parseInt(e.attributes.rowSpan.value,10):0;if(l>1)for(var d=1;d<l;d++){var u=t.rowIndex+d;h(u,n,e,r),s(u,n,t,e,!0,i,!0)}var p=e.attributes.colSpan?parseInt(e.attributes.colSpan.value,10):0;if(p>1)for(var f=1;f<p;f++){var m=c(t.rowIndex,n+f);h(t.rowIndex,m,e,r),s(t.rowIndex,m,t,e,a,!0,!0)}}function h(t,e,n,i){t===o.rowPos&&o.colPos>=n.cellIndex&&n.cellIndex<=e&&!i&&o.colPos++}function u(t){switch(e){case Ht.where.Column:if(t.isColSpan)return Ht.resultAction.SubtractSpanCount;break;case Ht.where.Row:if(!t.isVirtual&&t.isRowSpan)return Ht.resultAction.AddCell;if(t.isRowSpan)return Ht.resultAction.SubtractSpanCount}return Ht.resultAction.RemoveCell}function p(t){switch(e){case Ht.where.Column:if(t.isColSpan)return Ht.resultAction.SumSpanCount;if(t.isRowSpan&&t.isVirtual)return Ht.resultAction.Ignore;break;case Ht.where.Row:if(t.isRowSpan)return Ht.resultAction.SumSpanCount;if(t.isColSpan&&t.isVirtual)return Ht.resultAction.Ignore}return Ht.resultAction.AddCell}this.getActionList=function(){for(var t=e===Ht.where.Row?o.rowPos:-1,i=e===Ht.where.Column?o.colPos:-1,s=0,c=!0;c;){var d=t>=0?t:s,h=i>=0?i:s,f=a[d];if(!f)return c=!1,r;var m=f[h];if(!m)return c=!1,r;var g=Ht.resultAction.Ignore;switch(n){case Ht.requestAction.Add:g=p(m);break;case Ht.requestAction.Delete:g=u(m)}r.push(l(m,g,d,h)),s++}return r},t&&t.tagName&&("td"===t.tagName.toLowerCase()||"th"===t.tagName.toLowerCase())?(o.colPos=t.cellIndex,t.parentElement&&t.parentElement.tagName&&"tr"===t.parentElement.tagName.toLowerCase()?o.rowPos=t.parentElement.rowIndex:console.error("Impossible to identify start Row point.",t)):console.error("Impossible to identify start Cell point.",t),function(){for(var t=i.rows,e=0;e<t.length;e++)for(var n=t[e].cells,o=0;o<n.length;o++)d(t[e],n[o])}()};Ht.where={Row:0,Column:1},Ht.requestAction={Add:0,Delete:1},Ht.resultAction={Ignore:0,SubtractSpanCount:1,RemoveCell:2,AddCell:3,SumSpanCount:4};var Bt,Ut=function(){function e(){}return e.prototype.tab=function(t,e){var n=Tt.ancestor(t.commonAncestor(),Tt.isCell),i=Tt.ancestor(n,Tt.isTable),o=Tt.listDescendant(i,Tt.isCell),a=F[e?"prev":"next"](o,n);a&&Pt.create(a,0).select()},e.prototype.addRow=function(e,n){for(var i=Tt.ancestor(e.commonAncestor(),Tt.isCell),o=t(i).closest("tr"),a=this.recoverAttributes(o),r=t("<tr"+a+"></tr>"),s=new Ht(i,Ht.where.Row,Ht.requestAction.Add,t(o).closest("table")[0]).getActionList(),l=0;l<s.length;l++){var c=s[l],d=this.recoverAttributes(c.baseCell);switch(c.action){case Ht.resultAction.AddCell:r.append("<td"+d+">"+Tt.blank+"</td>");break;case Ht.resultAction.SumSpanCount:if("top"===n)if((c.baseCell.parent?c.baseCell.closest("tr").rowIndex:0)<=o[0].rowIndex){var h=t("<div></div>").append(t("<td"+d+">"+Tt.blank+"</td>").removeAttr("rowspan")).html();r.append(h);break}var u=parseInt(c.baseCell.rowSpan,10);u++,c.baseCell.setAttribute("rowSpan",u)}}if("top"===n)o.before(r);else{if(i.rowSpan>1){var p=o[0].rowIndex+(i.rowSpan-2);return void t(t(o).parent().find("tr")[p]).after(t(r))}o.after(r)}},e.prototype.addCol=function(e,n){var i=Tt.ancestor(e.commonAncestor(),Tt.isCell),o=t(i).closest("tr");t(o).siblings().push(o);for(var a=new Ht(i,Ht.where.Column,Ht.requestAction.Add,t(o).closest("table")[0]).getActionList(),r=0;r<a.length;r++){var s=a[r],l=this.recoverAttributes(s.baseCell);switch(s.action){case Ht.resultAction.AddCell:"right"===n?t(s.baseCell).after("<td"+l+">"+Tt.blank+"</td>"):t(s.baseCell).before("<td"+l+">"+Tt.blank+"</td>");break;case Ht.resultAction.SumSpanCount:if("right"===n){var c=parseInt(s.baseCell.colSpan,10);c++,s.baseCell.setAttribute("colSpan",c)}else t(s.baseCell).before("<td"+l+">"+Tt.blank+"</td>")}}},e.prototype.recoverAttributes=function(t){var e="";if(!t)return e;for(var n=t.attributes||[],i=0;i<n.length;i++)"id"!==n[i].name.toLowerCase()&&n[i].specified&&(e+=" "+n[i].name+"='"+n[i].value+"'");return e},e.prototype.deleteRow=function(e){for(var n=Tt.ancestor(e.commonAncestor(),Tt.isCell),i=t(n).closest("tr"),o=i.children("td, th").index(t(n)),a=i[0].rowIndex,r=new Ht(n,Ht.where.Row,Ht.requestAction.Delete,t(i).closest("table")[0]).getActionList(),s=0;s<r.length;s++)if(r[s]){var l=r[s].baseCell,c=r[s].virtualTable,d=l.rowSpan&&l.rowSpan>1,h=d?parseInt(l.rowSpan,10):0;switch(r[s].action){case Ht.resultAction.Ignore:continue;case Ht.resultAction.AddCell:var u=i.next("tr")[0];if(!u)continue;var p=i[0].cells[o];d&&(h>2?(h--,u.insertBefore(p,u.cells[o]),u.cells[o].setAttribute("rowSpan",h),u.cells[o].innerHTML=""):2===h&&(u.insertBefore(p,u.cells[o]),u.cells[o].removeAttribute("rowSpan"),u.cells[o].innerHTML=""));continue;case Ht.resultAction.SubtractSpanCount:d&&(h>2?(h--,l.setAttribute("rowSpan",h),c.rowIndex!==a&&l.cellIndex===o&&(l.innerHTML="")):2===h&&(l.removeAttribute("rowSpan"),c.rowIndex!==a&&l.cellIndex===o&&(l.innerHTML="")));continue;case Ht.resultAction.RemoveCell:continue}}i.remove()},e.prototype.deleteCol=function(e){for(var n=Tt.ancestor(e.commonAncestor(),Tt.isCell),i=t(n).closest("tr"),o=i.children("td, th").index(t(n)),a=new Ht(n,Ht.where.Column,Ht.requestAction.Delete,t(i).closest("table")[0]).getActionList(),r=0;r<a.length;r++)if(a[r])switch(a[r].action){case Ht.resultAction.Ignore:continue;case Ht.resultAction.SubtractSpanCount:var s=a[r].baseCell;if(s.colSpan&&s.colSpan>1){var l=s.colSpan?parseInt(s.colSpan,10):0;l>2?(l--,s.setAttribute("colSpan",l),s.cellIndex===o&&(s.innerHTML="")):2===l&&(s.removeAttribute("colSpan"),s.cellIndex===o&&(s.innerHTML=""))}continue;case Ht.resultAction.RemoveCell:Tt.remove(a[r].baseCell,!0);continue}},e.prototype.createTable=function(e,n,i){for(var o,a=[],r=0;r<e;r++)a.push("<td>"+Tt.blank+"</td>");o=a.join("");for(var s,l=[],c=0;c<n;c++)l.push("<tr>"+o+"</tr>");s=l.join("");var d=t("<table>"+s+"</table>");return i&&i.tableClassName&&d.addClass(i.tableClassName),d[0]},e.prototype.deleteTable=function(e){var n=Tt.ancestor(e.commonAncestor(),Tt.isCell);t(n).closest("table").remove()},e}(),jt=function(){function e(e){var n=this;this.context=e,this.$note=e.layoutInfo.note,this.$editor=e.layoutInfo.editor,this.$editable=e.layoutInfo.editable,this.options=e.options,this.lang=this.options.langInfo,this.editable=this.$editable[0],this.lastRange=null,this.style=new Rt,this.table=new Ut,this.typing=new Ot(e),this.bullet=new Ft,this.history=new Nt(this.$editable),this.context.memo("help.undo",this.lang.help.undo),this.context.memo("help.redo",this.lang.help.redo),this.context.memo("help.tab",this.lang.help.tab),this.context.memo("help.untab",this.lang.help.untab),this.context.memo("help.insertParagraph",this.lang.help.insertParagraph),this.context.memo("help.insertOrderedList",this.lang.help.insertOrderedList),this.context.memo("help.insertUnorderedList",this.lang.help.insertUnorderedList),this.context.memo("help.indent",this.lang.help.indent),this.context.memo("help.outdent",this.lang.help.outdent),this.context.memo("help.formatPara",this.lang.help.formatPara),this.context.memo("help.insertHorizontalRule",this.lang.help.insertHorizontalRule),this.context.memo("help.fontName",this.lang.help.fontName);for(var i=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor"],o=0,a=i.length;o<a;o++)this[i[o]]=function(t){return function(e){n.beforeCommand(),document.execCommand(t,!1,e),n.afterCommand(!0)}}(i[o]),this.context.memo("help."+i[o],this.lang.help[i[o]]);this.fontName=this.wrapCommand((function(t){return n.fontStyling("font-family","'"+t+"'")})),this.fontSize=this.wrapCommand((function(t){return n.fontStyling("font-size",t+"px")}));for(o=1;o<=6;o++)this["formatH"+o]=function(t){return function(){n.formatBlock("H"+t)}}(o),this.context.memo("help.formatH"+o,this.lang.help["formatH"+o]);this.insertParagraph=this.wrapCommand((function(){n.typing.insertParagraph(n.editable)})),this.insertOrderedList=this.wrapCommand((function(){n.bullet.insertOrderedList(n.editable)})),this.insertUnorderedList=this.wrapCommand((function(){n.bullet.insertUnorderedList(n.editable)})),this.indent=this.wrapCommand((function(){n.bullet.indent(n.editable)})),this.outdent=this.wrapCommand((function(){n.bullet.outdent(n.editable)})),this.insertNode=this.wrapCommand((function(e){n.isLimited(t(e).text().length)||(n.getLastRange().insertNode(e),Pt.createFromNodeAfter(e).select(),n.setLastRange())})),this.insertText=this.wrapCommand((function(t){if(!n.isLimited(t.length)){var e=n.getLastRange().insertNode(Tt.createText(t));Pt.create(e,Tt.nodeLength(e)).select(),n.setLastRange()}})),this.pasteHTML=this.wrapCommand((function(t){if(!n.isLimited(t.length)){t=n.context.invoke("codeview.purify",t);var e=n.getLastRange().pasteHTML(t);Pt.createFromNodeAfter(F.last(e)).select(),n.setLastRange()}})),this.formatBlock=this.wrapCommand((function(t,e){var i=n.options.callbacks.onApplyCustomStyle;i?i.call(n,e,n.context,n.onFormatBlock):n.onFormatBlock(t,e)})),this.insertHorizontalRule=this.wrapCommand((function(){var t=n.getLastRange().insertNode(Tt.create("HR"));t.nextSibling&&(Pt.create(t.nextSibling,0).normalize().select(),n.setLastRange())})),this.lineHeight=this.wrapCommand((function(t){n.style.stylePara(n.getLastRange(),{lineHeight:t})})),this.createLink=this.wrapCommand((function(e){var i=e.url,o=e.text,a=e.isNewWindow,r=e.range||n.getLastRange(),s=o.length-r.toString().length;if(!(s>0&&n.isLimited(s))){var l=r.toString()!==o;"string"==typeof i&&(i=i.trim()),i=n.options.onCreateLink?n.options.onCreateLink(i):/^([A-Za-z][A-Za-z0-9+-.]*\:|#|\/)/.test(i)?i:"http://"+i;var c=[];if(l){var d=(r=r.deleteContents()).insertNode(t("<A>"+o+"</A>")[0]);c.push(d)}else c=n.style.styleNodes(r,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});t.each(c,(function(e,n){t(n).attr("href",i),a?t(n).attr("target","_blank"):t(n).removeAttr("target")}));var h=Pt.createFromNodeBefore(F.head(c)).getStartPoint(),u=Pt.createFromNodeAfter(F.last(c)).getEndPoint();Pt.create(h.node,h.offset,u.node,u.offset).select(),n.setLastRange()}})),this.color=this.wrapCommand((function(t){var e=t.foreColor,n=t.backColor;e&&document.execCommand("foreColor",!1,e),n&&document.execCommand("backColor",!1,n)})),this.foreColor=this.wrapCommand((function(t){document.execCommand("styleWithCSS",!1,!0),document.execCommand("foreColor",!1,t)})),this.insertTable=this.wrapCommand((function(t){var e=t.split("x");n.getLastRange().deleteContents().insertNode(n.table.createTable(e[0],e[1],n.options))})),this.removeMedia=this.wrapCommand((function(){var e=t(n.restoreTarget()).parent();e.parent("figure").length?e.parent("figure").remove():e=t(n.restoreTarget()).detach(),n.context.triggerEvent("media.delete",e,n.$editable)})),this.floatMe=this.wrapCommand((function(e){var i=t(n.restoreTarget());i.toggleClass("note-float-left","left"===e),i.toggleClass("note-float-right","right"===e),i.css("float","none"===e?"":e)})),this.resize=this.wrapCommand((function(e){var i=t(n.restoreTarget());0===(e=parseFloat(e))?i.css("width",""):i.css({width:100*e+"%",height:""})}))}return e.prototype.initialize=function(){var t=this;this.$editable.on("keydown",(function(e){if(e.keyCode===Mt.code.ENTER&&t.context.triggerEvent("enter",e),t.context.triggerEvent("keydown",e),e.isDefaultPrevented()||(t.options.shortcuts?t.handleKeyMap(e):t.preventDefaultEditableShortCuts(e)),t.isLimited(1,e))return!1})).on("keyup",(function(e){t.setLastRange(),t.context.triggerEvent("keyup",e)})).on("focus",(function(e){t.setLastRange(),t.context.triggerEvent("focus",e)})).on("blur",(function(e){t.context.triggerEvent("blur",e)})).on("mousedown",(function(e){t.context.triggerEvent("mousedown",e)})).on("mouseup",(function(e){t.setLastRange(),t.context.triggerEvent("mouseup",e)})).on("scroll",(function(e){t.context.triggerEvent("scroll",e)})).on("paste",(function(e){t.setLastRange(),t.context.triggerEvent("paste",e)})),this.$editable.attr("spellcheck",this.options.spellCheck),this.$editable.html(Tt.html(this.$note)||Tt.emptyPara),this.$editable.on(I.inputEventName,P.debounce((function(){t.context.triggerEvent("change",t.$editable.html(),t.$editable)}),10)),this.$editor.on("focusin",(function(e){t.context.triggerEvent("focusin",e)})).on("focusout",(function(e){t.context.triggerEvent("focusout",e)})),this.options.airMode||(this.options.width&&this.$editor.outerWidth(this.options.width),this.options.height&&this.$editable.outerHeight(this.options.height),this.options.maxHeight&&this.$editable.css("max-height",this.options.maxHeight),this.options.minHeight&&this.$editable.css("min-height",this.options.minHeight)),this.history.recordUndo(),this.setLastRange()},e.prototype.destroy=function(){this.$editable.off()},e.prototype.handleKeyMap=function(t){var e=this.options.keyMap[I.isMac?"mac":"pc"],n=[];t.metaKey&&n.push("CMD"),t.ctrlKey&&!t.altKey&&n.push("CTRL"),t.shiftKey&&n.push("SHIFT");var i=Mt.nameFromCode[t.keyCode];i&&n.push(i);var o=e[n.join("+")];o?!1!==this.context.invoke(o)&&t.preventDefault():Mt.isEdit(t.keyCode)&&this.afterCommand()},e.prototype.preventDefaultEditableShortCuts=function(t){(t.ctrlKey||t.metaKey)&&F.contains([66,73,85],t.keyCode)&&t.preventDefault()},e.prototype.isLimited=function(t,e){return t=t||0,(void 0===e||!(Mt.isMove(e.keyCode)||e.ctrlKey||e.metaKey||F.contains([Mt.code.BACKSPACE,Mt.code.DELETE],e.keyCode)))&&(this.options.maxTextLength>0&&this.$editable.text().length+t>=this.options.maxTextLength)},e.prototype.createRange=function(){return this.focus(),this.setLastRange(),this.getLastRange()},e.prototype.setLastRange=function(){this.lastRange=Pt.create(this.editable)},e.prototype.getLastRange=function(){return this.lastRange||this.setLastRange(),this.lastRange},e.prototype.saveRange=function(t){t&&this.getLastRange().collapse().select()},e.prototype.restoreRange=function(){this.lastRange&&(this.lastRange.select(),this.focus())},e.prototype.saveTarget=function(t){this.$editable.data("target",t)},e.prototype.clearTarget=function(){this.$editable.removeData("target")},e.prototype.restoreTarget=function(){return this.$editable.data("target")},e.prototype.currentStyle=function(){var t=Pt.create();return t&&(t=t.normalize()),t?this.style.current(t):this.style.fromNode(this.$editable)},e.prototype.styleFromNode=function(t){return this.style.fromNode(t)},e.prototype.undo=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.undo(),this.context.triggerEvent("change",this.$editable.html(),this.$editable)},e.prototype.commit=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.commit(),this.context.triggerEvent("change",this.$editable.html(),this.$editable)},e.prototype.redo=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.history.redo(),this.context.triggerEvent("change",this.$editable.html(),this.$editable)},e.prototype.beforeCommand=function(){this.context.triggerEvent("before.command",this.$editable.html()),this.focus()},e.prototype.afterCommand=function(t){this.normalizeContent(),this.history.recordUndo(),t||this.context.triggerEvent("change",this.$editable.html(),this.$editable)},e.prototype.tab=function(){var t=this.getLastRange();if(t.isCollapsed()&&t.isOnCell())this.table.tab(t);else{if(0===this.options.tabSize)return!1;this.isLimited(this.options.tabSize)||(this.beforeCommand(),this.typing.insertTab(t,this.options.tabSize),this.afterCommand())}},e.prototype.untab=function(){var t=this.getLastRange();if(t.isCollapsed()&&t.isOnCell())this.table.tab(t,!0);else if(0===this.options.tabSize)return!1},e.prototype.wrapCommand=function(t){return function(){this.beforeCommand(),t.apply(this,arguments),this.afterCommand()}},e.prototype.insertImage=function(e,n){var i,o=this;return(i=e,t.Deferred((function(e){var n=t("<img>");n.one("load",(function(){n.off("error abort"),e.resolve(n)})).one("error abort",(function(){n.off("load").detach(),e.reject(n)})).css({display:"none"}).appendTo(document.body).attr("src",i)})).promise()).then((function(t){o.beforeCommand(),"function"==typeof n?n(t):("string"==typeof n&&t.attr("data-filename",n),t.css("width",Math.min(o.$editable.width(),t.width()))),t.show(),Pt.create(o.editable).insertNode(t[0]),Pt.createFromNodeAfter(t[0]).select(),o.setLastRange(),o.afterCommand()})).fail((function(t){o.context.triggerEvent("image.upload.error",t)}))},e.prototype.insertImagesAsDataURL=function(e){var n=this;t.each(e,(function(e,i){var o=i.name;n.options.maximumImageFileSize&&n.options.maximumImageFileSize<i.size?n.context.triggerEvent("image.upload.error",n.lang.image.maximumFileSizeError):function(e){return t.Deferred((function(n){t.extend(new FileReader,{onload:function(t){var e=t.target.result;n.resolve(e)},onerror:function(t){n.reject(t)}}).readAsDataURL(e)})).promise()}(i).then((function(t){return n.insertImage(t,o)})).fail((function(){n.context.triggerEvent("image.upload.error")}))}))},e.prototype.insertImagesOrCallback=function(t){this.options.callbacks.onImageUpload?this.context.triggerEvent("image.upload",t):this.insertImagesAsDataURL(t)},e.prototype.getSelectedText=function(){var t=this.getLastRange();return t.isOnAnchor()&&(t=Pt.createFromNode(Tt.ancestor(t.sc,Tt.isAnchor))),t.toString()},e.prototype.onFormatBlock=function(e,n){if(document.execCommand("FormatBlock",!1,I.isMSIE?"<"+e+">":e),n&&n.length&&(n[0].tagName.toUpperCase()!==e.toUpperCase()&&(n=n.find(e)),n&&n.length)){var i=n[0].className||"";if(i){var o=this.createRange();t([o.sc,o.ec]).closest(e).addClass(i)}}},e.prototype.formatPara=function(){this.formatBlock("P")},e.prototype.fontStyling=function(e,n){var i=this.getLastRange();if(i){var o=this.style.styleNodes(i);if(t(o).css(e,n),i.isCollapsed()){var a=F.head(o);a&&!Tt.nodeLength(a)&&(a.innerHTML=Tt.ZERO_WIDTH_NBSP_CHAR,Pt.createFromNodeAfter(a.firstChild).select(),this.setLastRange(),this.$editable.data("bogus",a))}}},e.prototype.unlink=function(){var t=this.getLastRange();if(t.isOnAnchor()){var e=Tt.ancestor(t.sc,Tt.isAnchor);(t=Pt.createFromNode(e)).select(),this.setLastRange(),this.beforeCommand(),document.execCommand("unlink"),this.afterCommand()}},e.prototype.getLinkInfo=function(){var e=this.getLastRange().expand(Tt.isAnchor),n=t(F.head(e.nodes(Tt.isAnchor))),i={range:e,text:e.toString(),url:n.length?n.attr("href"):""};return n.length&&(i.isNewWindow="_blank"===n.attr("target")),i},e.prototype.addRow=function(t){var e=this.getLastRange(this.$editable);e.isCollapsed()&&e.isOnCell()&&(this.beforeCommand(),this.table.addRow(e,t),this.afterCommand())},e.prototype.addCol=function(t){var e=this.getLastRange(this.$editable);e.isCollapsed()&&e.isOnCell()&&(this.beforeCommand(),this.table.addCol(e,t),this.afterCommand())},e.prototype.deleteRow=function(){var t=this.getLastRange(this.$editable);t.isCollapsed()&&t.isOnCell()&&(this.beforeCommand(),this.table.deleteRow(t),this.afterCommand())},e.prototype.deleteCol=function(){var t=this.getLastRange(this.$editable);t.isCollapsed()&&t.isOnCell()&&(this.beforeCommand(),this.table.deleteCol(t),this.afterCommand())},e.prototype.deleteTable=function(){var t=this.getLastRange(this.$editable);t.isCollapsed()&&t.isOnCell()&&(this.beforeCommand(),this.table.deleteTable(t),this.afterCommand())},e.prototype.resizeTo=function(t,e,n){var i;if(n){var o=t.y/t.x,a=e.data("ratio");i={width:a>o?t.x:t.y/a,height:a>o?t.x*a:t.y}}else i={width:t.x,height:t.y};e.css(i)},e.prototype.hasFocus=function(){return this.$editable.is(":focus")},e.prototype.focus=function(){this.hasFocus()||this.$editable.focus()},e.prototype.isEmpty=function(){return Tt.isEmpty(this.$editable[0])||Tt.emptyPara===this.$editable.html()},e.prototype.empty=function(){this.context.invoke("code",Tt.emptyPara)},e.prototype.normalizeContent=function(){this.$editable[0].normalize()},e}(),zt=function(){function t(t){this.context=t,this.$editable=t.layoutInfo.editable}return t.prototype.initialize=function(){this.$editable.on("paste",this.pasteByEvent.bind(this))},t.prototype.pasteByEvent=function(t){var e=t.originalEvent.clipboardData;if(e&&e.items&&e.items.length){var n=e.items.length>1?e.items[1]:F.head(e.items);"file"===n.kind&&-1!==n.type.indexOf("image/")&&this.context.invoke("editor.insertImagesOrCallback",[n.getAsFile()]),this.context.invoke("editor.afterCommand")}},t}(),Wt=function(){function e(e){this.context=e,this.$eventListener=t(document),this.$editor=e.layoutInfo.editor,this.$editable=e.layoutInfo.editable,this.options=e.options,this.lang=this.options.langInfo,this.documentEventHandlers={},this.$dropzone=t(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(this.$editor)}return e.prototype.initialize=function(){this.options.disableDragAndDrop?(this.documentEventHandlers.onDrop=function(t){t.preventDefault()},this.$eventListener=this.$dropzone,this.$eventListener.on("drop",this.documentEventHandlers.onDrop)):this.attachDragAndDropEvent()},e.prototype.attachDragAndDropEvent=function(){var e=this,n=t(),i=this.$dropzone.find(".note-dropzone-message");this.documentEventHandlers.onDragenter=function(t){var o=e.context.invoke("codeview.isActivated"),a=e.$editor.width()>0&&e.$editor.height()>0;o||n.length||!a||(e.$editor.addClass("dragover"),e.$dropzone.width(e.$editor.width()),e.$dropzone.height(e.$editor.height()),i.text(e.lang.image.dragImageHere)),n=n.add(t.target)},this.documentEventHandlers.onDragleave=function(t){(n=n.not(t.target)).length||e.$editor.removeClass("dragover")},this.documentEventHandlers.onDrop=function(){n=t(),e.$editor.removeClass("dragover")},this.$eventListener.on("dragenter",this.documentEventHandlers.onDragenter).on("dragleave",this.documentEventHandlers.onDragleave).on("drop",this.documentEventHandlers.onDrop),this.$dropzone.on("dragenter",(function(){e.$dropzone.addClass("hover"),i.text(e.lang.image.dropImage)})).on("dragleave",(function(){e.$dropzone.removeClass("hover"),i.text(e.lang.image.dragImageHere)})),this.$dropzone.on("drop",(function(n){var i=n.originalEvent.dataTransfer;n.preventDefault(),i&&i.files&&i.files.length?(e.$editable.focus(),e.context.invoke("editor.insertImagesOrCallback",i.files)):t.each(i.types,(function(n,o){var a=i.getData(o);o.toLowerCase().indexOf("text")>-1?e.context.invoke("editor.pasteHTML",a):t(a).each((function(t,n){e.context.invoke("editor.insertNode",n)}))}))})).on("dragover",!1)},e.prototype.destroy=function(){var t=this;Object.keys(this.documentEventHandlers).forEach((function(e){t.$eventListener.off(e.substr(2).toLowerCase(),t.documentEventHandlers[e])})),this.documentEventHandlers={}},e}();I.hasCodeMirror&&(Bt=window.CodeMirror);var Yt=function(){function t(t){this.context=t,this.$editor=t.layoutInfo.editor,this.$editable=t.layoutInfo.editable,this.$codable=t.layoutInfo.codable,this.options=t.options}return t.prototype.sync=function(){this.isActivated()&&I.hasCodeMirror&&this.$codable.data("cmEditor").save()},t.prototype.isActivated=function(){return this.$editor.hasClass("codeview")},t.prototype.toggle=function(){this.isActivated()?this.deactivate():this.activate(),this.context.triggerEvent("codeview.toggled")},t.prototype.purify=function(t){if(this.options.codeviewFilter&&(t=t.replace(this.options.codeviewFilterRegex,""),this.options.codeviewIframeFilter)){var e=this.options.codeviewIframeWhitelistSrc.concat(this.options.codeviewIframeWhitelistSrcBase);t=t.replace(/(<iframe.*?>.*?(?:<\/iframe>)?)/gi,(function(t){if(/<.+src(?==?('|"|\s)?)[\s\S]+src(?=('|"|\s)?)[^>]*?>/i.test(t))return"";for(var n=0,i=e;n<i.length;n++){var o=i[n];if(new RegExp('src="(https?:)?//'+o.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+'/(.+)"').test(t))return t}return""}))}return t},t.prototype.activate=function(){var t=this;if(this.$codable.val(Tt.html(this.$editable,this.options.prettifyHtml)),this.$codable.height(this.$editable.height()),this.context.invoke("toolbar.updateCodeview",!0),this.$editor.addClass("codeview"),this.$codable.focus(),I.hasCodeMirror){var e=Bt.fromTextArea(this.$codable[0],this.options.codemirror);if(this.options.codemirror.tern){var n=new Bt.TernServer(this.options.codemirror.tern);e.ternServer=n,e.on("cursorActivity",(function(t){n.updateArgHints(t)}))}e.on("blur",(function(n){t.context.triggerEvent("blur.codeview",e.getValue(),n)})),e.on("change",(function(n){t.context.triggerEvent("change.codeview",e.getValue(),e)})),e.setSize(null,this.$editable.outerHeight()),this.$codable.data("cmEditor",e)}else this.$codable.on("blur",(function(e){t.context.triggerEvent("blur.codeview",t.$codable.val(),e)})),this.$codable.on("input",(function(e){t.context.triggerEvent("change.codeview",t.$codable.val(),t.$codable)}))},t.prototype.deactivate=function(){if(I.hasCodeMirror){var t=this.$codable.data("cmEditor");this.$codable.val(t.getValue()),t.toTextArea()}var e=this.purify(Tt.value(this.$codable,this.options.prettifyHtml)||Tt.emptyPara),n=this.$editable.html()!==e;this.$editable.html(e),this.$editable.height(this.options.height?this.$codable.height():"auto"),this.$editor.removeClass("codeview"),n&&this.context.triggerEvent("change",this.$editable.html(),this.$editable),this.$editable.focus(),this.context.invoke("toolbar.updateCodeview",!1)},t.prototype.destroy=function(){this.isActivated()&&this.deactivate()},t}(),qt=function(){function e(e){this.$document=t(document),this.$statusbar=e.layoutInfo.statusbar,this.$editable=e.layoutInfo.editable,this.options=e.options}return e.prototype.initialize=function(){var t=this;this.options.airMode||this.options.disableResizeEditor?this.destroy():this.$statusbar.on("mousedown",(function(e){e.preventDefault(),e.stopPropagation();var n=t.$editable.offset().top-t.$document.scrollTop(),i=function(e){var i=e.clientY-(n+24);i=t.options.minheight>0?Math.max(i,t.options.minheight):i,i=t.options.maxHeight>0?Math.min(i,t.options.maxHeight):i,t.$editable.height(i)};t.$document.on("mousemove",i).one("mouseup",(function(){t.$document.off("mousemove",i)}))}))},e.prototype.destroy=function(){this.$statusbar.off(),this.$statusbar.addClass("locked")},e}(),Vt=function(){function e(e){var n=this;this.context=e,this.$editor=e.layoutInfo.editor,this.$toolbar=e.layoutInfo.toolbar,this.$editable=e.layoutInfo.editable,this.$codable=e.layoutInfo.codable,this.$window=t(window),this.$scrollbar=t("html, body"),this.onResize=function(){n.resizeTo({h:n.$window.height()-n.$toolbar.outerHeight()})}}return e.prototype.resizeTo=function(t){this.$editable.css("height",t.h),this.$codable.css("height",t.h),this.$codable.data("cmeditor")&&this.$codable.data("cmeditor").setsize(null,t.h)},e.prototype.toggle=function(){this.$editor.toggleClass("fullscreen"),this.isFullscreen()?(this.$editable.data("orgHeight",this.$editable.css("height")),this.$editable.data("orgMaxHeight",this.$editable.css("maxHeight")),this.$editable.css("maxHeight",""),this.$window.on("resize",this.onResize).trigger("resize"),this.$scrollbar.css("overflow","hidden")):(this.$window.off("resize",this.onResize),this.resizeTo({h:this.$editable.data("orgHeight")}),this.$editable.css("maxHeight",this.$editable.css("orgMaxHeight")),this.$scrollbar.css("overflow","visible")),this.context.invoke("toolbar.updateFullscreen",this.isFullscreen())},e.prototype.isFullscreen=function(){return this.$editor.hasClass("fullscreen")},e}(),Gt=function(){function e(e){var n=this;this.context=e,this.$document=t(document),this.$editingArea=e.layoutInfo.editingArea,this.options=e.options,this.lang=this.options.langInfo,this.events={"summernote.mousedown":function(t,e){n.update(e.target,e)&&e.preventDefault()},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){n.update()},"summernote.disable":function(){n.hide()},"summernote.codeview.toggled":function(){n.update()}}}return e.prototype.initialize=function(){var e=this;this.$handle=t(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',this.options.disableResizeImage?"note-control-holder":"note-control-sizing",' note-control-se"></div>',this.options.disableResizeImage?"":'<div class="note-control-selection-info"></div>',"</div>","</div>"].join("")).prependTo(this.$editingArea),this.$handle.on("mousedown",(function(t){if(Tt.isControlSizing(t.target)){t.preventDefault(),t.stopPropagation();var n=e.$handle.find(".note-control-selection").data("target"),i=n.offset(),o=e.$document.scrollTop(),a=function(t){e.context.invoke("editor.resizeTo",{x:t.clientX-i.left,y:t.clientY-(i.top-o)},n,!t.shiftKey),e.update(n[0])};e.$document.on("mousemove",a).one("mouseup",(function(t){t.preventDefault(),e.$document.off("mousemove",a),e.context.invoke("editor.afterCommand")})),n.data("ratio")||n.data("ratio",n.height()/n.width())}})),this.$handle.on("wheel",(function(t){t.preventDefault(),e.update()}))},e.prototype.destroy=function(){this.$handle.remove()},e.prototype.update=function(e,n){if(this.context.isDisabled())return!1;var i=Tt.isImg(e),o=this.$handle.find(".note-control-selection");if(this.context.invoke("imagePopover.update",e,n),i){var a=t(e),r=a.position(),s={left:r.left+parseInt(a.css("marginLeft"),10),top:r.top+parseInt(a.css("marginTop"),10)},l={w:a.outerWidth(!1),h:a.outerHeight(!1)};o.css({display:"block",left:s.left,top:s.top,width:l.w,height:l.h}).data("target",a);var c=new Image;c.src=a.attr("src");var d=l.w+"x"+l.h+" ("+this.lang.image.original+": "+c.width+"x"+c.height+")";o.find(".note-control-selection-info").text(d),this.context.invoke("editor.saveTarget",e)}else this.hide();return i},e.prototype.hide=function(){this.context.invoke("editor.clearTarget"),this.$handle.children().hide()},e}(),Kt=/^([A-Za-z][A-Za-z0-9+-.]*\:[\/]{2}|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i,Jt=function(){function e(t){var e=this;this.context=t,this.events={"summernote.keyup":function(t,n){n.isDefaultPrevented()||e.handleKeyup(n)},"summernote.keydown":function(t,n){e.handleKeydown(n)}}}return e.prototype.initialize=function(){this.lastWordRange=null},e.prototype.destroy=function(){this.lastWordRange=null},e.prototype.replace=function(){if(this.lastWordRange){var e=this.lastWordRange.toString(),n=e.match(Kt);if(n&&(n[1]||n[2])){var i=n[1]?e:"http://"+e,o=t("<a />").html(e).attr("href",i)[0];this.context.options.linkTargetBlank&&t(o).attr("target","_blank"),this.lastWordRange.insertNode(o),this.lastWordRange=null,this.context.invoke("editor.focus")}}},e.prototype.handleKeydown=function(t){if(F.contains([Mt.code.ENTER,Mt.code.SPACE],t.keyCode)){var e=this.context.invoke("editor.createRange").getWordRange();this.lastWordRange=e}},e.prototype.handleKeyup=function(t){F.contains([Mt.code.ENTER,Mt.code.SPACE],t.keyCode)&&this.replace()},e}(),Xt=function(){function t(t){var e=this;this.$note=t.layoutInfo.note,this.events={"summernote.change":function(){e.$note.val(t.invoke("code"))}}}return t.prototype.shouldInitialize=function(){return Tt.isTextarea(this.$note[0])},t}(),Zt=function(){function t(t){var e=this;this.context=t,this.options=t.options.replace||{},this.keys=[Mt.code.ENTER,Mt.code.SPACE,Mt.code.PERIOD,Mt.code.COMMA,Mt.code.SEMICOLON,Mt.code.SLASH],this.previousKeydownCode=null,this.events={"summernote.keyup":function(t,n){n.isDefaultPrevented()||e.handleKeyup(n)},"summernote.keydown":function(t,n){e.handleKeydown(n)}}}return t.prototype.shouldInitialize=function(){return!!this.options.match},t.prototype.initialize=function(){this.lastWord=null},t.prototype.destroy=function(){this.lastWord=null},t.prototype.replace=function(){if(this.lastWord){var t=this,e=this.lastWord.toString();this.options.match(e,(function(e){if(e){var n="";if("string"==typeof e?n=Tt.createText(e):e instanceof jQuery?n=e[0]:e instanceof Node&&(n=e),!n)return;t.lastWord.insertNode(n),t.lastWord=null,t.context.invoke("editor.focus")}}))}},t.prototype.handleKeydown=function(t){if(this.previousKeydownCode&&F.contains(this.keys,this.previousKeydownCode))this.previousKeydownCode=t.keyCode;else{if(F.contains(this.keys,t.keyCode)){var e=this.context.invoke("editor.createRange").getWordRange();this.lastWord=e}this.previousKeydownCode=t.keyCode}},t.prototype.handleKeyup=function(t){F.contains(this.keys,t.keyCode)&&this.replace()},t}(),Qt=function(){function e(t){var e=this;this.context=t,this.$editingArea=t.layoutInfo.editingArea,this.options=t.options,this.events={"summernote.init summernote.change":function(){e.update()},"summernote.codeview.toggled":function(){e.update()}}}return e.prototype.shouldInitialize=function(){return!!this.options.placeholder},e.prototype.initialize=function(){var e=this;this.$placeholder=t('<div class="note-placeholder">'),this.$placeholder.on("click",(function(){e.context.invoke("focus")})).html(this.options.placeholder).prependTo(this.$editingArea),this.update()},e.prototype.destroy=function(){this.$placeholder.remove()},e.prototype.update=function(){var t=!this.context.invoke("codeview.isActivated")&&this.context.invoke("editor.isEmpty");this.$placeholder.toggle(t)},e}(),te=function(){function e(e){this.ui=t.summernote.ui,this.context=e,this.$toolbar=e.layoutInfo.toolbar,this.options=e.options,this.lang=this.options.langInfo,this.invertedKeyMap=P.invertObject(this.options.keyMap[I.isMac?"mac":"pc"])}return e.prototype.representShortcut=function(t){var e=this.invertedKeyMap[t];return this.options.shortcuts&&e?(I.isMac&&(e=e.replace("CMD","").replace("SHIFT",""))," ("+(e=e.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]"))+")"):""},e.prototype.button=function(t){return!this.options.tooltip&&t.tooltip&&delete t.tooltip,t.container=this.options.container,this.ui.button(t)},e.prototype.initialize=function(){this.addToolbarButtons(),this.addImagePopoverButtons(),this.addLinkPopoverButtons(),this.addTablePopoverButtons(),this.fontInstalledMap={}},e.prototype.destroy=function(){delete this.fontInstalledMap},e.prototype.isFontInstalled=function(t){return this.fontInstalledMap.hasOwnProperty(t)||(this.fontInstalledMap[t]=I.isFontInstalled(t)||F.contains(this.options.fontNamesIgnoreCheck,t)),this.fontInstalledMap[t]},e.prototype.isFontDeservedToAdd=function(t){return""!==(t=t.toLowerCase())&&this.isFontInstalled(t)&&-1===["sans-serif","serif","monospace","cursive","fantasy"].indexOf(t)},e.prototype.colorPalette=function(e,n,i,o){var a=this;return this.ui.buttonGroup({className:"note-color "+e,children:[this.button({className:"note-current-color-button",contents:this.ui.icon(this.options.icons.font+" note-recent-color"),tooltip:n,click:function(e){var n=t(e.currentTarget);i&&o?a.context.invoke("editor.color",{backColor:n.attr("data-backColor"),foreColor:n.attr("data-foreColor")}):i?a.context.invoke("editor.color",{backColor:n.attr("data-backColor")}):o&&a.context.invoke("editor.color",{foreColor:n.attr("data-foreColor")})},callback:function(t){var e=t.find(".note-recent-color");i&&(e.css("background-color",a.options.colorButton.backColor),t.attr("data-backColor",a.options.colorButton.backColor)),o?(e.css("color",a.options.colorButton.foreColor),t.attr("data-foreColor",a.options.colorButton.foreColor)):e.css("color","transparent")}}),this.button({className:"dropdown-toggle",contents:this.ui.dropdownButtonContents("",this.options),tooltip:this.lang.color.more,data:{toggle:"dropdown"}}),this.ui.dropdown({items:(i?['<div class="note-palette">','  <div class="note-palette-title">'+this.lang.color.background+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="backColor" data-value="inherit">',this.lang.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"  <div>",'    <button type="button" class="note-color-select btn" data-event="openPalette" data-value="backColorPicker">',this.lang.color.cpSelect,"    </button>",'    <input type="color" id="backColorPicker" class="note-btn note-color-select-btn" value="'+this.options.colorButton.backColor+'" data-event="backColorPalette">',"  </div>",'  <div class="note-holder-custom" id="backColorPalette" data-event="backColor"/>',"</div>"].join(""):"")+(o?['<div class="note-palette">','  <div class="note-palette-title">'+this.lang.color.foreground+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-light" data-event="removeFormat" data-value="foreColor">',this.lang.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"  <div>",'    <button type="button" class="note-color-select btn" data-event="openPalette" data-value="foreColorPicker">',this.lang.color.cpSelect,"    </button>",'    <input type="color" id="foreColorPicker" class="note-btn note-color-select-btn" value="'+this.options.colorButton.foreColor+'" data-event="foreColorPalette">','  <div class="note-holder-custom" id="foreColorPalette" data-event="foreColor"/>',"</div>"].join(""):""),callback:function(e){e.find(".note-holder").each((function(e,n){var i=t(n);i.append(a.ui.palette({colors:a.options.colors,colorsName:a.options.colorsName,eventName:i.data("event"),container:a.options.container,tooltip:a.options.tooltip}).render())}));var n=[["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF"]];e.find(".note-holder-custom").each((function(e,i){var o=t(i);o.append(a.ui.palette({colors:n,colorsName:n,eventName:o.data("event"),container:a.options.container,tooltip:a.options.tooltip}).render())})),e.find("input[type=color]").each((function(n,i){t(i).change((function(){var n=e.find("#"+t(this).data("event")).find(".note-color-btn").first(),i=this.value.toUpperCase();n.css("background-color",i).attr("aria-label",i).attr("data-value",i).attr("data-original-title",i),n.click()}))}))},click:function(n){n.stopPropagation();var i=t("."+e),o=t(n.target),r=o.data("event"),s=o.attr("data-value");if("openPalette"===r){var l=i.find("#"+s),c=t(i.find("#"+l.data("event")).find(".note-color-row")[0]),d=c.find(".note-color-btn").last().detach(),h=l.val();d.css("background-color",h).attr("aria-label",h).attr("data-value",h).attr("data-original-title",h),c.prepend(d),l.click()}else if(F.contains(["backColor","foreColor"],r)){var u="backColor"===r?"background-color":"color",p=o.closest(".note-color").find(".note-recent-color"),f=o.closest(".note-color").find(".note-current-color-button");p.css(u,s),f.attr("data-"+r,s),a.context.invoke("editor."+r,s)}}})]}).render()},e.prototype.addToolbarButtons=function(){var e=this;this.context.memo("button.style",(function(){return e.ui.buttonGroup([e.button({className:"dropdown-toggle",contents:e.ui.dropdownButtonContents(e.ui.icon(e.options.icons.magic),e.options),tooltip:e.lang.style.style,data:{toggle:"dropdown"}}),e.ui.dropdown({className:"dropdown-style",items:e.options.styleTags,title:e.lang.style.style,template:function(t){"string"==typeof t&&(t={tag:t,title:e.lang.style.hasOwnProperty(t)?e.lang.style[t]:t});var n=t.tag,i=t.title;return"<"+n+(t.style?' style="'+t.style+'" ':"")+(t.className?' class="'+t.className+'"':"")+">"+i+"</"+n+">"},click:e.context.createInvokeHandler("editor.formatBlock")})]).render()}));for(var n=function(t,n){var o=i.options.styleTags[t];i.context.memo("button.style."+o,(function(){return e.button({className:"note-btn-style-"+o,contents:'<div data-value="'+o+'">'+o.toUpperCase()+"</div>",tooltip:e.lang.style[o],click:e.context.createInvokeHandler("editor.formatBlock")}).render()}))},i=this,o=0,a=this.options.styleTags.length;o<a;o++)n(o);this.context.memo("button.bold",(function(){return e.button({className:"note-btn-bold",contents:e.ui.icon(e.options.icons.bold),tooltip:e.lang.font.bold+e.representShortcut("bold"),click:e.context.createInvokeHandlerAndUpdateState("editor.bold")}).render()})),this.context.memo("button.italic",(function(){return e.button({className:"note-btn-italic",contents:e.ui.icon(e.options.icons.italic),tooltip:e.lang.font.italic+e.representShortcut("italic"),click:e.context.createInvokeHandlerAndUpdateState("editor.italic")}).render()})),this.context.memo("button.underline",(function(){return e.button({className:"note-btn-underline",contents:e.ui.icon(e.options.icons.underline),tooltip:e.lang.font.underline+e.representShortcut("underline"),click:e.context.createInvokeHandlerAndUpdateState("editor.underline")}).render()})),this.context.memo("button.clear",(function(){return e.button({contents:e.ui.icon(e.options.icons.eraser),tooltip:e.lang.font.clear+e.representShortcut("removeFormat"),click:e.context.createInvokeHandler("editor.removeFormat")}).render()})),this.context.memo("button.strikethrough",(function(){return e.button({className:"note-btn-strikethrough",contents:e.ui.icon(e.options.icons.strikethrough),tooltip:e.lang.font.strikethrough+e.representShortcut("strikethrough"),click:e.context.createInvokeHandlerAndUpdateState("editor.strikethrough")}).render()})),this.context.memo("button.superscript",(function(){return e.button({className:"note-btn-superscript",contents:e.ui.icon(e.options.icons.superscript),tooltip:e.lang.font.superscript,click:e.context.createInvokeHandlerAndUpdateState("editor.superscript")}).render()})),this.context.memo("button.subscript",(function(){return e.button({className:"note-btn-subscript",contents:e.ui.icon(e.options.icons.subscript),tooltip:e.lang.font.subscript,click:e.context.createInvokeHandlerAndUpdateState("editor.subscript")}).render()})),this.context.memo("button.fontname",(function(){var n=e.context.invoke("editor.currentStyle");return t.each(n["font-family"].split(","),(function(t,n){n=n.trim().replace(/['"]+/g,""),e.isFontDeservedToAdd(n)&&-1===e.options.fontNames.indexOf(n)&&e.options.fontNames.push(n)})),e.ui.buttonGroup([e.button({className:"dropdown-toggle",contents:e.ui.dropdownButtonContents('<span class="note-current-fontname"/>',e.options),tooltip:e.lang.font.name,data:{toggle:"dropdown"}}),e.ui.dropdownCheck({className:"dropdown-fontname",checkClassName:e.options.icons.menuCheck,items:e.options.fontNames.filter(e.isFontInstalled.bind(e)),title:e.lang.font.name,template:function(t){return"<span style=\"font-family: '"+t+"'\">"+t+"</span>"},click:e.context.createInvokeHandlerAndUpdateState("editor.fontName")})]).render()})),this.context.memo("button.fontsize",(function(){return e.ui.buttonGroup([e.button({className:"dropdown-toggle",contents:e.ui.dropdownButtonContents('<span class="note-current-fontsize"/>',e.options),tooltip:e.lang.font.size,data:{toggle:"dropdown"}}),e.ui.dropdownCheck({className:"dropdown-fontsize",checkClassName:e.options.icons.menuCheck,items:e.options.fontSizes,title:e.lang.font.size,click:e.context.createInvokeHandlerAndUpdateState("editor.fontSize")})]).render()})),this.context.memo("button.color",(function(){return e.colorPalette("note-color-all",e.lang.color.recent,!0,!0)})),this.context.memo("button.forecolor",(function(){return e.colorPalette("note-color-fore",e.lang.color.foreground,!1,!0)})),this.context.memo("button.backcolor",(function(){return e.colorPalette("note-color-back",e.lang.color.background,!0,!1)})),this.context.memo("button.ul",(function(){return e.button({contents:e.ui.icon(e.options.icons.unorderedlist),tooltip:e.lang.lists.unordered+e.representShortcut("insertUnorderedList"),click:e.context.createInvokeHandler("editor.insertUnorderedList")}).render()})),this.context.memo("button.ol",(function(){return e.button({contents:e.ui.icon(e.options.icons.orderedlist),tooltip:e.lang.lists.ordered+e.representShortcut("insertOrderedList"),click:e.context.createInvokeHandler("editor.insertOrderedList")}).render()}));var r=this.button({contents:this.ui.icon(this.options.icons.alignLeft),tooltip:this.lang.paragraph.left+this.representShortcut("justifyLeft"),click:this.context.createInvokeHandler("editor.justifyLeft")}),s=this.button({contents:this.ui.icon(this.options.icons.alignCenter),tooltip:this.lang.paragraph.center+this.representShortcut("justifyCenter"),click:this.context.createInvokeHandler("editor.justifyCenter")}),l=this.button({contents:this.ui.icon(this.options.icons.alignRight),tooltip:this.lang.paragraph.right+this.representShortcut("justifyRight"),click:this.context.createInvokeHandler("editor.justifyRight")}),c=this.button({contents:this.ui.icon(this.options.icons.alignJustify),tooltip:this.lang.paragraph.justify+this.representShortcut("justifyFull"),click:this.context.createInvokeHandler("editor.justifyFull")}),d=this.button({contents:this.ui.icon(this.options.icons.outdent),tooltip:this.lang.paragraph.outdent+this.representShortcut("outdent"),click:this.context.createInvokeHandler("editor.outdent")}),h=this.button({contents:this.ui.icon(this.options.icons.indent),tooltip:this.lang.paragraph.indent+this.representShortcut("indent"),click:this.context.createInvokeHandler("editor.indent")});this.context.memo("button.justifyLeft",P.invoke(r,"render")),this.context.memo("button.justifyCenter",P.invoke(s,"render")),this.context.memo("button.justifyRight",P.invoke(l,"render")),this.context.memo("button.justifyFull",P.invoke(c,"render")),this.context.memo("button.outdent",P.invoke(d,"render")),this.context.memo("button.indent",P.invoke(h,"render")),this.context.memo("button.paragraph",(function(){return e.ui.buttonGroup([e.button({className:"dropdown-toggle",contents:e.ui.dropdownButtonContents(e.ui.icon(e.options.icons.alignLeft),e.options),tooltip:e.lang.paragraph.paragraph,data:{toggle:"dropdown"}}),e.ui.dropdown([e.ui.buttonGroup({className:"note-align",children:[r,s,l,c]}),e.ui.buttonGroup({className:"note-list",children:[d,h]})])]).render()})),this.context.memo("button.height",(function(){return e.ui.buttonGroup([e.button({className:"dropdown-toggle",contents:e.ui.dropdownButtonContents(e.ui.icon(e.options.icons.textHeight),e.options),tooltip:e.lang.font.height,data:{toggle:"dropdown"}}),e.ui.dropdownCheck({items:e.options.lineHeights,checkClassName:e.options.icons.menuCheck,className:"dropdown-line-height",title:e.lang.font.height,click:e.context.createInvokeHandler("editor.lineHeight")})]).render()})),this.context.memo("button.table",(function(){return e.ui.buttonGroup([e.button({className:"dropdown-toggle",contents:e.ui.dropdownButtonContents(e.ui.icon(e.options.icons.table),e.options),tooltip:e.lang.table.table,data:{toggle:"dropdown"}}),e.ui.dropdown({title:e.lang.table.table,className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(t){t.find(".note-dimension-picker-mousecatcher").css({width:e.options.insertTableMaxSize.col+"em",height:e.options.insertTableMaxSize.row+"em"}).mousedown(e.context.createInvokeHandler("editor.insertTable")).on("mousemove",e.tableMoveHandler.bind(e))}}).render()})),this.context.memo("button.link",(function(){return e.button({contents:e.ui.icon(e.options.icons.link),tooltip:e.lang.link.link+e.representShortcut("linkDialog.show"),click:e.context.createInvokeHandler("linkDialog.show")}).render()})),this.context.memo("button.picture",(function(){return e.button({contents:e.ui.icon(e.options.icons.picture),tooltip:e.lang.image.image,click:e.context.createInvokeHandler("imageDialog.show")}).render()})),this.context.memo("button.video",(function(){return e.button({contents:e.ui.icon(e.options.icons.video),tooltip:e.lang.video.video,click:e.context.createInvokeHandler("videoDialog.show")}).render()})),this.context.memo("button.hr",(function(){return e.button({contents:e.ui.icon(e.options.icons.minus),tooltip:e.lang.hr.insert+e.representShortcut("insertHorizontalRule"),click:e.context.createInvokeHandler("editor.insertHorizontalRule")}).render()})),this.context.memo("button.fullscreen",(function(){return e.button({className:"btn-fullscreen",contents:e.ui.icon(e.options.icons.arrowsAlt),tooltip:e.lang.options.fullscreen,click:e.context.createInvokeHandler("fullscreen.toggle")}).render()})),this.context.memo("button.codeview",(function(){return e.button({className:"btn-codeview",contents:e.ui.icon(e.options.icons.code),tooltip:e.lang.options.codeview,click:e.context.createInvokeHandler("codeview.toggle")}).render()})),this.context.memo("button.redo",(function(){return e.button({contents:e.ui.icon(e.options.icons.redo),tooltip:e.lang.history.redo+e.representShortcut("redo"),click:e.context.createInvokeHandler("editor.redo")}).render()})),this.context.memo("button.undo",(function(){return e.button({contents:e.ui.icon(e.options.icons.undo),tooltip:e.lang.history.undo+e.representShortcut("undo"),click:e.context.createInvokeHandler("editor.undo")}).render()})),this.context.memo("button.help",(function(){return e.button({contents:e.ui.icon(e.options.icons.question),tooltip:e.lang.options.help,click:e.context.createInvokeHandler("helpDialog.show")}).render()}))},e.prototype.addImagePopoverButtons=function(){var t=this;this.context.memo("button.resizeFull",(function(){return t.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:t.lang.image.resizeFull,click:t.context.createInvokeHandler("editor.resize","1")}).render()})),this.context.memo("button.resizeHalf",(function(){return t.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:t.lang.image.resizeHalf,click:t.context.createInvokeHandler("editor.resize","0.5")}).render()})),this.context.memo("button.resizeQuarter",(function(){return t.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:t.lang.image.resizeQuarter,click:t.context.createInvokeHandler("editor.resize","0.25")}).render()})),this.context.memo("button.resizeNone",(function(){return t.button({contents:t.ui.icon(t.options.icons.rollback),tooltip:t.lang.image.resizeNone,click:t.context.createInvokeHandler("editor.resize","0")}).render()})),this.context.memo("button.floatLeft",(function(){return t.button({contents:t.ui.icon(t.options.icons.floatLeft),tooltip:t.lang.image.floatLeft,click:t.context.createInvokeHandler("editor.floatMe","left")}).render()})),this.context.memo("button.floatRight",(function(){return t.button({contents:t.ui.icon(t.options.icons.floatRight),tooltip:t.lang.image.floatRight,click:t.context.createInvokeHandler("editor.floatMe","right")}).render()})),this.context.memo("button.floatNone",(function(){return t.button({contents:t.ui.icon(t.options.icons.rollback),tooltip:t.lang.image.floatNone,click:t.context.createInvokeHandler("editor.floatMe","none")}).render()})),this.context.memo("button.removeMedia",(function(){return t.button({contents:t.ui.icon(t.options.icons.trash),tooltip:t.lang.image.remove,click:t.context.createInvokeHandler("editor.removeMedia")}).render()}))},e.prototype.addLinkPopoverButtons=function(){var t=this;this.context.memo("button.linkDialogShow",(function(){return t.button({contents:t.ui.icon(t.options.icons.link),tooltip:t.lang.link.edit,click:t.context.createInvokeHandler("linkDialog.show")}).render()})),this.context.memo("button.unlink",(function(){return t.button({contents:t.ui.icon(t.options.icons.unlink),tooltip:t.lang.link.unlink,click:t.context.createInvokeHandler("editor.unlink")}).render()}))},e.prototype.addTablePopoverButtons=function(){var t=this;this.context.memo("button.addRowUp",(function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.rowAbove),tooltip:t.lang.table.addRowAbove,click:t.context.createInvokeHandler("editor.addRow","top")}).render()})),this.context.memo("button.addRowDown",(function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.rowBelow),tooltip:t.lang.table.addRowBelow,click:t.context.createInvokeHandler("editor.addRow","bottom")}).render()})),this.context.memo("button.addColLeft",(function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.colBefore),tooltip:t.lang.table.addColLeft,click:t.context.createInvokeHandler("editor.addCol","left")}).render()})),this.context.memo("button.addColRight",(function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.colAfter),tooltip:t.lang.table.addColRight,click:t.context.createInvokeHandler("editor.addCol","right")}).render()})),this.context.memo("button.deleteRow",(function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.rowRemove),tooltip:t.lang.table.delRow,click:t.context.createInvokeHandler("editor.deleteRow")}).render()})),this.context.memo("button.deleteCol",(function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.colRemove),tooltip:t.lang.table.delCol,click:t.context.createInvokeHandler("editor.deleteCol")}).render()})),this.context.memo("button.deleteTable",(function(){return t.button({className:"btn-md",contents:t.ui.icon(t.options.icons.trash),tooltip:t.lang.table.delTable,click:t.context.createInvokeHandler("editor.deleteTable")}).render()}))},e.prototype.build=function(t,e){for(var n=0,i=e.length;n<i;n++){for(var o=e[n],a=Array.isArray(o)?o[0]:o,r=Array.isArray(o)?1===o.length?[o[0]]:o[1]:[o],s=this.ui.buttonGroup({className:"note-"+a}).render(),l=0,c=r.length;l<c;l++){var d=this.context.memo("button."+r[l]);d&&s.append("function"==typeof d?d():d)}s.appendTo(t)}},e.prototype.updateCurrentStyle=function(e){var n=this,i=e||this.$toolbar,o=this.context.invoke("editor.currentStyle");if(this.updateBtnStates(i,{".note-btn-bold":function(){return"bold"===o["font-bold"]},".note-btn-italic":function(){return"italic"===o["font-italic"]},".note-btn-underline":function(){return"underline"===o["font-underline"]},".note-btn-subscript":function(){return"subscript"===o["font-subscript"]},".note-btn-superscript":function(){return"superscript"===o["font-superscript"]},".note-btn-strikethrough":function(){return"strikethrough"===o["font-strikethrough"]}}),o["font-family"]){var a=o["font-family"].split(",").map((function(t){return t.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")})),r=F.find(a,this.isFontInstalled.bind(this));i.find(".dropdown-fontname a").each((function(e,n){var i=t(n),o=i.data("value")+""==r+"";i.toggleClass("checked",o)})),i.find(".note-current-fontname").text(r).css("font-family",r)}if(o["font-size"]){var s=o["font-size"];i.find(".dropdown-fontsize a").each((function(e,n){var i=t(n),o=i.data("value")+""==s+"";i.toggleClass("checked",o)})),i.find(".note-current-fontsize").text(s)}if(o["line-height"]){var l=o["line-height"];i.find(".dropdown-line-height li a").each((function(e,i){var o=t(i).data("value")+""==l+"";n.className=o?"checked":""}))}},e.prototype.updateBtnStates=function(e,n){var i=this;t.each(n,(function(t,n){i.ui.toggleBtnActive(e.find(t),n())}))},e.prototype.tableMoveHandler=function(e){var n,i=t(e.target.parentNode),o=i.next(),a=i.find(".note-dimension-picker-mousecatcher"),r=i.find(".note-dimension-picker-highlighted"),s=i.find(".note-dimension-picker-unhighlighted");if(void 0===e.offsetX){var l=t(e.target).offset();n={x:e.pageX-l.left,y:e.pageY-l.top}}else n={x:e.offsetX,y:e.offsetY};var c=Math.ceil(n.x/18)||1,d=Math.ceil(n.y/18)||1;r.css({width:c+"em",height:d+"em"}),a.data("value",c+"x"+d),c>3&&c<this.options.insertTableMaxSize.col&&s.css({width:c+1+"em"}),d>3&&d<this.options.insertTableMaxSize.row&&s.css({height:d+1+"em"}),o.html(c+" x "+d)},e}(),ee=function(){function e(e){this.context=e,this.$window=t(window),this.$document=t(document),this.ui=t.summernote.ui,this.$note=e.layoutInfo.note,this.$editor=e.layoutInfo.editor,this.$toolbar=e.layoutInfo.toolbar,this.$editable=e.layoutInfo.editable,this.$statusbar=e.layoutInfo.statusbar,this.options=e.options,this.isFollowing=!1,this.followScroll=this.followScroll.bind(this)}return e.prototype.shouldInitialize=function(){return!this.options.airMode},e.prototype.initialize=function(){var t=this;this.options.toolbar=this.options.toolbar||[],this.options.toolbar.length?this.context.invoke("buttons.build",this.$toolbar,this.options.toolbar):this.$toolbar.hide(),this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer),this.changeContainer(!1),this.$note.on("summernote.keyup summernote.mouseup summernote.change",(function(){t.context.invoke("buttons.updateCurrentStyle")})),this.context.invoke("buttons.updateCurrentStyle"),this.options.followingToolbar&&this.$window.on("scroll resize",this.followScroll)},e.prototype.destroy=function(){this.$toolbar.children().remove(),this.options.followingToolbar&&this.$window.off("scroll resize",this.followScroll)},e.prototype.followScroll=function(){if(this.$editor.hasClass("fullscreen"))return!1;var e=this.$editor.outerHeight(),n=this.$editor.width(),i=this.$toolbar.height(),o=this.$statusbar.height(),a=0;this.options.otherStaticBar&&(a=t(this.options.otherStaticBar).outerHeight());var r=this.$document.scrollTop(),s=this.$editor.offset().top,l=s-a,c=s+e-a-i-o;!this.isFollowing&&r>l&&r<c-i?(this.isFollowing=!0,this.$toolbar.css({position:"fixed",top:a,width:n}),this.$editable.css({marginTop:this.$toolbar.height()+5})):this.isFollowing&&(r<l||r>c)&&(this.isFollowing=!1,this.$toolbar.css({position:"relative",top:0,width:"100%"}),this.$editable.css({marginTop:""}))},e.prototype.changeContainer=function(t){t?this.$toolbar.prependTo(this.$editor):this.options.toolbarContainer&&this.$toolbar.appendTo(this.options.toolbarContainer),this.followScroll()},e.prototype.updateFullscreen=function(t){this.ui.toggleBtnActive(this.$toolbar.find(".btn-fullscreen"),t),this.changeContainer(t)},e.prototype.updateCodeview=function(t){this.ui.toggleBtnActive(this.$toolbar.find(".btn-codeview"),t),t?this.deactivate():this.activate()},e.prototype.activate=function(t){var e=this.$toolbar.find("button");t||(e=e.not(".btn-codeview")),this.ui.toggleBtn(e,!0)},e.prototype.deactivate=function(t){var e=this.$toolbar.find("button");t||(e=e.not(".btn-codeview")),this.ui.toggleBtn(e,!1)},e}(),ne=function(){function e(e){this.context=e,this.ui=t.summernote.ui,this.$body=t(document.body),this.$editor=e.layoutInfo.editor,this.options=e.options,this.lang=this.options.langInfo,e.memo("help.linkDialog.show",this.options.langInfo.help["linkDialog.show"])}return e.prototype.initialize=function(){var e=this.options.dialogsInBody?this.$body:this.$editor,n=['<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.textToDisplay+"</label>",'<input class="note-link-text form-control note-form-control note-input" type="text" />',"</div>",'<div class="form-group note-form-group">','<label class="note-form-label">'+this.lang.link.url+"</label>",'<input class="note-link-url form-control note-form-control note-input" type="text" value="http://" />',"</div>",this.options.disableLinkTarget?"":t("<div/>").append(this.ui.checkbox({className:"sn-checkbox-open-in-new-window",text:this.lang.link.openInNewWindow,checked:!0}).render()).html()].join(""),i='<input type="button" href="#" class="btn btn-primary note-btn note-btn-primary note-link-btn" value="'+this.lang.link.insert+'" disabled>';this.$dialog=this.ui.dialog({className:"link-dialog",title:this.lang.link.insert,fade:this.options.dialogsFade,body:n,footer:i}).render().appendTo(e)},e.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},e.prototype.bindEnterKey=function(t,e){t.on("keypress",(function(t){t.keyCode===Mt.code.ENTER&&(t.preventDefault(),e.trigger("click"))}))},e.prototype.toggleLinkBtn=function(t,e,n){this.ui.toggleBtn(t,e.val()&&n.val())},e.prototype.showLinkDialog=function(e){var n=this;return t.Deferred((function(t){var i=n.$dialog.find(".note-link-text"),o=n.$dialog.find(".note-link-url"),a=n.$dialog.find(".note-link-btn"),r=n.$dialog.find(".sn-checkbox-open-in-new-window input[type=checkbox]");n.ui.onDialogShown(n.$dialog,(function(){n.context.triggerEvent("dialog.shown"),!e.url&&P.isValidUrl(e.text)&&(e.url=e.text),i.on("input paste propertychange",(function(){e.text=i.val(),n.toggleLinkBtn(a,i,o)})).val(e.text),o.on("input paste propertychange",(function(){e.text||i.val(o.val()),n.toggleLinkBtn(a,i,o)})).val(e.url),I.isSupportTouch||o.trigger("focus"),n.toggleLinkBtn(a,i,o),n.bindEnterKey(o,a),n.bindEnterKey(i,a);var s=void 0!==e.isNewWindow?e.isNewWindow:n.context.options.linkTargetBlank;r.prop("checked",s),a.one("click",(function(a){a.preventDefault(),t.resolve({range:e.range,url:o.val(),text:i.val(),isNewWindow:r.is(":checked")}),n.ui.hideDialog(n.$dialog)}))})),n.ui.onDialogHidden(n.$dialog,(function(){i.off(),o.off(),a.off(),"pending"===t.state()&&t.reject()})),n.ui.showDialog(n.$dialog)})).promise()},e.prototype.show=function(){var t=this,e=this.context.invoke("editor.getLinkInfo");this.context.invoke("editor.saveRange"),this.showLinkDialog(e).then((function(e){t.context.invoke("editor.restoreRange"),t.context.invoke("editor.createLink",e)})).fail((function(){t.context.invoke("editor.restoreRange")}))},e}(),ie=function(){function e(e){var n=this;this.context=e,this.ui=t.summernote.ui,this.options=e.options,this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){n.update()},"summernote.disable summernote.dialog.shown":function(){n.hide()}}}return e.prototype.shouldInitialize=function(){return!F.isEmpty(this.options.popover.link)},e.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-link-popover",callback:function(t){t.find(".popover-content,.note-popover-content").prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.link)},e.prototype.destroy=function(){this.$popover.remove()},e.prototype.update=function(){if(this.context.invoke("editor.hasFocus")){var e=this.context.invoke("editor.getLastRange");if(e.isCollapsed()&&e.isOnAnchor()){var n=Tt.ancestor(e.sc,Tt.isAnchor),i=t(n).attr("href");this.$popover.find("a").attr("href",i).html(i);var o=Tt.posFromPlaceholder(n);this.$popover.css({display:"block",left:o.left,top:o.top})}else this.hide()}else this.hide()},e.prototype.hide=function(){this.$popover.hide()},e}(),oe=function(){function e(e){this.context=e,this.ui=t.summernote.ui,this.$body=t(document.body),this.$editor=e.layoutInfo.editor,this.options=e.options,this.lang=this.options.langInfo}return e.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor,e="";if(this.options.maximumImageFileSize){var n=Math.floor(Math.log(this.options.maximumImageFileSize)/Math.log(1024)),i=1*(this.options.maximumImageFileSize/Math.pow(1024,n)).toFixed(2)+" "+" KMGTP"[n]+"B";e="<small>"+this.lang.image.maximumFileSize+" : "+i+"</small>"}var o=['<div class="form-group note-form-group note-group-select-from-files">','<label class="note-form-label">'+this.lang.image.selectFromFiles+"</label>",'<input class="note-image-input form-control-file note-form-control note-input" ',' type="file" name="files" accept="image/*" multiple="multiple" />',e,"</div>",'<div class="form-group note-group-image-url" style="overflow:auto;">','<label class="note-form-label">'+this.lang.image.url+"</label>",'<input class="note-image-url form-control note-form-control note-input ',' col-md-12" type="text" />',"</div>"].join(""),a='<input type="button" href="#" class="btn btn-primary note-btn note-btn-primary note-image-btn" value="'+this.lang.image.insert+'" disabled>';this.$dialog=this.ui.dialog({title:this.lang.image.insert,fade:this.options.dialogsFade,body:o,footer:a}).render().appendTo(t)},e.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},e.prototype.bindEnterKey=function(t,e){t.on("keypress",(function(t){t.keyCode===Mt.code.ENTER&&(t.preventDefault(),e.trigger("click"))}))},e.prototype.show=function(){var t=this;this.context.invoke("editor.saveRange"),this.showImageDialog().then((function(e){t.ui.hideDialog(t.$dialog),t.context.invoke("editor.restoreRange"),"string"==typeof e?t.options.callbacks.onImageLinkInsert?t.context.triggerEvent("image.link.insert",e):t.context.invoke("editor.insertImage",e):t.context.invoke("editor.insertImagesOrCallback",e)})).fail((function(){t.context.invoke("editor.restoreRange")}))},e.prototype.showImageDialog=function(){var e=this;return t.Deferred((function(t){var n=e.$dialog.find(".note-image-input"),i=e.$dialog.find(".note-image-url"),o=e.$dialog.find(".note-image-btn");e.ui.onDialogShown(e.$dialog,(function(){e.context.triggerEvent("dialog.shown"),n.replaceWith(n.clone().on("change",(function(e){t.resolve(e.target.files||e.target.value)})).val("")),i.on("input paste propertychange",(function(){e.ui.toggleBtn(o,i.val())})).val(""),I.isSupportTouch||i.trigger("focus"),o.click((function(e){e.preventDefault(),t.resolve(i.val())})),e.bindEnterKey(i,o)})),e.ui.onDialogHidden(e.$dialog,(function(){n.off(),i.off(),o.off(),"pending"===t.state()&&t.reject()})),e.ui.showDialog(e.$dialog)}))},e}(),ae=function(){function e(e){var n=this;this.context=e,this.ui=t.summernote.ui,this.editable=e.layoutInfo.editable[0],this.options=e.options,this.events={"summernote.disable":function(){n.hide()}}}return e.prototype.shouldInitialize=function(){return!F.isEmpty(this.options.popover.image)},e.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-image-popover"}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.image)},e.prototype.destroy=function(){this.$popover.remove()},e.prototype.update=function(t,e){if(Tt.isImg(t)){var n=Tt.posFromPlaceholder(t),i=Tt.posFromPlaceholder(this.editable);this.$popover.css({display:"block",left:this.options.popatmouse?e.pageX-20:n.left,top:this.options.popatmouse?e.pageY:Math.min(n.top,i.top)})}else this.hide()},e.prototype.hide=function(){this.$popover.hide()},e}(),re=function(){function e(e){var n=this;this.context=e,this.ui=t.summernote.ui,this.options=e.options,this.events={"summernote.mousedown":function(t,e){n.update(e.target)},"summernote.keyup summernote.scroll summernote.change":function(){n.update()},"summernote.disable":function(){n.hide()}}}return e.prototype.shouldInitialize=function(){return!F.isEmpty(this.options.popover.table)},e.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-table-popover"}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content,.note-popover-content");this.context.invoke("buttons.build",t,this.options.popover.table),I.isFF&&document.execCommand("enableInlineTableEditing",!1,!1)},e.prototype.destroy=function(){this.$popover.remove()},e.prototype.update=function(t){if(this.context.isDisabled())return!1;var e=Tt.isCell(t);if(e){var n=Tt.posFromPlaceholder(t);this.$popover.css({display:"block",left:n.left,top:n.top})}else this.hide();return e},e.prototype.hide=function(){this.$popover.hide()},e}(),se=function(){function e(e){this.context=e,this.ui=t.summernote.ui,this.$body=t(document.body),this.$editor=e.layoutInfo.editor,this.options=e.options,this.lang=this.options.langInfo}return e.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor,e=['<div class="form-group note-form-group row-fluid">','<label class="note-form-label">'+this.lang.video.url+' <small class="text-muted">'+this.lang.video.providers+"</small></label>",'<input class="note-video-url form-control note-form-control note-input" type="text" />',"</div>"].join(""),n='<input type="button" href="#" class="btn btn-primary note-btn note-btn-primary note-video-btn" value="'+this.lang.video.insert+'" disabled>';this.$dialog=this.ui.dialog({title:this.lang.video.insert,fade:this.options.dialogsFade,body:e,footer:n}).render().appendTo(t)},e.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},e.prototype.bindEnterKey=function(t,e){t.on("keypress",(function(t){t.keyCode===Mt.code.ENTER&&(t.preventDefault(),e.trigger("click"))}))},e.prototype.createVideoNode=function(e){var n,i=e.match(/\/\/(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))([\w|-]{11})(?:(?:[\?&]t=)(\S+))?$/),o=e.match(/(?:www\.|\/\/)instagram\.com\/p\/(.[a-zA-Z0-9_-]*)/),a=e.match(/\/\/vine\.co\/v\/([a-zA-Z0-9]+)/),r=e.match(/\/\/(player\.)?vimeo\.com\/([a-z]*\/)*(\d+)[?]?.*/),s=e.match(/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/),l=e.match(/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/),c=e.match(/\/\/v\.qq\.com.*?vid=(.+)/),d=e.match(/\/\/v\.qq\.com\/x?\/?(page|cover).*?\/([^\/]+)\.html\??.*/),h=e.match(/^.+.(mp4|m4v)$/),u=e.match(/^.+.(ogg|ogv)$/),p=e.match(/^.+.(webm)$/),f=e.match(/(?:www\.|\/\/)facebook\.com\/([^\/]+)\/videos\/([0-9]+)/);if(i&&11===i[1].length){var m=i[1],g=0;if(void 0!==i[2]){var v=i[2].match(/^(?:(\d+)h)?(?:(\d+)m)?(?:(\d+)s)?$/);if(v)for(var b=[3600,60,1],y=0,w=b.length;y<w;y++)g+=void 0!==v[y+1]?b[y]*parseInt(v[y+1],10):0}n=t("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+m+(g>0?"?start="+g:"")).attr("width","640").attr("height","360")}else if(o&&o[0].length)n=t("<iframe>").attr("frameborder",0).attr("src","https://instagram.com/p/"+o[1]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true");else if(a&&a[0].length)n=t("<iframe>").attr("frameborder",0).attr("src",a[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed");else if(r&&r[3].length)n=t("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+r[3]).attr("width","640").attr("height","360");else if(s&&s[2].length)n=t("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+s[2]).attr("width","640").attr("height","360");else if(l&&l[1].length)n=t("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+l[1]);else if(c&&c[1].length||d&&d[2].length){var D=c&&c[1].length?c[1]:d[2];n=t("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","310").attr("width","500").attr("src","http://v.qq.com/iframe/player.html?vid="+D+"&amp;auto=0")}else if(h||u||p)n=t("<video controls>").attr("src",e).attr("width","640").attr("height","360");else{if(!f||!f[0].length)return!1;n=t("<iframe>").attr("frameborder",0).attr("src","https://www.facebook.com/plugins/video.php?href="+encodeURIComponent(f[0])+"&show_text=0&width=560").attr("width","560").attr("height","301").attr("scrolling","no").attr("allowtransparency","true")}return n.addClass("note-video-clip"),n[0]},e.prototype.show=function(){var t=this,e=this.context.invoke("editor.getSelectedText");this.context.invoke("editor.saveRange"),this.showVideoDialog(e).then((function(e){t.ui.hideDialog(t.$dialog),t.context.invoke("editor.restoreRange");var n=t.createVideoNode(e);n&&t.context.invoke("editor.insertNode",n)})).fail((function(){t.context.invoke("editor.restoreRange")}))},e.prototype.showVideoDialog=function(e){var n=this;return t.Deferred((function(t){var e=n.$dialog.find(".note-video-url"),i=n.$dialog.find(".note-video-btn");n.ui.onDialogShown(n.$dialog,(function(){n.context.triggerEvent("dialog.shown"),e.on("input paste propertychange",(function(){n.ui.toggleBtn(i,e.val())})),I.isSupportTouch||e.trigger("focus"),i.click((function(n){n.preventDefault(),t.resolve(e.val())})),n.bindEnterKey(e,i)})),n.ui.onDialogHidden(n.$dialog,(function(){e.off(),i.off(),"pending"===t.state()&&t.reject()})),n.ui.showDialog(n.$dialog)}))},e}(),le=function(){function e(e){this.context=e,this.ui=t.summernote.ui,this.$body=t(document.body),this.$editor=e.layoutInfo.editor,this.options=e.options,this.lang=this.options.langInfo}return e.prototype.initialize=function(){var t=this.options.dialogsInBody?this.$body:this.$editor,e=['<p class="text-center">','<a href="http://summernote.org/" target="_blank">Summernote 0.8.12</a>  ','<a href="https://github.com/summernote/summernote" target="_blank">Project</a>  ','<a href="https://github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=this.ui.dialog({title:this.lang.options.help,fade:this.options.dialogsFade,body:this.createShortcutList(),footer:e,callback:function(t){t.find(".modal-body,.note-modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(t)},e.prototype.destroy=function(){this.ui.hideDialog(this.$dialog),this.$dialog.remove()},e.prototype.createShortcutList=function(){var e=this,n=this.options.keyMap[I.isMac?"mac":"pc"];return Object.keys(n).map((function(i){var o=n[i],a=t('<div><div class="help-list-item"/></div>');return a.append(t("<label><kbd>"+i+"</kdb></label>").css({width:180,"margin-right":10})).append(t("<span/>").html(e.context.memo("help."+o)||o)),a.html()})).join("")},e.prototype.showHelpDialog=function(){var e=this;return t.Deferred((function(t){e.ui.onDialogShown(e.$dialog,(function(){e.context.triggerEvent("dialog.shown"),t.resolve()})),e.ui.showDialog(e.$dialog)})).promise()},e.prototype.show=function(){var t=this;this.context.invoke("editor.saveRange"),this.showHelpDialog().then((function(){t.context.invoke("editor.restoreRange")}))},e}(),ce=function(){function e(e){var n=this;this.context=e,this.ui=t.summernote.ui,this.options=e.options,this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){n.update()},"summernote.disable summernote.change summernote.dialog.shown":function(){n.hide()},"summernote.focusout":function(t,e){I.isFF||e.relatedTarget&&Tt.ancestor(e.relatedTarget,P.eq(n.$popover[0]))||n.hide()}}}return e.prototype.shouldInitialize=function(){return this.options.airMode&&!F.isEmpty(this.options.popover.air)},e.prototype.initialize=function(){this.$popover=this.ui.popover({className:"note-air-popover"}).render().appendTo(this.options.container);var t=this.$popover.find(".popover-content");this.context.invoke("buttons.build",t,this.options.popover.air)},e.prototype.destroy=function(){this.$popover.remove()},e.prototype.update=function(){var t=this.context.invoke("editor.currentStyle");if(t.range&&!t.range.isCollapsed()){var e=F.last(t.range.getClientRects());if(e){var n=P.rect2bnd(e);this.$popover.css({display:"block",left:Math.max(n.left+n.width/2,0)-20,top:n.top+n.height}),this.context.invoke("buttons.updateCurrentStyle",this.$popover)}}else this.hide()},e.prototype.hide=function(){this.$popover.hide()},e}(),de=function(){function e(e){var n=this;this.context=e,this.ui=t.summernote.ui,this.$editable=e.layoutInfo.editable,this.options=e.options,this.hint=this.options.hint||[],this.direction=this.options.hintDirection||"bottom",this.hints=Array.isArray(this.hint)?this.hint:[this.hint],this.events={"summernote.keyup":function(t,e){e.isDefaultPrevented()||n.handleKeyup(e)},"summernote.keydown":function(t,e){n.handleKeydown(e)},"summernote.disable summernote.dialog.shown":function(){n.hide()}}}return e.prototype.shouldInitialize=function(){return this.hints.length>0},e.prototype.initialize=function(){var e=this;this.lastWordRange=null,this.$popover=this.ui.popover({className:"note-hint-popover",hideArrow:!0,direction:""}).render().appendTo(this.options.container),this.$popover.hide(),this.$content=this.$popover.find(".popover-content,.note-popover-content"),this.$content.on("click",".note-hint-item",(function(n){e.$content.find(".active").removeClass("active"),t(n.currentTarget).addClass("active"),e.replace()}))},e.prototype.destroy=function(){this.$popover.remove()},e.prototype.selectItem=function(t){this.$content.find(".active").removeClass("active"),t.addClass("active"),this.$content[0].scrollTop=t[0].offsetTop-this.$content.innerHeight()/2},e.prototype.moveDown=function(){var t=this.$content.find(".note-hint-item.active"),e=t.next();if(e.length)this.selectItem(e);else{var n=t.parent().next();n.length||(n=this.$content.find(".note-hint-group").first()),this.selectItem(n.find(".note-hint-item").first())}},e.prototype.moveUp=function(){var t=this.$content.find(".note-hint-item.active"),e=t.prev();if(e.length)this.selectItem(e);else{var n=t.parent().prev();n.length||(n=this.$content.find(".note-hint-group").last()),this.selectItem(n.find(".note-hint-item").last())}},e.prototype.replace=function(){var t=this.$content.find(".note-hint-item.active");if(t.length){var e=this.nodeFromItem(t);this.lastWordRange.insertNode(e),Pt.createFromNode(e).collapse().select(),this.lastWordRange=null,this.hide(),this.context.triggerEvent("change",this.$editable.html(),this.$editable[0]),this.context.invoke("editor.focus")}},e.prototype.nodeFromItem=function(t){var e=this.hints[t.data("index")],n=t.data("item"),i=e.content?e.content(n):n;return"string"==typeof i&&(i=Tt.createText(i)),i},e.prototype.createItemTemplates=function(e,n){var i=this.hints[e];return n.map((function(n,o){var a=t('<div class="note-hint-item"/>');return a.append(i.template?i.template(n):n+""),a.data({index:e,item:n}),a}))},e.prototype.handleKeydown=function(t){this.$popover.is(":visible")&&(t.keyCode===Mt.code.ENTER?(t.preventDefault(),this.replace()):t.keyCode===Mt.code.UP?(t.preventDefault(),this.moveUp()):t.keyCode===Mt.code.DOWN&&(t.preventDefault(),this.moveDown()))},e.prototype.searchKeyword=function(t,e,n){var i=this.hints[t];if(i&&i.match.test(e)&&i.search){var o=i.match.exec(e);i.search(o[1],n)}else n()},e.prototype.createGroup=function(e,n){var i=this,o=t('<div class="note-hint-group note-hint-group-'+e+'"/>');return this.searchKeyword(e,n,(function(t){(t=t||[]).length&&(o.html(i.createItemTemplates(e,t)),i.show())})),o},e.prototype.handleKeyup=function(t){var e=this;if(!F.contains([Mt.code.ENTER,Mt.code.UP,Mt.code.DOWN],t.keyCode)){var n=this.context.invoke("editor.getLastRange").getWordRange(),i=n.toString();if(this.hints.length&&i){this.$content.empty();var o=P.rect2bnd(F.last(n.getClientRects()));o&&(this.$popover.hide(),this.lastWordRange=n,this.hints.forEach((function(t,n){t.match.test(i)&&e.createGroup(n,i).appendTo(e.$content)})),this.$content.find(".note-hint-item:first").addClass("active"),"top"===this.direction?this.$popover.css({left:o.left,top:o.top-this.$popover.outerHeight()-5}):this.$popover.css({left:o.left,top:o.top+o.height+5}))}else this.hide()}},e.prototype.show=function(){this.$popover.show()},e.prototype.hide=function(){this.$popover.hide()},e}();t.summernote=t.extend(t.summernote,{version:"0.8.12",plugins:{},dom:Tt,range:Pt,options:{langInfo:t.summernote.lang["en-US"],modules:{editor:jt,clipboard:zt,dropzone:Wt,codeview:Yt,statusbar:qt,fullscreen:Vt,handle:Gt,hintPopover:de,autoLink:Jt,autoSync:Xt,autoReplace:Zt,placeholder:Qt,buttons:te,toolbar:ee,linkDialog:ne,linkPopover:ie,imageDialog:oe,imagePopover:ae,tablePopover:re,videoDialog:se,helpDialog:le,airPopover:ce},buttons:{},lang:"en-US",followingToolbar:!1,otherStaticBar:"",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popatmouse:!0,popover:{image:[["resize",["resizeFull","resizeHalf","resizeQuarter","resizeNone"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],table:[["add",["addRowDown","addRowUp","addColLeft","addColRight"]],["delete",["deleteRow","deleteCol","deleteTable"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:null,linkTargetBlank:!0,focus:!1,tabSize:4,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,hintDirection:"bottom",tooltip:"auto",container:"body",maxTextLength:0,blockquoteBreakingLevel:2,spellCheck:!0,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontNamesIgnoreCheck:[],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],colorsName:[["Black","Tundora","Dove Gray","Star Dust","Pale Slate","Gallery","Alabaster","White"],["Red","Orange Peel","Yellow","Green","Cyan","Blue","Electric Violet","Magenta"],["Azalea","Karry","Egg White","Zanah","Botticelli","Tropical Blue","Mischka","Twilight"],["Tonys Pink","Peach Orange","Cream Brulee","Sprout","Casper","Perano","Cold Purple","Careys Pink"],["Mandy","Rajah","Dandelion","Olivine","Gulf Stream","Viking","Blue Marguerite","Puce"],["Guardsman Red","Fire Bush","Golden Dream","Chelsea Cucumber","Smalt Blue","Boston Blue","Butterfly Bush","Cadillac"],["Sangria","Mai Tai","Buddha Gold","Forest Green","Eden","Venice Blue","Meteorite","Claret"],["Rosewood","Cinnamon","Olive","Parsley","Tiber","Midnight Blue","Valentino","Loulou"]],colorButton:{foreColor:"#000000",backColor:"#FFFF00"},lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,maximumImageFileSize:null,callbacks:{onBeforeCommand:null,onBlur:null,onBlurCodeview:null,onChange:null,onChangeCodeview:null,onDialogShown:null,onEnter:null,onFocus:null,onImageLinkInsert:null,onImageUpload:null,onImageUploadError:null,onInit:null,onKeydown:null,onKeyup:null,onMousedown:null,onMouseup:null,onPaste:null,onScroll:null},codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},codeviewFilter:!1,codeviewFilterRegex:/<\/*(?:applet|b(?:ase|gsound|link)|embed|frame(?:set)?|ilayer|l(?:ayer|ink)|meta|object|s(?:cript|tyle)|t(?:itle|extarea)|xml)[^>]*?>/gi,codeviewIframeFilter:!0,codeviewIframeWhitelistSrc:[],codeviewIframeWhitelistSrcBase:["www.youtube.com","www.youtube-nocookie.com","www.facebook.com","vine.co","instagram.com","player.vimeo.com","www.dailymotion.com","player.youku.com","v.qq.com"],keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",rowBelow:"note-icon-row-below",colBefore:"note-icon-col-before",colAfter:"note-icon-col-after",rowAbove:"note-icon-row-above",rowRemove:"note-icon-row-remove",colRemove:"note-icon-col-remove",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",floatLeft:"note-icon-float-left",floatRight:"note-icon-float-right",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-menu-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",rollback:"note-icon-rollback",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}}),t.summernote=t.extend(t.summernote,{ui:y})})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.SignaturePad=e()}(this,(function(){"use strict";function t(t,e,n){this.x=t,this.y=e,this.time=n||(new Date).getTime()}function e(t,e,n,i){this.startPoint=t,this.control1=e,this.control2=n,this.endPoint=i}function n(t,e){var i=this,o=e||{};this.velocityFilterWeight=o.velocityFilterWeight||.7,this.minWidth=o.minWidth||.5,this.maxWidth=o.maxWidth||2.5,this.throttle="throttle"in o?o.throttle:16,this.minDistance="minDistance"in o?o.minDistance:5,this.throttle?this._strokeMoveUpdate=function(t,e,n){var i,o,a,r=null,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Date.now(),r=null,a=t.apply(i,o),r||(i=o=null)};return function(){var c=Date.now();s||!1!==n.leading||(s=c);var d=e-(c-s);return i=this,o=arguments,d<=0||d>e?(r&&(clearTimeout(r),r=null),s=c,a=t.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(l,d)),a}}(n.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=n.prototype._strokeUpdate,this.dotSize=o.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=o.penColor||"black",this.backgroundColor=o.backgroundColor||"rgba(0,0,0,0)",this.onBegin=o.onBegin,this.onEnd=o.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(t){1===t.which&&(i._mouseButtonDown=!0,i._strokeBegin(t))},this._handleMouseMove=function(t){i._mouseButtonDown&&i._strokeMoveUpdate(t)},this._handleMouseUp=function(t){1===t.which&&i._mouseButtonDown&&(i._mouseButtonDown=!1,i._strokeEnd(t))},this._handleTouchStart=function(t){if(1===t.targetTouches.length){var e=t.changedTouches[0];i._strokeBegin(e)}},this._handleTouchMove=function(t){t.preventDefault();var e=t.targetTouches[0];i._strokeMoveUpdate(e)},this._handleTouchEnd=function(t){t.target===i._canvas&&(t.preventDefault(),i._strokeEnd(t))},this.on()}return t.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1},t.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time},e.prototype.length=function(){for(var t=0,e=void 0,n=void 0,i=0;i<=10;i+=1){var o=i/10,a=this._point(o,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),r=this._point(o,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(i>0){var s=a-e,l=r-n;t+=Math.sqrt(s*s+l*l)}e=a,n=r}return t},e.prototype._point=function(t,e,n,i,o){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*i*(1-t)*t*t+o*t*t*t},n.prototype.clear=function(){var t=this._ctx,e=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0},n.prototype.fromDataURL=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=new Image,o=n.ratio||window.devicePixelRatio||1,a=n.width||this._canvas.width/o,r=n.height||this._canvas.height/o;this._reset(),i.src=t,i.onload=function(){e._ctx.drawImage(i,0,0,a,r)},this._isEmpty=!1},n.prototype.toDataURL=function(t){var e;if("image/svg+xml"===t)return this._toSVG();for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return(e=this._canvas).toDataURL.apply(e,[t].concat(i))},n.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},n.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},n.prototype.isEmpty=function(){return this._isEmpty},n.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),"function"==typeof this.onBegin&&this.onBegin(t)},n.prototype._strokeUpdate=function(t){var e=t.clientX,n=t.clientY,i=this._createPoint(e,n),o=this._data[this._data.length-1],a=o&&o[o.length-1],r=a&&i.distanceTo(a)<this.minDistance;if(!a||!r){var s=this._addPoint(i),l=s.curve,c=s.widths;l&&c&&this._drawCurve(l,c.start,c.end),this._data[this._data.length-1].push({x:i.x,y:i.y,time:i.time,color:this.penColor})}},n.prototype._strokeEnd=function(t){var e=this.points.length>2,n=this.points[0];if(!e&&n&&this._drawDot(n),n){var i=this._data[this._data.length-1],o=i[i.length-1];n.equals(o)||i.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}"function"==typeof this.onEnd&&this.onEnd(t)},n.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},n.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},n.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},n.prototype._createPoint=function(e,n,i){var o=this._canvas.getBoundingClientRect();return new t(e-o.left,n-o.top,i||(new Date).getTime())},n.prototype._addPoint=function(t){var n=this.points;if(n.push(t),n.length>2){3===n.length&&n.unshift(n[0]);var i=this._calculateCurveControlPoints(n[0],n[1],n[2]).c2,o=this._calculateCurveControlPoints(n[1],n[2],n[3]).c1,a=new e(n[1],i,o,n[2]),r=this._calculateCurveWidths(a);return n.shift(),{curve:a,widths:r}}return{}},n.prototype._calculateCurveControlPoints=function(e,n,i){var o=e.x-n.x,a=e.y-n.y,r=n.x-i.x,s=n.y-i.y,l=(e.x+n.x)/2,c=(e.y+n.y)/2,d=(n.x+i.x)/2,h=(n.y+i.y)/2,u=Math.sqrt(o*o+a*a),p=Math.sqrt(r*r+s*s),f=p/(u+p),m=d+(l-d)*f,g=h+(c-h)*f,v=n.x-m,b=n.y-g;return{c1:new t(l+v,c+b),c2:new t(d+v,h+b)}},n.prototype._calculateCurveWidths=function(t){var e=t.startPoint,n=t.endPoint,i={start:null,end:null},o=this.velocityFilterWeight*n.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,a=this._strokeWidth(o);return i.start=this._lastWidth,i.end=a,this._lastVelocity=o,this._lastWidth=a,i},n.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)},n.prototype._drawPoint=function(t,e,n){var i=this._ctx;i.moveTo(t,e),i.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1},n.prototype._drawCurve=function(t,e,n){var i=this._ctx,o=n-e,a=Math.floor(t.length());i.beginPath();for(var r=0;r<a;r+=1){var s=r/a,l=s*s,c=l*s,d=1-s,h=d*d,u=h*d,p=u*t.startPoint.x;p+=3*h*s*t.control1.x,p+=3*d*l*t.control2.x,p+=c*t.endPoint.x;var f=u*t.startPoint.y;f+=3*h*s*t.control1.y,f+=3*d*l*t.control2.y,f+=c*t.endPoint.y;var m=e+c*o;this._drawPoint(p,f,m)}i.closePath(),i.fill()},n.prototype._drawDot=function(t){var e=this._ctx,n="function"==typeof this.dotSize?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(t.x,t.y,n),e.closePath(),e.fill()},n.prototype._fromData=function(e,n,i){for(var o=0;o<e.length;o+=1){var a=e[o];if(a.length>1)for(var r=0;r<a.length;r+=1){var s=a[r],l=new t(s.x,s.y,s.time),c=s.color;if(0===r)this.penColor=c,this._reset(),this._addPoint(l);else if(r!==a.length-1){var d=this._addPoint(l),h=d.curve,u=d.widths;h&&u&&n(h,u,c)}}else this._reset(),i(a[0])}},n.prototype._toSVG=function(){var t=this,e=this._data,n=this._canvas,i=Math.max(window.devicePixelRatio||1,1),o=n.width/i,a=n.height/i,r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttributeNS(null,"width",n.width),r.setAttributeNS(null,"height",n.height),this._fromData(e,(function(t,e,n){var i=document.createElement("path");if(!(isNaN(t.control1.x)||isNaN(t.control1.y)||isNaN(t.control2.x)||isNaN(t.control2.y))){var o="M "+t.startPoint.x.toFixed(3)+","+t.startPoint.y.toFixed(3)+" C "+t.control1.x.toFixed(3)+","+t.control1.y.toFixed(3)+" "+t.control2.x.toFixed(3)+","+t.control2.y.toFixed(3)+" "+t.endPoint.x.toFixed(3)+","+t.endPoint.y.toFixed(3);i.setAttribute("d",o),i.setAttribute("stroke-width",(2.25*e.end).toFixed(3)),i.setAttribute("stroke",n),i.setAttribute("fill","none"),i.setAttribute("stroke-linecap","round"),r.appendChild(i)}}),(function(e){var n=document.createElement("circle"),i="function"==typeof t.dotSize?t.dotSize():t.dotSize;n.setAttribute("r",i),n.setAttribute("cx",e.x),n.setAttribute("cy",e.y),n.setAttribute("fill",e.color),r.appendChild(n)}));var s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+o+" "+a+'" width="'+o+'" height="'+a+'">',l=r.innerHTML;if(void 0===l){var c=document.createElement("dummy"),d=r.childNodes;c.innerHTML="";for(var h=0;h<d.length;h+=1)c.appendChild(d[h].cloneNode(!0));l=c.innerHTML}return"data:image/svg+xml;base64,"+btoa(s+l+"</svg>")},n.prototype.fromData=function(t){var e=this;this.clear(),this._fromData(t,(function(t,n){return e._drawCurve(t,n.start,n.end)}),(function(t){return e._drawDot(t)})),this._data=t},n.prototype.toData=function(){return this._data},n}));
